{"ast":null,"code":"import _regeneratorRuntime from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\n\nvar _CHAIN_ID_NETWORK_ARG;\n\nimport { ChainId } from '@kyberswap/ks-sdk-core';\nimport { FortmaticConnector as FortmaticConnectorCore } from '@web3-react/fortmatic-connector';\nexport var OVERLAY_READY = 'OVERLAY_READY';\nvar CHAIN_ID_NETWORK_ARGUMENT = (_CHAIN_ID_NETWORK_ARG = {}, _defineProperty(_CHAIN_ID_NETWORK_ARG, ChainId.MAINNET, undefined), _defineProperty(_CHAIN_ID_NETWORK_ARG, ChainId.ROPSTEN, 'ropsten'), _defineProperty(_CHAIN_ID_NETWORK_ARG, ChainId.RINKEBY, 'rinkeby'), _defineProperty(_CHAIN_ID_NETWORK_ARG, ChainId.KOVAN, 'kovan'), _CHAIN_ID_NETWORK_ARG);\nexport var FortmaticConnector = /*#__PURE__*/function (_FortmaticConnectorCo) {\n  _inherits(FortmaticConnector, _FortmaticConnectorCo);\n\n  var _super = _createSuper(FortmaticConnector);\n\n  function FortmaticConnector() {\n    _classCallCheck(this, FortmaticConnector);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(FortmaticConnector, [{\n    key: \"activate\",\n    value: function () {\n      var _activate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _this = this;\n\n        var _yield$import, Fortmatic, _ref, apiKey, chainId, provider, pollForOverlayReady, _yield$Promise$all, _yield$Promise$all2, account;\n\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.fortmatic) {\n                  _context.next = 11;\n                  break;\n                }\n\n                _context.next = 3;\n                return import('fortmatic');\n\n              case 3:\n                _yield$import = _context.sent;\n                Fortmatic = _yield$import.default;\n                _ref = this, apiKey = _ref.apiKey, chainId = _ref.chainId;\n\n                if (!(chainId in CHAIN_ID_NETWORK_ARGUMENT)) {\n                  _context.next = 10;\n                  break;\n                }\n\n                this.fortmatic = new Fortmatic(apiKey, CHAIN_ID_NETWORK_ARGUMENT[chainId]);\n                _context.next = 11;\n                break;\n\n              case 10:\n                throw new Error(\"Unsupported network ID: \".concat(chainId));\n\n              case 11:\n                provider = this.fortmatic.getProvider();\n                pollForOverlayReady = new Promise(function (resolve) {\n                  var interval = setInterval(function () {\n                    if (provider.overlayReady) {\n                      clearInterval(interval);\n\n                      _this.emit(OVERLAY_READY);\n\n                      resolve();\n                    }\n                  }, 200);\n                });\n                _context.next = 15;\n                return Promise.all([provider.enable().then(function (accounts) {\n                  return accounts[0];\n                }), pollForOverlayReady]);\n\n              case 15:\n                _yield$Promise$all = _context.sent;\n                _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 1);\n                account = _yield$Promise$all2[0];\n                return _context.abrupt(\"return\", {\n                  provider: this.fortmatic.getProvider(),\n                  chainId: this.chainId,\n                  account: account\n                });\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function activate() {\n        return _activate.apply(this, arguments);\n      }\n\n      return activate;\n    }()\n  }]);\n\n  return FortmaticConnector;\n}(FortmaticConnectorCore);","map":{"version":3,"names":["ChainId","FortmaticConnector","FortmaticConnectorCore","OVERLAY_READY","CHAIN_ID_NETWORK_ARGUMENT","MAINNET","undefined","ROPSTEN","RINKEBY","KOVAN","fortmatic","Fortmatic","default","apiKey","chainId","Error","provider","getProvider","pollForOverlayReady","Promise","resolve","interval","setInterval","overlayReady","clearInterval","emit","all","enable","then","accounts","account"],"sources":["/Applications/XAMPP/voxel-interface/src/connectors/Fortmatic.ts"],"sourcesContent":["import { ChainId } from '@kyberswap/ks-sdk-core'\nimport { FortmaticConnector as FortmaticConnectorCore } from '@web3-react/fortmatic-connector'\n\nexport const OVERLAY_READY = 'OVERLAY_READY'\n\ntype FormaticSupportedChains = Extract<ChainId, ChainId.MAINNET | ChainId.ROPSTEN | ChainId.RINKEBY | ChainId.KOVAN>\n\nconst CHAIN_ID_NETWORK_ARGUMENT: { readonly [chainId in FormaticSupportedChains]: string | undefined } = {\n  [ChainId.MAINNET]: undefined,\n  [ChainId.ROPSTEN]: 'ropsten',\n  [ChainId.RINKEBY]: 'rinkeby',\n  [ChainId.KOVAN]: 'kovan',\n}\n\nexport class FortmaticConnector extends FortmaticConnectorCore {\n  async activate() {\n    if (!this.fortmatic) {\n      const { default: Fortmatic } = await import('fortmatic')\n\n      const { apiKey, chainId } = this as any\n      if (chainId in CHAIN_ID_NETWORK_ARGUMENT) {\n        this.fortmatic = new Fortmatic(apiKey, CHAIN_ID_NETWORK_ARGUMENT[chainId as FormaticSupportedChains])\n      } else {\n        throw new Error(`Unsupported network ID: ${chainId}`)\n      }\n    }\n\n    const provider = this.fortmatic.getProvider()\n\n    const pollForOverlayReady = new Promise<void>(resolve => {\n      const interval = setInterval(() => {\n        if (provider.overlayReady) {\n          clearInterval(interval)\n          this.emit(OVERLAY_READY)\n          resolve()\n        }\n      }, 200)\n    })\n\n    const [account] = await Promise.all([\n      provider.enable().then((accounts: string[]) => accounts[0]),\n      pollForOverlayReady,\n    ])\n\n    return { provider: this.fortmatic.getProvider(), chainId: (this as any).chainId, account }\n  }\n}\n"],"mappings":";;;;;;;;;;;AAAA,SAASA,OAAT,QAAwB,wBAAxB;AACA,SAASC,kBAAkB,IAAIC,sBAA/B,QAA6D,iCAA7D;AAEA,OAAO,IAAMC,aAAa,GAAG,eAAtB;AAIP,IAAMC,yBAAgG,uEACnGJ,OAAO,CAACK,OAD2F,EACjFC,SADiF,0CAEnGN,OAAO,CAACO,OAF2F,EAEjF,SAFiF,0CAGnGP,OAAO,CAACQ,OAH2F,EAGjF,SAHiF,0CAInGR,OAAO,CAACS,KAJ2F,EAInF,OAJmF,yBAAtG;AAOA,WAAaR,kBAAb;EAAA;;EAAA;;EAAA;IAAA;;IAAA;EAAA;;EAAA;IAAA;IAAA;MAAA,2EACE;QAAA;;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA,IACO,KAAKS,SADZ;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAEyC,OAAO,WAAP,CAFzC;;cAAA;gBAAA;gBAEqBC,SAFrB,iBAEYC,OAFZ;gBAAA,OAIgC,IAJhC,EAIYC,MAJZ,QAIYA,MAJZ,EAIoBC,OAJpB,QAIoBA,OAJpB;;gBAAA,MAKQA,OAAO,IAAIV,yBALnB;kBAAA;kBAAA;gBAAA;;gBAMM,KAAKM,SAAL,GAAiB,IAAIC,SAAJ,CAAcE,MAAd,EAAsBT,yBAAyB,CAACU,OAAD,CAA/C,CAAjB;gBANN;gBAAA;;cAAA;gBAAA,MAQY,IAAIC,KAAJ,mCAAqCD,OAArC,EARZ;;cAAA;gBAYQE,QAZR,GAYmB,KAAKN,SAAL,CAAeO,WAAf,EAZnB;gBAcQC,mBAdR,GAc8B,IAAIC,OAAJ,CAAkB,UAAAC,OAAO,EAAI;kBACvD,IAAMC,QAAQ,GAAGC,WAAW,CAAC,YAAM;oBACjC,IAAIN,QAAQ,CAACO,YAAb,EAA2B;sBACzBC,aAAa,CAACH,QAAD,CAAb;;sBACA,KAAI,CAACI,IAAL,CAAUtB,aAAV;;sBACAiB,OAAO;oBACR;kBACF,CAN2B,EAMzB,GANyB,CAA5B;gBAOD,CAR2B,CAd9B;gBAAA;gBAAA,OAwB0BD,OAAO,CAACO,GAAR,CAAY,CAClCV,QAAQ,CAACW,MAAT,GAAkBC,IAAlB,CAAuB,UAACC,QAAD;kBAAA,OAAwBA,QAAQ,CAAC,CAAD,CAAhC;gBAAA,CAAvB,CADkC,EAElCX,mBAFkC,CAAZ,CAxB1B;;cAAA;gBAAA;gBAAA;gBAwBSY,OAxBT;gBAAA,iCA6BS;kBAAEd,QAAQ,EAAE,KAAKN,SAAL,CAAeO,WAAf,EAAZ;kBAA0CH,OAAO,EAAG,IAAD,CAAcA,OAAjE;kBAA0EgB,OAAO,EAAPA;gBAA1E,CA7BT;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CADF;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAAA;;EAAA;AAAA,EAAwC5B,sBAAxC"},"metadata":{},"sourceType":"module"}