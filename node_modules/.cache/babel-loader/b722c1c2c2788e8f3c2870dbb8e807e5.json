{"ast":null,"code":"import _toConsumableArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _regeneratorRuntime from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _taggedTemplateLiteral from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\n\nvar _jsxFileName = \"/Applications/XAMPP/voxel-interface/src/components/SearchModal/CurrencySearch.tsx\",\n    _templateObject,\n    _s = $RefreshSig$();\n\nimport { Trans } from \"@lingui/react\";\nimport { i18n } from \"@lingui/core\";\nimport { ChainId } from '@kyberswap/ks-sdk-core';\nimport axios from 'axios';\nimport { rgba } from 'polished';\nimport { stringify } from 'querystring';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { Trash } from 'react-feather';\nimport { Flex, Text } from 'rebass';\nimport styled from 'styled-components';\nimport InfoHelper from 'components/InfoHelper';\nimport { KS_SETTING_API } from 'constants/env';\nimport { nativeOnChain } from 'constants/tokens';\nimport { useAllTokens, useToken } from 'hooks/Tokens';\nimport useDebounce from 'hooks/useDebounce';\nimport { useOnClickOutside } from 'hooks/useOnClickOutside';\nimport usePrevious from 'hooks/usePrevious';\nimport useTheme from 'hooks/useTheme';\nimport useToggle from 'hooks/useToggle';\nimport { WrappedTokenInfo } from 'state/lists/wrappedTokenInfo';\nimport { useRemoveUserAddedToken, useUserAddedTokens, useUserFavoriteTokens } from 'state/user/hooks';\nimport { filterTokens } from 'utils/filtering';\nimport { useActiveWeb3React } from '../../hooks';\nimport { ButtonText, CloseIcon, TYPE } from '../../theme';\nimport { filterTruthy, isAddress } from '../../utils';\nimport Column from '../Column';\nimport { RowBetween } from '../Row';\nimport CommonBases from './CommonBases';\nimport CurrencyList from './CurrencyList';\nimport { useTokenComparator } from './sorting';\nimport { PaddedColumn, SearchIcon, SearchInput, SearchWrapper, Separator } from './styleds';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Tab;\n\n(function (Tab) {\n  Tab[Tab[\"All\"] = 0] = \"All\";\n  Tab[Tab[\"Imported\"] = 1] = \"Imported\";\n})(Tab || (Tab = {}));\n\nvar ContentWrapper = styled(Column).withConfig({\n  displayName: \"CurrencySearch__ContentWrapper\",\n  componentId: \"sc-1hnrlco-0\"\n})([\"width:100%;flex:1 1;position:relative;padding-bottom:10px;\", \";\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.mediaWidth.upToSmall(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    padding-bottom: 0px;\\n  \"])));\n});\n_c = ContentWrapper;\nvar TabButton = styled(ButtonText).withConfig({\n  displayName: \"CurrencySearch__TabButton\",\n  componentId: \"sc-1hnrlco-1\"\n})([\"height:32px;color:\", \";&[data-active='true']{color:\", \";}:focus{text-decoration:none;}\"], function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.text;\n}, function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.primary;\n});\n_c2 = TabButton;\nvar ButtonClear = styled.div.withConfig({\n  displayName: \"CurrencySearch__ButtonClear\",\n  componentId: \"sc-1hnrlco-2\"\n})([\"border-radius:24px;background-color:\", \";display:flex;align-items:center;padding:5px 10px;gap:5px;cursor:pointer;\"], function (_ref4) {\n  var theme = _ref4.theme;\n  return rgba(theme.subText, 0.2);\n});\n_c3 = ButtonClear;\nvar MAX_FAVORITE_PAIR = 12;\nvar cacheTokens = {};\n\nvar fetchTokenByAddress = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(address, chainId) {\n    var findToken, url, response, token;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            findToken = cacheTokens[address] || cacheTokens[address.toLowerCase()];\n\n            if (!findToken) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", findToken);\n\n          case 3:\n            url = \"\".concat(KS_SETTING_API, \"/v1/tokens?query=\").concat(address, \"&chainIds=\").concat(ChainId.MAINNET);\n            _context.next = 6;\n            return axios.get(url);\n\n          case 6:\n            response = _context.sent;\n            token = response.data.data.tokens[0];\n            if (token) cacheTokens[address] = token;\n            return _context.abrupt(\"return\", token);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function fetchTokenByAddress(_x, _x2) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\nvar formatAndCacheToken = function formatAndCacheToken(tokenResponse) {\n  try {\n    var tokenInfo = new WrappedTokenInfo(tokenResponse);\n    cacheTokens[tokenResponse.address] = tokenInfo;\n    return tokenInfo;\n  } catch (e) {\n    return null;\n  }\n};\n\nvar PAGE_SIZE = 20;\n\nvar fetchTokens = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(search, page, chainId) {\n    var _chainId$toString, params, url, response, tokens;\n\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            params = {\n              query: search !== null && search !== void 0 ? search : '',\n              chainIds: (_chainId$toString = chainId === null || chainId === void 0 ? void 0 : chainId.toString()) !== null && _chainId$toString !== void 0 ? _chainId$toString : '',\n              page: page,\n              pageSize: PAGE_SIZE\n            };\n\n            if (!search) {\n              params.isWhitelisted = true;\n            }\n\n            url = \"\".concat(KS_SETTING_API, \"/v1/tokens?\").concat(stringify(params));\n            _context2.next = 6;\n            return axios.get(url);\n\n          case 6:\n            response = _context2.sent;\n            tokens = response.data.data.tokens;\n            return _context2.abrupt(\"return\", {\n              tokens: tokens\n            });\n\n          case 11:\n            _context2.prev = 11;\n            _context2.t0 = _context2[\"catch\"](0);\n            return _context2.abrupt(\"return\", {\n              tokens: []\n            });\n\n          case 14:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 11]]);\n  }));\n\n  return function fetchTokens(_x3, _x4, _x5) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nexport function CurrencySearch(_ref7) {\n  _s();\n\n  var selectedCurrency = _ref7.selectedCurrency,\n      onCurrencySelect = _ref7.onCurrencySelect,\n      otherSelectedCurrency = _ref7.otherSelectedCurrency,\n      showCommonBases = _ref7.showCommonBases,\n      onDismiss = _ref7.onDismiss,\n      isOpen = _ref7.isOpen,\n      showImportView = _ref7.showImportView,\n      setImportToken = _ref7.setImportToken,\n      customChainId = _ref7.customChainId;\n\n  var _useActiveWeb3React = useActiveWeb3React(),\n      web3ChainId = _useActiveWeb3React.chainId;\n\n  var chainId = customChainId || web3ChainId;\n  var theme = useTheme();\n\n  var _useState = useState(Tab.All),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeTab = _useState2[0],\n      setActiveTab = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searchQuery = _useState4[0],\n      setSearchQuery = _useState4[1];\n\n  var debouncedQuery = useDebounce(searchQuery, 200);\n\n  var _useUserFavoriteToken = useUserFavoriteTokens(chainId),\n      favoriteTokens = _useUserFavoriteToken.favoriteTokens,\n      toggleFavoriteToken = _useUserFavoriteToken.toggleFavoriteToken;\n\n  var defaultTokens = useAllTokens();\n  var tokenImports = useUserAddedTokens();\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pageCount = _useState6[0],\n      setPageCount = _useState6[1];\n\n  var _useState7 = useState(Object.values(defaultTokens)),\n      _useState8 = _slicedToArray(_useState7, 2),\n      fetchedTokens = _useState8[0],\n      setFetchedTokens = _useState8[1];\n\n  var tokenComparator = useTokenComparator(false); // if they input an address, use it\n\n  var isAddressSearch = isAddress(debouncedQuery);\n  var searchToken = useToken(debouncedQuery);\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      commonTokens = _useState10[0],\n      setCommonTokens = _useState10[1];\n\n  var _useState11 = useState(true),\n      _useState12 = _slicedToArray(_useState11, 2),\n      loadingCommon = _useState12[0],\n      setLoadingCommon = _useState12[1];\n\n  var showETH = useMemo(function () {\n    var _nativeToken$symbol;\n\n    var nativeToken = chainId && nativeOnChain(chainId);\n    var s = debouncedQuery.toLowerCase().trim();\n    return !!(nativeToken !== null && nativeToken !== void 0 && (_nativeToken$symbol = nativeToken.symbol) !== null && _nativeToken$symbol !== void 0 && _nativeToken$symbol.toLowerCase().startsWith(s));\n  }, [debouncedQuery, chainId]);\n  var tokenImportsFiltered = useMemo(function () {\n    return (debouncedQuery ? filterTokens(tokenImports, debouncedQuery) : tokenImports).sort(tokenComparator);\n  }, [debouncedQuery, tokenImports, tokenComparator]);\n  var filteredTokens = useMemo(function () {\n    if (isAddressSearch) return searchToken ? [searchToken.wrapped] : [];\n    return fetchedTokens;\n  }, [isAddressSearch, searchToken, fetchedTokens]);\n  var filteredCommonTokens = useMemo(function () {\n    return filterTokens(commonTokens, debouncedQuery);\n  }, [commonTokens, debouncedQuery]);\n  var filteredSortedTokens = useMemo(function () {\n    if (!debouncedQuery) {\n      // only sort whitelist token,  token search we don't sort\n      var sorted = filteredTokens.sort(tokenComparator);\n      var symbolMatch = debouncedQuery.toLowerCase().split(/\\s+/).filter(function (s) {\n        return s.length > 0;\n      });\n      if (symbolMatch.length > 1) return sorted;\n      return [].concat(_toConsumableArray(sorted.filter(function (token) {\n        var _token$symbol;\n\n        return ((_token$symbol = token.symbol) === null || _token$symbol === void 0 ? void 0 : _token$symbol.toLowerCase()) === symbolMatch[0];\n      })), _toConsumableArray(sorted.filter(function (token) {\n        var _token$symbol2;\n\n        return ((_token$symbol2 = token.symbol) === null || _token$symbol2 === void 0 ? void 0 : _token$symbol2.toLowerCase()) !== symbolMatch[0];\n      })));\n    }\n\n    return filteredTokens;\n  }, [filteredTokens, debouncedQuery, tokenComparator]);\n  var handleCurrencySelect = useCallback(function (currency) {\n    onCurrencySelect(currency);\n    onDismiss();\n  }, [onDismiss, onCurrencySelect]); // manage focus on modal show\n\n  var inputRef = useRef(null); // clear the input on open\n\n  useEffect(function () {\n    if (isOpen) {\n      var _inputRef$current;\n\n      setSearchQuery('');\n      (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n    }\n  }, [isOpen]);\n  var listTokenRef = useRef(null);\n  var handleInput = useCallback(function (event) {\n    var input = event.target.value;\n    var checksumInput = isAddress(input);\n    setSearchQuery(checksumInput || input);\n    if (listTokenRef !== null && listTokenRef !== void 0 && listTokenRef.current) listTokenRef.current.scrollTop = 0;\n  }, []);\n  var handleEnter = useCallback(function (e) {\n    if (e.key === 'Enter') {\n      var s = searchQuery.toLowerCase().trim();\n\n      if (s === 'eth') {\n        handleCurrencySelect(nativeOnChain(chainId));\n      } else if (filteredSortedTokens.length > 0) {\n        var _filteredSortedTokens;\n\n        if (((_filteredSortedTokens = filteredSortedTokens[0].symbol) === null || _filteredSortedTokens === void 0 ? void 0 : _filteredSortedTokens.toLowerCase()) === searchQuery.trim().toLowerCase() || filteredSortedTokens.length === 1) {\n          handleCurrencySelect(filteredSortedTokens[0]);\n        }\n      }\n    }\n  }, [filteredSortedTokens, handleCurrencySelect, searchQuery, chainId]);\n  var handleClickFavorite = useCallback(function (e, currency) {\n    var _currency$wrapped;\n\n    e.stopPropagation();\n    var address = (currency === null || currency === void 0 ? void 0 : (_currency$wrapped = currency.wrapped) === null || _currency$wrapped === void 0 ? void 0 : _currency$wrapped.address) || currency.address;\n    if (!address) return;\n    var currentList = (favoriteTokens === null || favoriteTokens === void 0 ? void 0 : favoriteTokens.addresses) || [];\n    var isAddFavorite = currency.isNative ? !(favoriteTokens !== null && favoriteTokens !== void 0 && favoriteTokens.includeNativeToken) : !currentList.find(function (el) {\n      return el === address;\n    }); // else remove favorite\n\n    var curTotal = currentList.filter(function (address) {\n      return !!cacheTokens[address] || !!defaultTokens[address];\n    }).length + (favoriteTokens !== null && favoriteTokens !== void 0 && favoriteTokens.includeNativeToken ? 1 : 0);\n    if (!chainId || isAddFavorite && curTotal === MAX_FAVORITE_PAIR) return;\n\n    if (currency.isNative) {\n      toggleFavoriteToken({\n        chainId: chainId,\n        isNative: true\n      });\n      return;\n    }\n\n    if (currency.isToken) {\n      toggleFavoriteToken({\n        chainId: chainId,\n        address: address\n      });\n    }\n  }, [chainId, favoriteTokens, toggleFavoriteToken, defaultTokens]); // menu ui\n\n  var _useToggle = useToggle(false),\n      _useToggle2 = _slicedToArray(_useToggle, 2),\n      open = _useToggle2[0],\n      toggle = _useToggle2[1];\n\n  var node = useRef();\n  useOnClickOutside(node, open ? toggle : undefined);\n  var fetchFavoriteTokenFromAddress = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n    var promises, result, data;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n\n            if (!(!Object.keys(cacheTokens).length && !Object.keys(defaultTokens).length)) {\n              _context3.next = 3;\n              break;\n            }\n\n            return _context3.abrupt(\"return\");\n\n          case 3:\n            setLoadingCommon(true);\n            promises = [];\n            result = [];\n\n            if (favoriteTokens !== null && favoriteTokens !== void 0 && favoriteTokens.includeNativeToken && chainId) {\n              result.push(nativeOnChain(chainId));\n            }\n\n            favoriteTokens === null || favoriteTokens === void 0 ? void 0 : favoriteTokens.addresses.forEach(function (address) {\n              if (defaultTokens[address]) {\n                result.push(defaultTokens[address]);\n                return;\n              }\n\n              if (cacheTokens[address]) {\n                result.push(cacheTokens[address]);\n                return;\n              }\n\n              if (chainId) {\n                promises.push(fetchTokenByAddress(address, chainId));\n              }\n            });\n\n            if (!promises.length) {\n              _context3.next = 13;\n              break;\n            }\n\n            _context3.next = 11;\n            return Promise.allSettled(promises);\n\n          case 11:\n            data = _context3.sent;\n            data.forEach(function (el) {\n              if (el.status !== 'fulfilled') return;\n              var tokenResponse = el.value;\n              if (!tokenResponse) return;\n              var formattedToken = formatAndCacheToken(tokenResponse);\n              if (formattedToken) result.push(formattedToken);\n            });\n\n          case 13:\n            setCommonTokens(result);\n            _context3.next = 19;\n            break;\n\n          case 16:\n            _context3.prev = 16;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.log('err', _context3.t0);\n\n          case 19:\n            setLoadingCommon(false);\n\n          case 20:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 16]]);\n  })), [chainId, favoriteTokens, defaultTokens]);\n  useEffect(function () {\n    fetchFavoriteTokenFromAddress();\n  }, [fetchFavoriteTokenFromAddress]);\n  var fetchListTokens = useCallback( /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(page) {\n      var nextPage, tokens, data, parsedTokenList;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              nextPage = (page !== null && page !== void 0 ? page : pageCount) + 1;\n              tokens = [];\n\n              if (!debouncedQuery) {\n                _context4.next = 9;\n                break;\n              }\n\n              _context4.next = 5;\n              return fetchTokens(debouncedQuery, nextPage, chainId);\n\n            case 5:\n              data = _context4.sent;\n              tokens = data.tokens;\n              _context4.next = 10;\n              break;\n\n            case 9:\n              tokens = Object.values(defaultTokens);\n\n            case 10:\n              parsedTokenList = filterTruthy(tokens.map(formatAndCacheToken));\n              setPageCount(nextPage);\n              setFetchedTokens(function (current) {\n                return (nextPage === 1 ? [] : current).concat(parsedTokenList);\n              });\n              setHasMoreToken(parsedTokenList.length === PAGE_SIZE && !!debouncedQuery);\n\n            case 14:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function (_x6) {\n      return _ref9.apply(this, arguments);\n    };\n  }(), [chainId, debouncedQuery, defaultTokens, pageCount]);\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      hasMoreToken = _useState14[0],\n      setHasMoreToken = _useState14[1];\n\n  var prevQuery = usePrevious(debouncedQuery);\n  useEffect(function () {\n    if (!isAddressSearch && prevQuery !== debouncedQuery) {\n      fetchListTokens(0);\n    } // need call api when only debouncedQuery change\n\n  }, [debouncedQuery, prevQuery, fetchListTokens, isAddressSearch]);\n  useEffect(function () {\n    if (Object.keys(defaultTokens).length) fetchFavoriteTokenFromAddress(); // call once\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var combinedTokens = useMemo(function () {\n    var currencies = filteredSortedTokens;\n    if (showETH && chainId && !currencies.find(function (e) {\n      return e.isNative;\n    })) currencies.unshift(nativeOnChain(chainId));\n    return currencies;\n  }, [showETH, chainId, filteredSortedTokens]);\n  var visibleCurrencies = useMemo(function () {\n    return activeTab === Tab.Imported ? tokenImportsFiltered : combinedTokens;\n  }, [activeTab, combinedTokens, tokenImportsFiltered]);\n  var removeToken = useRemoveUserAddedToken();\n  var removeImportedToken = useCallback(function (token) {\n    if (!chainId) return;\n    removeToken(chainId, token.address);\n    if (favoriteTokens !== null && favoriteTokens !== void 0 && favoriteTokens.addresses.includes(token.address)) // remove in favorite too\n      toggleFavoriteToken({\n        chainId: chainId,\n        address: token.address\n      });\n  }, [chainId, toggleFavoriteToken, removeToken, favoriteTokens === null || favoriteTokens === void 0 ? void 0 : favoriteTokens.addresses]);\n\n  var removeAllImportToken = function removeAllImportToken() {\n    if (tokenImports) {\n      tokenImports.forEach(removeImportedToken);\n    }\n  };\n\n  var isImportedTab = activeTab === Tab.Imported;\n  return /*#__PURE__*/_jsxDEV(ContentWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(PaddedColumn, {\n      gap: \"14px\",\n      children: [/*#__PURE__*/_jsxDEV(RowBetween, {\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          fontWeight: 500,\n          fontSize: 20,\n          display: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Select a token\"\n          }, void 0, false, void 0, this), /*#__PURE__*/_jsxDEV(InfoHelper, {\n            size: 16,\n            text: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Find a token by searching for its name or symbol or by pasting its address below<0/><1/>You can select and trade any token on VoxelSwap.\",\n              components: {\n                0: /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 19\n                }, this),\n                1: /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 19\n                }, this)\n              }\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CloseIcon, {\n          onClick: onDismiss\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        style: {\n          color: theme.subText,\n          fontSize: 12\n        },\n        children: /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"You can search and select <0>any token</0> on VoxelSwap\",\n          components: {\n            0: /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: theme.text\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 39\n            }, this)\n          }\n        }, void 0, false, void 0, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SearchWrapper, {\n        children: [/*#__PURE__*/_jsxDEV(SearchInput, {\n          type: \"text\",\n          id: \"token-search-input\",\n          placeholder:\n          /*i18n*/\n          i18n._(\"Search by token name, token symbol or address\"),\n          value: searchQuery,\n          ref: inputRef,\n          onChange: handleInput,\n          onKeyDown: handleEnter,\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SearchIcon, {\n          size: 18,\n          color: theme.border\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 9\n      }, this), showCommonBases && /*#__PURE__*/_jsxDEV(CommonBases, {\n        chainId: chainId,\n        tokens: filteredCommonTokens,\n        handleToggleFavorite: handleClickFavorite,\n        onSelect: handleCurrencySelect,\n        selectedCurrency: selectedCurrency\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 11\n      }, this), loadingCommon && /*#__PURE__*/_jsxDEV(Flex, {\n        justifyContent: 'center',\n        children: /*#__PURE__*/_jsxDEV(Text, {\n          fontSize: 12,\n          color: theme.subText,\n          children: \"Loading ...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(RowBetween, {\n        children: /*#__PURE__*/_jsxDEV(Flex, {\n          sx: {\n            columnGap: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(TabButton, {\n            \"data-active\": activeTab === Tab.All,\n            onClick: function onClick() {\n              return setActiveTab(Tab.All);\n            },\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              as: \"span\",\n              fontSize: 14,\n              fontWeight: 500,\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"All\"\n              }, void 0, false, void 0, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TabButton, {\n            \"data-active\": isImportedTab,\n            onClick: function onClick() {\n              return setActiveTab(Tab.Imported);\n            },\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              as: \"span\",\n              fontSize: 14,\n              fontWeight: 500,\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Imported\"\n              }, void 0, false, void 0, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Separator, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 7\n    }, this), isImportedTab && visibleCurrencies.length > 0 && /*#__PURE__*/_jsxDEV(Flex, {\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      style: {\n        color: theme.subText,\n        fontSize: 12,\n        padding: '15px 20px 10px 20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"{0} Custom Tokens\",\n          values: {\n            0: visibleCurrencies.length\n          }\n        }, void 0, false, void 0, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ButtonClear, {\n        onClick: removeAllImportToken,\n        children: [/*#__PURE__*/_jsxDEV(Trash, {\n          size: 13\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"Clear All\"\n        }, void 0, false, void 0, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 9\n    }, this), (visibleCurrencies === null || visibleCurrencies === void 0 ? void 0 : visibleCurrencies.length) > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: listTokenRef,\n      id: \"currency-list-wrapper\",\n      style: {\n        height: '100%',\n        overflowY: 'scroll'\n      },\n      children: /*#__PURE__*/_jsxDEV(CurrencyList, {\n        removeImportedToken: removeImportedToken,\n        currencies: visibleCurrencies,\n        isImportedTab: isImportedTab,\n        handleClickFavorite: handleClickFavorite,\n        onCurrencySelect: handleCurrencySelect,\n        otherCurrency: otherSelectedCurrency,\n        selectedCurrency: selectedCurrency,\n        showImportView: showImportView,\n        setImportToken: setImportToken,\n        loadMoreRows: fetchListTokens,\n        hasMore: hasMoreToken\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Column, {\n      style: {\n        padding: '20px',\n        height: '100%'\n      },\n      children: /*#__PURE__*/_jsxDEV(TYPE.main, {\n        color: theme.text3,\n        textAlign: \"center\",\n        mb: \"20px\",\n        children: /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"No results found.\"\n        }, void 0, false, void 0, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 406,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CurrencySearch, \"/53g754RQaDLtLYi7tCV01VezNc=\", false, function () {\n  return [useActiveWeb3React, useTheme, useDebounce, useUserFavoriteTokens, useAllTokens, useUserAddedTokens, useTokenComparator, useToken, useToggle, useOnClickOutside, usePrevious, useRemoveUserAddedToken];\n});\n\n_c4 = CurrencySearch;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"ContentWrapper\");\n$RefreshReg$(_c2, \"TabButton\");\n$RefreshReg$(_c3, \"ButtonClear\");\n$RefreshReg$(_c4, \"CurrencySearch\");","map":{"version":3,"names":["ChainId","axios","rgba","stringify","useCallback","useEffect","useMemo","useRef","useState","Trash","Flex","Text","styled","InfoHelper","KS_SETTING_API","nativeOnChain","useAllTokens","useToken","useDebounce","useOnClickOutside","usePrevious","useTheme","useToggle","WrappedTokenInfo","useRemoveUserAddedToken","useUserAddedTokens","useUserFavoriteTokens","filterTokens","useActiveWeb3React","ButtonText","CloseIcon","TYPE","filterTruthy","isAddress","Column","RowBetween","CommonBases","CurrencyList","useTokenComparator","PaddedColumn","SearchIcon","SearchInput","SearchWrapper","Separator","Tab","ContentWrapper","theme","mediaWidth","upToSmall","TabButton","text","primary","ButtonClear","div","subText","MAX_FAVORITE_PAIR","cacheTokens","fetchTokenByAddress","address","chainId","findToken","toLowerCase","url","MAINNET","get","response","token","data","tokens","formatAndCacheToken","tokenResponse","tokenInfo","e","PAGE_SIZE","fetchTokens","search","page","params","query","chainIds","toString","pageSize","isWhitelisted","CurrencySearch","selectedCurrency","onCurrencySelect","otherSelectedCurrency","showCommonBases","onDismiss","isOpen","showImportView","setImportToken","customChainId","web3ChainId","All","activeTab","setActiveTab","searchQuery","setSearchQuery","debouncedQuery","favoriteTokens","toggleFavoriteToken","defaultTokens","tokenImports","pageCount","setPageCount","Object","values","fetchedTokens","setFetchedTokens","tokenComparator","isAddressSearch","searchToken","commonTokens","setCommonTokens","loadingCommon","setLoadingCommon","showETH","nativeToken","s","trim","symbol","startsWith","tokenImportsFiltered","sort","filteredTokens","wrapped","filteredCommonTokens","filteredSortedTokens","sorted","symbolMatch","split","filter","length","handleCurrencySelect","currency","inputRef","current","focus","listTokenRef","handleInput","event","input","target","value","checksumInput","scrollTop","handleEnter","key","handleClickFavorite","stopPropagation","currentList","addresses","isAddFavorite","isNative","includeNativeToken","find","el","curTotal","isToken","open","toggle","node","undefined","fetchFavoriteTokenFromAddress","keys","promises","result","push","forEach","Promise","allSettled","status","formattedToken","console","log","fetchListTokens","nextPage","parsedTokenList","map","concat","setHasMoreToken","hasMoreToken","prevQuery","combinedTokens","currencies","unshift","visibleCurrencies","Imported","removeToken","removeImportedToken","includes","removeAllImportToken","isImportedTab","color","fontSize","border","columnGap","padding","height","overflowY","text3"],"sources":["/Applications/XAMPP/voxel-interface/src/components/SearchModal/CurrencySearch.tsx"],"sourcesContent":["import { ChainId, Currency, Token } from '@kyberswap/ks-sdk-core'\nimport { Trans, t } from '@lingui/macro'\nimport { TokenInfo } from '@uniswap/token-lists'\nimport axios from 'axios'\nimport { rgba } from 'polished'\nimport { stringify } from 'querystring'\nimport { ChangeEvent, KeyboardEvent, useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { Trash } from 'react-feather'\nimport { Flex, Text } from 'rebass'\nimport styled from 'styled-components'\n\nimport InfoHelper from 'components/InfoHelper'\nimport { KS_SETTING_API } from 'constants/env'\nimport { nativeOnChain } from 'constants/tokens'\nimport { AllTokenType, useAllTokens, useToken } from 'hooks/Tokens'\nimport useDebounce from 'hooks/useDebounce'\nimport { useOnClickOutside } from 'hooks/useOnClickOutside'\nimport usePrevious from 'hooks/usePrevious'\nimport useTheme from 'hooks/useTheme'\nimport useToggle from 'hooks/useToggle'\nimport { WrappedTokenInfo } from 'state/lists/wrappedTokenInfo'\nimport { useRemoveUserAddedToken, useUserAddedTokens, useUserFavoriteTokens } from 'state/user/hooks'\nimport { filterTokens } from 'utils/filtering'\n\nimport { useActiveWeb3React } from '../../hooks'\nimport { ButtonText, CloseIcon, TYPE } from '../../theme'\nimport { filterTruthy, isAddress } from '../../utils'\nimport Column from '../Column'\nimport { RowBetween } from '../Row'\nimport CommonBases from './CommonBases'\nimport CurrencyList from './CurrencyList'\nimport { useTokenComparator } from './sorting'\nimport { PaddedColumn, SearchIcon, SearchInput, SearchWrapper, Separator } from './styleds'\n\nenum Tab {\n  All,\n  Imported,\n}\n\nconst ContentWrapper = styled(Column)`\n  width: 100%;\n  flex: 1 1;\n  position: relative;\n  padding-bottom: 10px;\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    padding-bottom: 0px;\n  `};\n`\n\nconst TabButton = styled(ButtonText)`\n  height: 32px;\n  color: ${({ theme }) => theme.text};\n  &[data-active='true'] {\n    color: ${({ theme }) => theme.primary};\n  }\n\n  :focus {\n    text-decoration: none;\n  }\n`\n\nconst ButtonClear = styled.div`\n  border-radius: 24px;\n  background-color: ${({ theme }) => rgba(theme.subText, 0.2)};\n  display: flex;\n  align-items: center;\n  padding: 5px 10px;\n  gap: 5px;\n  cursor: pointer;\n`\nconst MAX_FAVORITE_PAIR = 12\n\ninterface CurrencySearchProps {\n  isOpen: boolean\n  onDismiss: () => void\n  selectedCurrency?: Currency | null\n  onCurrencySelect: (currency: Currency) => void\n  otherSelectedCurrency?: Currency | null\n  showCommonBases?: boolean\n  showManageView: () => void\n  showImportView: () => void\n  setImportToken: (token: Token) => void\n  customChainId?: ChainId\n}\n\nexport type TokenResponse = Token & { isWhitelisted: boolean }\n\nconst cacheTokens: AllTokenType = {}\n\nconst fetchTokenByAddress = async (address: string, chainId: ChainId) => {\n  const findToken = cacheTokens[address] || cacheTokens[address.toLowerCase()]\n  if (findToken) return findToken\n  const url = `${KS_SETTING_API}/v1/tokens?query=${address}&chainIds=${ChainId.MAINNET}`\n  const response = await axios.get(url)\n  const token = response.data.data.tokens[0]\n  if (token) cacheTokens[address] = token\n  return token\n}\n\nconst formatAndCacheToken = (tokenResponse: TokenResponse) => {\n  try {\n    const tokenInfo = new WrappedTokenInfo(tokenResponse as TokenInfo)\n    cacheTokens[tokenResponse.address] = tokenInfo\n    return tokenInfo\n  } catch (e) {\n    return null\n  }\n}\n\nconst PAGE_SIZE = 20\n\nconst fetchTokens = async (\n  search: string | undefined,\n  page: number,\n  chainId: ChainId | undefined,\n): Promise<{ tokens: TokenResponse[] }> => {\n  try {\n    const params: { query: string; isWhitelisted?: boolean; pageSize: number; page: number; chainIds: string } = {\n      query: search ?? '',\n      chainIds: chainId?.toString() ?? '',\n      page,\n      pageSize: PAGE_SIZE,\n    }\n    if (!search) {\n      params.isWhitelisted = true\n    }\n    const url = `${KS_SETTING_API}/v1/tokens?${stringify(params)}`\n\n    const response = await axios.get(url)\n    const { tokens } = response.data.data\n    return { tokens }\n  } catch (error) {\n    return { tokens: [] }\n  }\n}\n\nexport function CurrencySearch({\n  selectedCurrency,\n  onCurrencySelect,\n  otherSelectedCurrency,\n  showCommonBases,\n  onDismiss,\n  isOpen,\n  showImportView,\n  setImportToken,\n  customChainId,\n}: CurrencySearchProps) {\n  const { chainId: web3ChainId } = useActiveWeb3React()\n  const chainId = customChainId || web3ChainId\n  const theme = useTheme()\n  const [activeTab, setActiveTab] = useState<Tab>(Tab.All)\n\n  const [searchQuery, setSearchQuery] = useState<string>('')\n  const debouncedQuery = useDebounce(searchQuery, 200)\n\n  const { favoriteTokens, toggleFavoriteToken } = useUserFavoriteTokens(chainId)\n\n  const defaultTokens = useAllTokens()\n\n  const tokenImports = useUserAddedTokens()\n  const [pageCount, setPageCount] = useState(0)\n  const [fetchedTokens, setFetchedTokens] = useState<Token[]>(Object.values(defaultTokens))\n\n  const tokenComparator = useTokenComparator(false)\n\n  // if they input an address, use it\n  const isAddressSearch = isAddress(debouncedQuery)\n  const searchToken = useToken(debouncedQuery)\n\n  const [commonTokens, setCommonTokens] = useState<(Token | Currency)[]>([])\n  const [loadingCommon, setLoadingCommon] = useState(true)\n\n  const showETH: boolean = useMemo(() => {\n    const nativeToken = chainId && nativeOnChain(chainId)\n    const s = debouncedQuery.toLowerCase().trim()\n    return !!nativeToken?.symbol?.toLowerCase().startsWith(s)\n  }, [debouncedQuery, chainId])\n\n  const tokenImportsFiltered = useMemo(() => {\n    return (debouncedQuery ? filterTokens(tokenImports, debouncedQuery) : tokenImports).sort(tokenComparator)\n  }, [debouncedQuery, tokenImports, tokenComparator])\n\n  const filteredTokens: Token[] = useMemo(() => {\n    if (isAddressSearch) return searchToken ? [searchToken.wrapped] : []\n    return fetchedTokens\n  }, [isAddressSearch, searchToken, fetchedTokens])\n\n  const filteredCommonTokens: Token[] = useMemo(() => {\n    return filterTokens(commonTokens as Token[], debouncedQuery)\n  }, [commonTokens, debouncedQuery])\n\n  const filteredSortedTokens: Token[] = useMemo(() => {\n    if (!debouncedQuery) {\n      // only sort whitelist token,  token search we don't sort\n      const sorted = filteredTokens.sort(tokenComparator)\n      const symbolMatch = debouncedQuery\n        .toLowerCase()\n        .split(/\\s+/)\n        .filter(s => s.length > 0)\n      if (symbolMatch.length > 1) return sorted\n      return [\n        // sort any exact symbol matches first\n        ...sorted.filter(token => token.symbol?.toLowerCase() === symbolMatch[0]),\n        ...sorted.filter(token => token.symbol?.toLowerCase() !== symbolMatch[0]),\n      ]\n    }\n    return filteredTokens\n  }, [filteredTokens, debouncedQuery, tokenComparator])\n\n  const handleCurrencySelect = useCallback(\n    (currency: Currency) => {\n      onCurrencySelect(currency)\n      onDismiss()\n    },\n    [onDismiss, onCurrencySelect],\n  )\n\n  // manage focus on modal show\n  const inputRef = useRef<HTMLInputElement>(null)\n\n  // clear the input on open\n  useEffect(() => {\n    if (isOpen) {\n      setSearchQuery('')\n      inputRef.current?.focus()\n    }\n  }, [isOpen])\n\n  const listTokenRef = useRef<HTMLInputElement>(null)\n\n  const handleInput = useCallback((event: ChangeEvent<HTMLInputElement>) => {\n    const input = event.target.value\n    const checksumInput = isAddress(input)\n    setSearchQuery(checksumInput || input)\n    if (listTokenRef?.current) listTokenRef.current.scrollTop = 0\n  }, [])\n\n  const handleEnter = useCallback(\n    (e: KeyboardEvent<HTMLInputElement>) => {\n      if (e.key === 'Enter') {\n        const s = searchQuery.toLowerCase().trim()\n        if (s === 'eth') {\n          handleCurrencySelect(nativeOnChain(chainId as ChainId))\n        } else if (filteredSortedTokens.length > 0) {\n          if (\n            filteredSortedTokens[0].symbol?.toLowerCase() === searchQuery.trim().toLowerCase() ||\n            filteredSortedTokens.length === 1\n          ) {\n            handleCurrencySelect(filteredSortedTokens[0])\n          }\n        }\n      }\n    },\n    [filteredSortedTokens, handleCurrencySelect, searchQuery, chainId],\n  )\n\n  const handleClickFavorite = useCallback(\n    (e: React.MouseEvent, currency: any) => {\n      e.stopPropagation()\n\n      const address = currency?.wrapped?.address || currency.address\n      if (!address) return\n\n      const currentList = favoriteTokens?.addresses || []\n      const isAddFavorite = currency.isNative\n        ? !favoriteTokens?.includeNativeToken\n        : !currentList.find(el => el === address) // else remove favorite\n      const curTotal =\n        currentList.filter(address => !!cacheTokens[address] || !!defaultTokens[address]).length +\n        (favoriteTokens?.includeNativeToken ? 1 : 0)\n      if (!chainId || (isAddFavorite && curTotal === MAX_FAVORITE_PAIR)) return\n\n      if (currency.isNative) {\n        toggleFavoriteToken({\n          chainId,\n          isNative: true,\n        })\n        return\n      }\n\n      if (currency.isToken) {\n        toggleFavoriteToken({\n          chainId,\n          address,\n        })\n      }\n    },\n    [chainId, favoriteTokens, toggleFavoriteToken, defaultTokens],\n  )\n\n  // menu ui\n  const [open, toggle] = useToggle(false)\n  const node = useRef<HTMLDivElement>()\n  useOnClickOutside(node, open ? toggle : undefined)\n\n  const fetchFavoriteTokenFromAddress = useCallback(async () => {\n    try {\n      if (!Object.keys(cacheTokens).length && !Object.keys(defaultTokens).length) return\n      setLoadingCommon(true)\n      const promises: Promise<any>[] = []\n      const result: (Token | Currency)[] = []\n      if (favoriteTokens?.includeNativeToken && chainId) {\n        result.push(nativeOnChain(chainId))\n      }\n      favoriteTokens?.addresses.forEach(address => {\n        if (defaultTokens[address]) {\n          result.push(defaultTokens[address])\n          return\n        }\n        if (cacheTokens[address]) {\n          result.push(cacheTokens[address])\n          return\n        }\n        if (chainId) {\n          promises.push(fetchTokenByAddress(address, chainId))\n        }\n      })\n      if (promises.length) {\n        const data = await Promise.allSettled(promises)\n        data.forEach(el => {\n          if (el.status !== 'fulfilled') return\n          const tokenResponse = el.value\n          if (!tokenResponse) return\n          const formattedToken = formatAndCacheToken(tokenResponse)\n          if (formattedToken) result.push(formattedToken)\n        })\n      }\n      setCommonTokens(result)\n    } catch (error) {\n      console.log('err', error)\n    }\n    setLoadingCommon(false)\n  }, [chainId, favoriteTokens, defaultTokens])\n\n  useEffect(() => {\n    fetchFavoriteTokenFromAddress()\n  }, [fetchFavoriteTokenFromAddress])\n\n  const fetchListTokens = useCallback(\n    async (page?: number) => {\n      const nextPage = (page ?? pageCount) + 1\n      let tokens = []\n      if (debouncedQuery) {\n        const data = await fetchTokens(debouncedQuery, nextPage, chainId)\n        tokens = data.tokens\n      } else {\n        tokens = Object.values(defaultTokens) as WrappedTokenInfo[]\n      }\n      const parsedTokenList = filterTruthy(tokens.map(formatAndCacheToken))\n      setPageCount(nextPage)\n      setFetchedTokens(current => (nextPage === 1 ? [] : current).concat(parsedTokenList))\n      setHasMoreToken(parsedTokenList.length === PAGE_SIZE && !!debouncedQuery)\n    },\n    [chainId, debouncedQuery, defaultTokens, pageCount],\n  )\n\n  const [hasMoreToken, setHasMoreToken] = useState(false)\n  const prevQuery = usePrevious(debouncedQuery)\n  useEffect(() => {\n    if (!isAddressSearch && prevQuery !== debouncedQuery) {\n      fetchListTokens(0)\n    }\n    // need call api when only debouncedQuery change\n  }, [debouncedQuery, prevQuery, fetchListTokens, isAddressSearch])\n\n  useEffect(() => {\n    if (Object.keys(defaultTokens).length) fetchFavoriteTokenFromAddress()\n    // call once\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const combinedTokens = useMemo(() => {\n    const currencies: Currency[] = filteredSortedTokens\n    if (showETH && chainId && !currencies.find(e => e.isNative)) currencies.unshift(nativeOnChain(chainId))\n    return currencies\n  }, [showETH, chainId, filteredSortedTokens])\n\n  const visibleCurrencies: Currency[] = useMemo(() => {\n    return activeTab === Tab.Imported ? tokenImportsFiltered : combinedTokens\n  }, [activeTab, combinedTokens, tokenImportsFiltered])\n\n  const removeToken = useRemoveUserAddedToken()\n\n  const removeImportedToken = useCallback(\n    (token: Token) => {\n      if (!chainId) return\n      removeToken(chainId, token.address)\n      if (favoriteTokens?.addresses.includes(token.address))\n        // remove in favorite too\n        toggleFavoriteToken({\n          chainId,\n          address: token.address,\n        })\n    },\n    [chainId, toggleFavoriteToken, removeToken, favoriteTokens?.addresses],\n  )\n\n  const removeAllImportToken = () => {\n    if (tokenImports) {\n      tokenImports.forEach(removeImportedToken)\n    }\n  }\n  const isImportedTab = activeTab === Tab.Imported\n\n  return (\n    <ContentWrapper>\n      <PaddedColumn gap=\"14px\">\n        <RowBetween>\n          <Text fontWeight={500} fontSize={20} display=\"flex\">\n            <Trans>Select a token</Trans>\n            <InfoHelper\n              size={16}\n              text={\n                <Trans>\n                  Find a token by searching for its name or symbol or by pasting its address below\n                  <br />\n                  <br />\n                  You can select and trade any token on VoxelSwap.\n                </Trans>\n              }\n            />\n          </Text>\n          <CloseIcon onClick={onDismiss} />\n        </RowBetween>\n        <Text style={{ color: theme.subText, fontSize: 12 }}>\n          <Trans>\n            You can search and select <span style={{ color: theme.text }}>any token</span> on VoxelSwap\n          </Trans>\n        </Text>\n\n        <SearchWrapper>\n          <SearchInput\n            type=\"text\"\n            id=\"token-search-input\"\n            placeholder={t`Search by token name, token symbol or address`}\n            value={searchQuery}\n            ref={inputRef}\n            onChange={handleInput}\n            onKeyDown={handleEnter}\n            autoComplete=\"off\"\n          />\n          <SearchIcon size={18} color={theme.border} />\n        </SearchWrapper>\n\n        {showCommonBases && (\n          <CommonBases\n            chainId={chainId}\n            tokens={filteredCommonTokens}\n            handleToggleFavorite={handleClickFavorite}\n            onSelect={handleCurrencySelect}\n            selectedCurrency={selectedCurrency}\n          />\n        )}\n        {loadingCommon && (\n          <Flex justifyContent={'center'}>\n            <Text fontSize={12} color={theme.subText}>\n              Loading ...\n            </Text>\n          </Flex>\n        )}\n        <RowBetween>\n          <Flex\n            sx={{\n              columnGap: '24px',\n            }}\n          >\n            <TabButton data-active={activeTab === Tab.All} onClick={() => setActiveTab(Tab.All)}>\n              <Text as=\"span\" fontSize={14} fontWeight={500}>\n                <Trans>All</Trans>\n              </Text>\n            </TabButton>\n\n            <TabButton data-active={isImportedTab} onClick={() => setActiveTab(Tab.Imported)}>\n              <Text as=\"span\" fontSize={14} fontWeight={500}>\n                <Trans>Imported</Trans>\n              </Text>\n            </TabButton>\n          </Flex>\n        </RowBetween>\n      </PaddedColumn>\n\n      <Separator />\n\n      {isImportedTab && visibleCurrencies.length > 0 && (\n        <Flex\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n          style={{ color: theme.subText, fontSize: 12, padding: '15px 20px 10px 20px' }}\n        >\n          <div>\n            <Trans>{visibleCurrencies.length} Custom Tokens</Trans>\n          </div>\n          <ButtonClear onClick={removeAllImportToken}>\n            <Trash size={13} />\n            <Trans>Clear All</Trans>\n          </ButtonClear>\n        </Flex>\n      )}\n\n      {visibleCurrencies?.length > 0 ? (\n        <div ref={listTokenRef} id=\"currency-list-wrapper\" style={{ height: '100%', overflowY: 'scroll' }}>\n          <CurrencyList\n            removeImportedToken={removeImportedToken}\n            currencies={visibleCurrencies}\n            isImportedTab={isImportedTab}\n            handleClickFavorite={handleClickFavorite}\n            onCurrencySelect={handleCurrencySelect}\n            otherCurrency={otherSelectedCurrency}\n            selectedCurrency={selectedCurrency}\n            showImportView={showImportView}\n            setImportToken={setImportToken}\n            loadMoreRows={fetchListTokens}\n            hasMore={hasMoreToken}\n          />\n        </div>\n      ) : (\n        <Column style={{ padding: '20px', height: '100%' }}>\n          <TYPE.main color={theme.text3} textAlign=\"center\" mb=\"20px\">\n            <Trans>No results found.</Trans>\n          </TYPE.main>\n        </Column>\n      )}\n    </ContentWrapper>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}