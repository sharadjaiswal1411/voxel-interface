{"ast":null,"code":"import _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Applications/XAMPP/voxel-interface/src/pages/Campaign/CampaignActions.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\n/**\n * These actions are: Enter Now -> Swap Now -> Claim\n */\nimport { memo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { BIG_INT_ZERO } from 'constants/index';\nimport { useActiveWeb3React } from 'hooks';\nimport useTemporaryClaimedRefsManager from 'hooks/campaigns/useTemporaryClaimedRefsManager';\nimport CampaignButtonEnterNow from 'pages/Campaign/CampaignButtonEnterNow';\nimport CampaignButtonWithOptions from 'pages/Campaign/CampaignButtonWithOptions';\nimport { CampaignState, CampaignStatus, CampaignUserInfoStatus } from 'state/campaigns/actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar CampaignActions = function CampaignActions(_ref) {\n  _s();\n\n  var _campaignInfo$userInf;\n\n  var campaign = _ref.campaign,\n      leaderboard = _ref.leaderboard,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 'large' : _ref$size,\n      _ref$hideWhenDisabled = _ref.hideWhenDisabled,\n      hideWhenDisabled = _ref$hideWhenDisabled === void 0 ? false : _ref$hideWhenDisabled;\n\n  var _useActiveWeb3React = useActiveWeb3React(),\n      account = _useActiveWeb3React.account;\n\n  var _useSelector = useSelector(function (state) {\n    return state.campaigns;\n  }),\n      selectedCampaign = _useSelector.selectedCampaign,\n      selectedCampaignLeaderboard = _useSelector.selectedCampaignLeaderboard;\n\n  var campaignInfo = campaign || selectedCampaign;\n  var leaderboardInfo = leaderboard || (campaign === null || campaign === void 0 ? void 0 : campaign.leaderboard) || selectedCampaignLeaderboard;\n\n  var _useTemporaryClaimedR = useTemporaryClaimedRefsManager(),\n      _useTemporaryClaimedR2 = _slicedToArray(_useTemporaryClaimedR, 2),\n      temporaryClaimedRefs = _useTemporaryClaimedR2[0],\n      addTemporaryClaimedRefs = _useTemporaryClaimedR2[1];\n\n  if (!campaignInfo || !account || !leaderboardInfo) return null;\n\n  if (campaignInfo.status === CampaignStatus.ONGOING && (campaignInfo === null || campaignInfo === void 0 ? void 0 : (_campaignInfo$userInf = campaignInfo.userInfo) === null || _campaignInfo$userInf === void 0 ? void 0 : _campaignInfo$userInf.status) === CampaignUserInfoStatus.Ineligible) {\n    return /*#__PURE__*/_jsxDEV(CampaignButtonEnterNow, {\n      size: size,\n      campaign: campaignInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 12\n    }, _this);\n  }\n\n  if (campaignInfo.status === CampaignStatus.UPCOMING) {\n    return null;\n  }\n\n  if (campaignInfo.status === CampaignStatus.ONGOING) {\n    return /*#__PURE__*/_jsxDEV(CampaignButtonWithOptions, {\n      size: size,\n      campaign: campaignInfo,\n      leaderboard: leaderboardInfo,\n      type: \"swap_now\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, _this);\n  }\n\n  if (campaignInfo.status === CampaignStatus.ENDED && (campaignInfo.campaignState === CampaignState.CampaignStateReady || campaignInfo.campaignState === CampaignState.CampaignStateFinalizedLeaderboard)) {\n    return hideWhenDisabled ? null : /*#__PURE__*/_jsxDEV(CampaignButtonWithOptions, {\n      size: size,\n      campaign: campaignInfo,\n      leaderboard: leaderboardInfo,\n      type: \"claim_rewards\",\n      disabled: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, _this);\n  }\n\n  if (campaignInfo.campaignState === CampaignState.CampaignStateDistributedRewards) {\n    var _leaderboardInfo$rewa;\n\n    var isUserClaimedRewardsInThisCampaign = true;\n    leaderboardInfo === null || leaderboardInfo === void 0 ? void 0 : (_leaderboardInfo$rewa = leaderboardInfo.rewards) === null || _leaderboardInfo$rewa === void 0 ? void 0 : _leaderboardInfo$rewa.forEach(function (reward) {\n      if (reward.rewardAmount.greaterThan(BIG_INT_ZERO) && !reward.claimed && !temporaryClaimedRefs.includes(reward.ref)) {\n        isUserClaimedRewardsInThisCampaign = false;\n      }\n    });\n    return isUserClaimedRewardsInThisCampaign && hideWhenDisabled ? null : /*#__PURE__*/_jsxDEV(CampaignButtonWithOptions, {\n      size: size,\n      campaign: campaignInfo,\n      leaderboard: leaderboardInfo,\n      type: \"claim_rewards\",\n      disabled: isUserClaimedRewardsInThisCampaign,\n      addTemporaryClaimedRefs: addTemporaryClaimedRefs\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, _this);\n  }\n\n  return null;\n};\n\n_s(CampaignActions, \"9kimoc4VF2ZaMxNe3+qIN0Nq1eU=\", false, function () {\n  return [useActiveWeb3React, useSelector, useTemporaryClaimedRefsManager];\n});\n\n_c = CampaignActions;\nexport default _c2 = /*#__PURE__*/memo(CampaignActions);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CampaignActions\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["memo","useSelector","BIG_INT_ZERO","useActiveWeb3React","useTemporaryClaimedRefsManager","CampaignButtonEnterNow","CampaignButtonWithOptions","CampaignState","CampaignStatus","CampaignUserInfoStatus","CampaignActions","campaign","leaderboard","size","hideWhenDisabled","account","state","campaigns","selectedCampaign","selectedCampaignLeaderboard","campaignInfo","leaderboardInfo","temporaryClaimedRefs","addTemporaryClaimedRefs","status","ONGOING","userInfo","Ineligible","UPCOMING","ENDED","campaignState","CampaignStateReady","CampaignStateFinalizedLeaderboard","CampaignStateDistributedRewards","isUserClaimedRewardsInThisCampaign","rewards","forEach","reward","rewardAmount","greaterThan","claimed","includes","ref"],"sources":["/Applications/XAMPP/voxel-interface/src/pages/Campaign/CampaignActions.tsx"],"sourcesContent":["/**\n * These actions are: Enter Now -> Swap Now -> Claim\n */\nimport { memo } from 'react'\nimport { useSelector } from 'react-redux'\n\nimport { BIG_INT_ZERO } from 'constants/index'\nimport { useActiveWeb3React } from 'hooks'\nimport useTemporaryClaimedRefsManager from 'hooks/campaigns/useTemporaryClaimedRefsManager'\nimport CampaignButtonEnterNow from 'pages/Campaign/CampaignButtonEnterNow'\nimport CampaignButtonWithOptions from 'pages/Campaign/CampaignButtonWithOptions'\nimport { AppState } from 'state'\nimport {\n  CampaignData,\n  CampaignLeaderboard,\n  CampaignState,\n  CampaignStatus,\n  CampaignUserInfoStatus,\n} from 'state/campaigns/actions'\n\ntype Size = 'small' | 'large'\n\ninterface CampaignActionsProps {\n  campaign?: CampaignData\n  leaderboard?: CampaignLeaderboard\n  size?: Size\n  hideWhenDisabled?: boolean\n}\n\nconst CampaignActions = ({ campaign, leaderboard, size = 'large', hideWhenDisabled = false }: CampaignActionsProps) => {\n  const { account } = useActiveWeb3React()\n\n  const { selectedCampaign, selectedCampaignLeaderboard } = useSelector((state: AppState) => state.campaigns)\n\n  const campaignInfo = campaign || selectedCampaign\n  const leaderboardInfo = leaderboard || campaign?.leaderboard || selectedCampaignLeaderboard\n\n  const [temporaryClaimedRefs, addTemporaryClaimedRefs] = useTemporaryClaimedRefsManager()\n\n  if (!campaignInfo || !account || !leaderboardInfo) return null\n\n  if (\n    campaignInfo.status === CampaignStatus.ONGOING &&\n    campaignInfo?.userInfo?.status === CampaignUserInfoStatus.Ineligible\n  ) {\n    return <CampaignButtonEnterNow size={size} campaign={campaignInfo} />\n  }\n\n  if (campaignInfo.status === CampaignStatus.UPCOMING) {\n    return null\n  }\n\n  if (campaignInfo.status === CampaignStatus.ONGOING) {\n    return (\n      <CampaignButtonWithOptions size={size} campaign={campaignInfo} leaderboard={leaderboardInfo} type=\"swap_now\" />\n    )\n  }\n\n  if (\n    campaignInfo.status === CampaignStatus.ENDED &&\n    (campaignInfo.campaignState === CampaignState.CampaignStateReady ||\n      campaignInfo.campaignState === CampaignState.CampaignStateFinalizedLeaderboard)\n  ) {\n    return hideWhenDisabled ? null : (\n      <CampaignButtonWithOptions\n        size={size}\n        campaign={campaignInfo}\n        leaderboard={leaderboardInfo}\n        type=\"claim_rewards\"\n        disabled\n      />\n    )\n  }\n\n  if (campaignInfo.campaignState === CampaignState.CampaignStateDistributedRewards) {\n    let isUserClaimedRewardsInThisCampaign = true\n    leaderboardInfo?.rewards?.forEach(reward => {\n      if (\n        reward.rewardAmount.greaterThan(BIG_INT_ZERO) &&\n        !reward.claimed &&\n        !temporaryClaimedRefs.includes(reward.ref)\n      ) {\n        isUserClaimedRewardsInThisCampaign = false\n      }\n    })\n\n    return isUserClaimedRewardsInThisCampaign && hideWhenDisabled ? null : (\n      <CampaignButtonWithOptions\n        size={size}\n        campaign={campaignInfo}\n        leaderboard={leaderboardInfo}\n        type=\"claim_rewards\"\n        disabled={isUserClaimedRewardsInThisCampaign}\n        addTemporaryClaimedRefs={addTemporaryClaimedRefs}\n      />\n    )\n  }\n\n  return null\n}\n\nexport default memo(CampaignActions)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}