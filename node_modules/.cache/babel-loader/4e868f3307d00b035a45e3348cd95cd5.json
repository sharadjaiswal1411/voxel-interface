{"ast":null,"code":"import _regeneratorRuntime from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { ChainId } from '@kyberswap/ks-sdk-core';\nimport Vibrant from 'node-vibrant';\nimport { shade } from 'polished';\nimport { useLayoutEffect, useState } from 'react';\nimport { hex } from 'wcag-contrast';\nimport { NETWORKS_INFO } from 'constants/networks';\nimport { useIsDarkMode } from 'state/user/hooks';\nimport { getTokenLogoURL } from 'utils';\nimport uriToHttp from 'utils/uriToHttp';\n\nfunction getColorFromToken(_x) {\n  return _getColorFromToken.apply(this, arguments);\n}\n\nfunction _getColorFromToken() {\n  _getColorFromToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(token) {\n    var path;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(token.chainId === ChainId.RINKEBY && token.wrapped.address === '0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735')) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.resolve('#FAAB14'));\n\n          case 2:\n            path = token.isNative ? NETWORKS_INFO[token.chainId].icon : getTokenLogoURL(token.address, token.chainId);\n            return _context.abrupt(\"return\", Vibrant.from(path).getPalette().then(function (palette) {\n              if (palette !== null && palette !== void 0 && palette.Vibrant) {\n                var detectedHex = palette.Vibrant.hex;\n                var AAscore = hex(detectedHex, '#FFF');\n\n                while (AAscore < 3) {\n                  detectedHex = shade(0.005, detectedHex);\n                  AAscore = hex(detectedHex, '#FFF');\n                }\n\n                return detectedHex;\n              }\n\n              return null;\n            }).catch(function () {\n              return null;\n            }));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getColorFromToken.apply(this, arguments);\n}\n\nfunction getColorFromUriPath(_x2, _x3) {\n  return _getColorFromUriPath.apply(this, arguments);\n}\n\nfunction _getColorFromUriPath() {\n  _getColorFromUriPath = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(uri, isDark) {\n    var formattedPath;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            formattedPath = uriToHttp(uri)[0];\n            return _context2.abrupt(\"return\", Vibrant.from(formattedPath).getPalette().then(function (palette) {\n              if (isDark) {\n                if (palette !== null && palette !== void 0 && palette.DarkVibrant) {\n                  return palette.DarkVibrant.hex;\n                }\n              } else {\n                if (palette !== null && palette !== void 0 && palette.LightVibrant) {\n                  return palette.LightVibrant.hex;\n                }\n              }\n\n              if (palette !== null && palette !== void 0 && palette.Vibrant) {\n                return palette.Vibrant.hex;\n              }\n\n              return null;\n            }).catch(function () {\n              return null;\n            }));\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getColorFromUriPath.apply(this, arguments);\n}\n\nexport function useColor(token) {\n  _s();\n\n  var _useState = useState('#2172E5'),\n      _useState2 = _slicedToArray(_useState, 2),\n      color = _useState2[0],\n      setColor = _useState2[1];\n\n  useLayoutEffect(function () {\n    var stale = false;\n\n    if (token) {\n      getColorFromToken(token).then(function (tokenColor) {\n        if (!stale && tokenColor !== null) {\n          setColor(tokenColor);\n        }\n      });\n    }\n\n    return function () {\n      stale = true;\n      setColor('#2172E5');\n    };\n  }, [token]);\n  return color;\n}\n\n_s(useColor, \"CqcsdXcHHe8YLCjEUB+BxKSpNlQ=\");\n\nexport function useListColor(listImageUri) {\n  _s2();\n\n  var _useState3 = useState('#2172E5'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      color = _useState4[0],\n      setColor = _useState4[1];\n\n  var isDark = useIsDarkMode();\n  useLayoutEffect(function () {\n    var stale = false;\n\n    if (listImageUri) {\n      getColorFromUriPath(listImageUri, isDark).then(function (color) {\n        if (!stale && color !== null) {\n          setColor(color);\n        }\n      });\n    }\n\n    return function () {\n      stale = true;\n      setColor('#2172E5');\n    };\n  }, [isDark, listImageUri]);\n  return color;\n}\n\n_s2(useListColor, \"aAUVbbgUXoktJYAK+z0JrnFSwtQ=\", false, function () {\n  return [useIsDarkMode];\n});","map":{"version":3,"names":["ChainId","Vibrant","shade","useLayoutEffect","useState","hex","NETWORKS_INFO","useIsDarkMode","getTokenLogoURL","uriToHttp","getColorFromToken","token","chainId","RINKEBY","wrapped","address","Promise","resolve","path","isNative","icon","from","getPalette","then","palette","detectedHex","AAscore","catch","getColorFromUriPath","uri","isDark","formattedPath","DarkVibrant","LightVibrant","useColor","color","setColor","stale","tokenColor","useListColor","listImageUri"],"sources":["/Applications/XAMPP/voxel-interface/src/hooks/useColor.ts"],"sourcesContent":["import { ChainId, Currency } from '@kyberswap/ks-sdk-core'\nimport Vibrant from 'node-vibrant'\nimport { shade } from 'polished'\nimport { useLayoutEffect, useState } from 'react'\nimport { hex } from 'wcag-contrast'\n\nimport { NETWORKS_INFO } from 'constants/networks'\nimport { useIsDarkMode } from 'state/user/hooks'\nimport { getTokenLogoURL } from 'utils'\nimport uriToHttp from 'utils/uriToHttp'\n\nasync function getColorFromToken(token: Currency): Promise<string | null> {\n  if (token.chainId === ChainId.RINKEBY && token.wrapped.address === '0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735') {\n    return Promise.resolve('#FAAB14')\n  }\n\n  const path = token.isNative\n    ? NETWORKS_INFO[token.chainId as ChainId].icon\n    : getTokenLogoURL(token.address, token.chainId)\n\n  return Vibrant.from(path)\n    .getPalette()\n    .then(palette => {\n      if (palette?.Vibrant) {\n        let detectedHex = palette.Vibrant.hex\n        let AAscore = hex(detectedHex, '#FFF')\n        while (AAscore < 3) {\n          detectedHex = shade(0.005, detectedHex)\n          AAscore = hex(detectedHex, '#FFF')\n        }\n        return detectedHex\n      }\n      return null\n    })\n    .catch(() => null)\n}\n\nasync function getColorFromUriPath(uri: string, isDark: boolean): Promise<string | null> {\n  const formattedPath = uriToHttp(uri)[0]\n\n  return Vibrant.from(formattedPath)\n    .getPalette()\n    .then(palette => {\n      if (isDark) {\n        if (palette?.DarkVibrant) {\n          return palette.DarkVibrant.hex\n        }\n      } else {\n        if (palette?.LightVibrant) {\n          return palette.LightVibrant.hex\n        }\n      }\n      if (palette?.Vibrant) {\n        return palette.Vibrant.hex\n      }\n      return null\n    })\n    .catch(() => null)\n}\n\nexport function useColor(token?: Currency) {\n  const [color, setColor] = useState('#2172E5')\n\n  useLayoutEffect(() => {\n    let stale = false\n\n    if (token) {\n      getColorFromToken(token).then(tokenColor => {\n        if (!stale && tokenColor !== null) {\n          setColor(tokenColor)\n        }\n      })\n    }\n\n    return () => {\n      stale = true\n      setColor('#2172E5')\n    }\n  }, [token])\n\n  return color\n}\n\nexport function useListColor(listImageUri?: string) {\n  const [color, setColor] = useState('#2172E5')\n  const isDark = useIsDarkMode()\n\n  useLayoutEffect(() => {\n    let stale = false\n\n    if (listImageUri) {\n      getColorFromUriPath(listImageUri, isDark).then(color => {\n        if (!stale && color !== null) {\n          setColor(color)\n        }\n      })\n    }\n\n    return () => {\n      stale = true\n      setColor('#2172E5')\n    }\n  }, [isDark, listImageUri])\n\n  return color\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}