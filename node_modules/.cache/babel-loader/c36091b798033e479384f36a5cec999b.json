{"ast":null,"code":"import _classCallCheck from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { _optionalChain } from '@sentry/utils/esm/buildPolyfills';\nimport { logger, isThenable } from '@sentry/utils';\n\nfunction isValidPrismaClient(possibleClient) {\n  return possibleClient && !!possibleClient['$use'];\n}\n/** Tracing integration for @prisma/client package */\n\n\nvar Prisma = /*#__PURE__*/function () {\n  /**\n   * Prisma ORM Client Instance\n   */\n\n  /**\n   * @inheritDoc\n   */\n  function Prisma() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Prisma);\n\n    ;\n\n    Prisma.prototype.__init.call(this);\n\n    if (isValidPrismaClient(options.client)) {\n      this._client = options.client;\n    } else {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(\"Unsupported Prisma client provided to PrismaIntegration. Provided client: \".concat(JSON.stringify(options.client)));\n    }\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  _createClass(Prisma, [{\n    key: \"__init\",\n    value:\n    /**\n     * @inheritDoc\n     */\n    function __init() {\n      this.name = Prisma.id;\n    }\n  }, {\n    key: \"setupOnce\",\n    value: function setupOnce(_, getCurrentHub) {\n      if (!this._client) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('PrismaIntegration is missing a Prisma Client Instance');\n        return;\n      }\n\n      this._client.$use(function (params, next) {\n        var scope = getCurrentHub().getScope();\n\n        var parentSpan = _optionalChain([scope, 'optionalAccess', function (_2) {\n          return _2.getSpan;\n        }, 'call', function (_3) {\n          return _3();\n        }]);\n\n        var action = params.action;\n        var model = params.model;\n\n        var span = _optionalChain([parentSpan, 'optionalAccess', function (_4) {\n          return _4.startChild;\n        }, 'call', function (_5) {\n          return _5({\n            description: model ? \"\".concat(model, \" \").concat(action) : action,\n            op: 'db.prisma'\n          });\n        }]);\n\n        var rv = next(params);\n\n        if (isThenable(rv)) {\n          return rv.then(function (res) {\n            _optionalChain([span, 'optionalAccess', function (_6) {\n              return _6.finish;\n            }, 'call', function (_7) {\n              return _7();\n            }]);\n\n            return res;\n          });\n        }\n\n        _optionalChain([span, 'optionalAccess', function (_8) {\n          return _8.finish;\n        }, 'call', function (_9) {\n          return _9();\n        }]);\n\n        return rv;\n      });\n    }\n  }], [{\n    key: \"__initStatic\",\n    value:\n    /**\n     * @inheritDoc\n     */\n    function __initStatic() {\n      this.id = 'Prisma';\n    }\n  }]);\n\n  return Prisma;\n}();\n\nPrisma.__initStatic();\n\nexport { Prisma };","map":null,"metadata":{},"sourceType":"module"}