{"ast":null,"code":"import _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Applications/XAMPP/voxel-interface/src/components/LiquidityChartRangeInput/Brush.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { brushX, select } from 'd3';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { OffScreenHandle, brushHandleAccentPath, brushHandlePath } from 'components/LiquidityChartRangeInput/svg';\nimport usePrevious from 'hooks/usePrevious';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar Handle = styled.path.withConfig({\n  displayName: \"Brush__Handle\",\n  componentId: \"sc-1g8b90d-0\"\n})([\"cursor:ew-resize;pointer-events:none;stroke-width:3;stroke:\", \";fill:\", \";\"], function (_ref) {\n  var color = _ref.color;\n  return color;\n}, function (_ref2) {\n  var color = _ref2.color;\n  return color;\n});\n_c = Handle;\nvar HandleAccent = styled.path.withConfig({\n  displayName: \"Brush__HandleAccent\",\n  componentId: \"sc-1g8b90d-1\"\n})([\"cursor:ew-resize;pointer-events:none;stroke-width:1.5;stroke:\", \";opacity:0.6;\"], function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.white;\n});\n_c2 = HandleAccent;\nvar LabelGroup = styled.g.withConfig({\n  displayName: \"Brush__LabelGroup\",\n  componentId: \"sc-1g8b90d-2\"\n})([\"opacity:\", \";transition:opacity 300ms;\"], function (_ref4) {\n  var visible = _ref4.visible;\n  return visible ? '1' : '0';\n});\n_c3 = LabelGroup;\nvar TooltipBackground = styled.rect.withConfig({\n  displayName: \"Brush__TooltipBackground\",\n  componentId: \"sc-1g8b90d-3\"\n})([\"fill:\", \";\"], function (_ref5) {\n  var theme = _ref5.theme;\n  return theme.bg2;\n});\n_c4 = TooltipBackground;\nvar Tooltip = styled.text.withConfig({\n  displayName: \"Brush__Tooltip\",\n  componentId: \"sc-1g8b90d-4\"\n})([\"text-anchor:middle;font-size:13px;fill:\", \";\"], function (_ref6) {\n  var theme = _ref6.theme;\n  return theme.text;\n}); // flips the handles draggers when close to the container edges\n\n_c5 = Tooltip;\nvar FLIP_HANDLE_THRESHOLD_PX = 20; // margin to prevent tick snapping from putting the brush off screen\n\nvar BRUSH_EXTENT_MARGIN_PX = 2;\n/**\n * Returns true if every element in `a` maps to the\n * same pixel coordinate as elements in `b`\n */\n\nvar compare = function compare(a, b, xScale) {\n  // normalize pixels to 1 decimals\n  var aNorm = a.map(function (x) {\n    return xScale(x).toFixed(1);\n  });\n  var bNorm = b.map(function (x) {\n    return xScale(x).toFixed(1);\n  });\n  return aNorm.every(function (v, i) {\n    return v === bNorm[i];\n  });\n};\n\nexport var Brush = function Brush(_ref7) {\n  _s();\n\n  var id = _ref7.id,\n      xScale = _ref7.xScale,\n      interactive = _ref7.interactive,\n      brushLabelValue = _ref7.brushLabelValue,\n      brushExtent = _ref7.brushExtent,\n      setBrushExtent = _ref7.setBrushExtent,\n      innerWidth = _ref7.innerWidth,\n      innerHeight = _ref7.innerHeight,\n      westHandleColor = _ref7.westHandleColor,\n      eastHandleColor = _ref7.eastHandleColor;\n  var brushRef = useRef(null);\n  var brushBehavior = useRef(null); // only used to drag the handles on brush for performance\n\n  var _useState = useState(brushExtent),\n      _useState2 = _slicedToArray(_useState, 2),\n      localBrushExtent = _useState2[0],\n      setLocalBrushExtent = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showLabels = _useState4[0],\n      setShowLabels = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      hovering = _useState6[0],\n      setHovering = _useState6[1];\n\n  var previousBrushExtent = usePrevious(brushExtent);\n  var brushed = useCallback(function (event) {\n    var type = event.type,\n        selection = event.selection,\n        mode = event.mode;\n\n    if (!selection) {\n      setLocalBrushExtent(null);\n      return;\n    }\n\n    var scaled = selection.map(xScale.invert); // avoid infinite render loop by checking for change\n\n    if (type === 'end' && !compare(brushExtent, scaled, xScale)) {\n      setBrushExtent(scaled, mode);\n    }\n\n    setLocalBrushExtent(scaled);\n  }, [xScale, brushExtent, setBrushExtent]); // keep local and external brush extent in sync\n  // i.e. snap to ticks on bruhs end\n\n  useEffect(function () {\n    setLocalBrushExtent(brushExtent);\n  }, [brushExtent]); // initialize the brush\n\n  useEffect(function () {\n    if (!brushRef.current) return;\n    brushBehavior.current = brushX().extent([[Math.max(0 + BRUSH_EXTENT_MARGIN_PX, xScale(0)), 0], [innerWidth - BRUSH_EXTENT_MARGIN_PX, innerHeight]]).handleSize(30).filter(function () {\n      return interactive;\n    }).on('brush end', brushed);\n    brushBehavior.current(select(brushRef.current));\n\n    if (previousBrushExtent && compare(brushExtent, previousBrushExtent, xScale)) {\n      select(brushRef.current).transition().call(brushBehavior.current.move, brushExtent.map(xScale));\n    } // brush linear gradient\n\n\n    select(brushRef.current).selectAll('.selection').attr('stroke', 'none').attr('fill-opacity', '0.1').attr('fill', \"url(#\".concat(id, \"-gradient-selection)\"));\n  }, [brushExtent, brushed, id, innerHeight, innerWidth, interactive, previousBrushExtent, xScale]); // respond to xScale changes only\n\n  useEffect(function () {\n    if (!brushRef.current || !brushBehavior.current) return;\n    brushBehavior.current.move(select(brushRef.current), brushExtent.map(xScale));\n  }, [brushExtent, xScale]); // show labels when local brush changes\n\n  useEffect(function () {\n    setShowLabels(true);\n    var timeout = setTimeout(function () {\n      return setShowLabels(false);\n    }, 1500);\n    return function () {\n      return clearTimeout(timeout);\n    };\n  }, [localBrushExtent]); // variables to help render the SVGs\n\n  var flipWestHandle = localBrushExtent && xScale(localBrushExtent[0]) > FLIP_HANDLE_THRESHOLD_PX;\n  var flipEastHandle = localBrushExtent && xScale(localBrushExtent[1]) > innerWidth - FLIP_HANDLE_THRESHOLD_PX;\n  var showWestArrow = localBrushExtent && (xScale(localBrushExtent[0]) < 0 || xScale(localBrushExtent[1]) < 0);\n  var showEastArrow = localBrushExtent && (xScale(localBrushExtent[0]) > innerWidth || xScale(localBrushExtent[1]) > innerWidth);\n  var westHandleInView = localBrushExtent && xScale(localBrushExtent[0]) >= 0 && xScale(localBrushExtent[0]) <= innerWidth;\n  var eastHandleInView = localBrushExtent && xScale(localBrushExtent[1]) >= 0 && xScale(localBrushExtent[1]) <= innerWidth;\n  return useMemo(function () {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n        children: [/*#__PURE__*/_jsxDEV(\"linearGradient\", {\n          id: \"\".concat(id, \"-gradient-selection\"),\n          x1: \"0%\",\n          y1: \"100%\",\n          x2: \"100%\",\n          y2: \"100%\",\n          children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n            stopColor: westHandleColor\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"stop\", {\n            stopColor: eastHandleColor,\n            offset: \"1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"clipPath\", {\n          id: \"\".concat(id, \"-brush-clip\"),\n          children: /*#__PURE__*/_jsxDEV(\"rect\", {\n            x: \"0\",\n            y: \"0\",\n            width: innerWidth,\n            height: innerHeight\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"g\", {\n        ref: brushRef,\n        clipPath: \"url(#\".concat(id, \"-brush-clip)\"),\n        onMouseEnter: function onMouseEnter() {\n          return setHovering(true);\n        },\n        onMouseLeave: function onMouseLeave() {\n          return setHovering(false);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, _this), localBrushExtent && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [westHandleInView ? /*#__PURE__*/_jsxDEV(\"g\", {\n          transform: \"translate(\".concat(Math.max(0, xScale(localBrushExtent[0])), \", 0), scale(\").concat(flipWestHandle ? '-1' : '1', \", 1)\"),\n          children: [/*#__PURE__*/_jsxDEV(\"g\", {\n            children: [/*#__PURE__*/_jsxDEV(Handle, {\n              color: westHandleColor,\n              d: brushHandlePath(innerHeight)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(HandleAccent, {\n              d: brushHandleAccentPath()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(LabelGroup, {\n            transform: \"translate(50,0), scale(\".concat(flipWestHandle ? '1' : '-1', \", 1)\"),\n            visible: showLabels || hovering,\n            children: [/*#__PURE__*/_jsxDEV(TooltipBackground, {\n              y: \"0\",\n              x: \"-30\",\n              height: \"30\",\n              width: \"60\",\n              rx: \"8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              transform: \"scale(-1, 1)\",\n              y: \"15\",\n              dominantBaseline: \"middle\",\n              children: brushLabelValue('w', localBrushExtent[0])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 15\n        }, _this) : null, eastHandleInView ? /*#__PURE__*/_jsxDEV(\"g\", {\n          transform: \"translate(\".concat(xScale(localBrushExtent[1]), \", 0), scale(\").concat(flipEastHandle ? '-1' : '1', \", 1)\"),\n          children: [/*#__PURE__*/_jsxDEV(\"g\", {\n            children: [/*#__PURE__*/_jsxDEV(Handle, {\n              color: eastHandleColor,\n              d: brushHandlePath(innerHeight)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(HandleAccent, {\n              d: brushHandleAccentPath()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(LabelGroup, {\n            transform: \"translate(50,0), scale(\".concat(flipEastHandle ? '-1' : '1', \", 1)\"),\n            visible: showLabels || hovering,\n            children: [/*#__PURE__*/_jsxDEV(TooltipBackground, {\n              y: \"0\",\n              x: \"-30\",\n              height: \"30\",\n              width: \"60\",\n              rx: \"8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              y: \"15\",\n              dominantBaseline: \"middle\",\n              children: brushLabelValue('e', localBrushExtent[1])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 15\n        }, _this) : null, showWestArrow && /*#__PURE__*/_jsxDEV(OffScreenHandle, {\n          color: westHandleColor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 31\n        }, _this), showEastArrow && /*#__PURE__*/_jsxDEV(\"g\", {\n          transform: \"translate(\".concat(innerWidth, \", 0) scale(-1, 1)\"),\n          children: /*#__PURE__*/_jsxDEV(OffScreenHandle, {\n            color: eastHandleColor\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 15\n        }, _this)]\n      }, void 0, true)]\n    }, void 0, true);\n  }, [brushLabelValue, eastHandleColor, eastHandleInView, flipEastHandle, flipWestHandle, hovering, id, innerHeight, innerWidth, localBrushExtent, showEastArrow, showLabels, showWestArrow, westHandleColor, westHandleInView, xScale]);\n};\n\n_s(Brush, \"oJl743GmG8ZPLA5DPnYJrV/aZTg=\", false, function () {\n  return [usePrevious];\n});\n\n_c6 = Brush;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"Handle\");\n$RefreshReg$(_c2, \"HandleAccent\");\n$RefreshReg$(_c3, \"LabelGroup\");\n$RefreshReg$(_c4, \"TooltipBackground\");\n$RefreshReg$(_c5, \"Tooltip\");\n$RefreshReg$(_c6, \"Brush\");","map":{"version":3,"names":["brushX","select","React","useCallback","useEffect","useMemo","useRef","useState","styled","OffScreenHandle","brushHandleAccentPath","brushHandlePath","usePrevious","Handle","path","color","HandleAccent","theme","white","LabelGroup","g","visible","TooltipBackground","rect","bg2","Tooltip","text","FLIP_HANDLE_THRESHOLD_PX","BRUSH_EXTENT_MARGIN_PX","compare","a","b","xScale","aNorm","map","x","toFixed","bNorm","every","v","i","Brush","id","interactive","brushLabelValue","brushExtent","setBrushExtent","innerWidth","innerHeight","westHandleColor","eastHandleColor","brushRef","brushBehavior","localBrushExtent","setLocalBrushExtent","showLabels","setShowLabels","hovering","setHovering","previousBrushExtent","brushed","event","type","selection","mode","scaled","invert","current","extent","Math","max","handleSize","filter","on","transition","call","move","selectAll","attr","timeout","setTimeout","clearTimeout","flipWestHandle","flipEastHandle","showWestArrow","showEastArrow","westHandleInView","eastHandleInView"],"sources":["/Applications/XAMPP/voxel-interface/src/components/LiquidityChartRangeInput/Brush.tsx"],"sourcesContent":["import { BrushBehavior, D3BrushEvent, ScaleLinear, brushX, select } from 'd3'\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport styled from 'styled-components'\n\nimport { OffScreenHandle, brushHandleAccentPath, brushHandlePath } from 'components/LiquidityChartRangeInput/svg'\nimport usePrevious from 'hooks/usePrevious'\n\nconst Handle = styled.path<{ color: string }>`\n  cursor: ew-resize;\n  pointer-events: none;\n\n  stroke-width: 3;\n  stroke: ${({ color }) => color};\n  fill: ${({ color }) => color};\n`\n\nconst HandleAccent = styled.path`\n  cursor: ew-resize;\n  pointer-events: none;\n\n  stroke-width: 1.5;\n  stroke: ${({ theme }) => theme.white};\n  opacity: 0.6;\n`\n\nconst LabelGroup = styled.g<{ visible: boolean }>`\n  opacity: ${({ visible }) => (visible ? '1' : '0')};\n  transition: opacity 300ms;\n`\n\nconst TooltipBackground = styled.rect`\n  fill: ${({ theme }) => theme.bg2};\n`\n\nconst Tooltip = styled.text`\n  text-anchor: middle;\n  font-size: 13px;\n  fill: ${({ theme }) => theme.text};\n`\n\n// flips the handles draggers when close to the container edges\nconst FLIP_HANDLE_THRESHOLD_PX = 20\n\n// margin to prevent tick snapping from putting the brush off screen\nconst BRUSH_EXTENT_MARGIN_PX = 2\n\n/**\n * Returns true if every element in `a` maps to the\n * same pixel coordinate as elements in `b`\n */\nconst compare = (a: [number, number], b: [number, number], xScale: ScaleLinear<number, number>): boolean => {\n  // normalize pixels to 1 decimals\n  const aNorm = a.map(x => xScale(x).toFixed(1))\n  const bNorm = b.map(x => xScale(x).toFixed(1))\n  return aNorm.every((v, i) => v === bNorm[i])\n}\n\nexport const Brush = ({\n  id,\n  xScale,\n  interactive,\n  brushLabelValue,\n  brushExtent,\n  setBrushExtent,\n  innerWidth,\n  innerHeight,\n  westHandleColor,\n  eastHandleColor,\n}: {\n  id: string\n  xScale: ScaleLinear<number, number>\n  interactive: boolean\n  brushLabelValue: (d: 'w' | 'e', x: number) => string\n  brushExtent: [number, number]\n  setBrushExtent: (extent: [number, number], mode: string | undefined) => void\n  innerWidth: number\n  innerHeight: number\n  westHandleColor: string\n  eastHandleColor: string\n}) => {\n  const brushRef = useRef<SVGGElement | null>(null)\n  const brushBehavior = useRef<BrushBehavior<SVGGElement> | null>(null)\n\n  // only used to drag the handles on brush for performance\n  const [localBrushExtent, setLocalBrushExtent] = useState<[number, number] | null>(brushExtent)\n  const [showLabels, setShowLabels] = useState(false)\n  const [hovering, setHovering] = useState(false)\n\n  const previousBrushExtent = usePrevious(brushExtent)\n\n  const brushed = useCallback(\n    (event: D3BrushEvent<unknown>) => {\n      const { type, selection, mode } = event\n\n      if (!selection) {\n        setLocalBrushExtent(null)\n        return\n      }\n\n      const scaled = (selection as [number, number]).map(xScale.invert) as [number, number]\n\n      // avoid infinite render loop by checking for change\n      if (type === 'end' && !compare(brushExtent, scaled, xScale)) {\n        setBrushExtent(scaled, mode)\n      }\n\n      setLocalBrushExtent(scaled)\n    },\n    [xScale, brushExtent, setBrushExtent],\n  )\n\n  // keep local and external brush extent in sync\n  // i.e. snap to ticks on bruhs end\n  useEffect(() => {\n    setLocalBrushExtent(brushExtent)\n  }, [brushExtent])\n\n  // initialize the brush\n  useEffect(() => {\n    if (!brushRef.current) return\n\n    brushBehavior.current = brushX<SVGGElement>()\n      .extent([\n        [Math.max(0 + BRUSH_EXTENT_MARGIN_PX, xScale(0)), 0],\n        [innerWidth - BRUSH_EXTENT_MARGIN_PX, innerHeight],\n      ])\n      .handleSize(30)\n      .filter(() => interactive)\n      .on('brush end', brushed)\n\n    brushBehavior.current(select(brushRef.current))\n\n    if (previousBrushExtent && compare(brushExtent, previousBrushExtent, xScale)) {\n      select(brushRef.current)\n        .transition()\n        .call(brushBehavior.current.move as any, brushExtent.map(xScale))\n    }\n\n    // brush linear gradient\n    select(brushRef.current)\n      .selectAll('.selection')\n      .attr('stroke', 'none')\n      .attr('fill-opacity', '0.1')\n      .attr('fill', `url(#${id}-gradient-selection)`)\n  }, [brushExtent, brushed, id, innerHeight, innerWidth, interactive, previousBrushExtent, xScale])\n\n  // respond to xScale changes only\n  useEffect(() => {\n    if (!brushRef.current || !brushBehavior.current) return\n\n    brushBehavior.current.move(select(brushRef.current) as any, brushExtent.map(xScale) as any)\n  }, [brushExtent, xScale])\n\n  // show labels when local brush changes\n  useEffect(() => {\n    setShowLabels(true)\n    const timeout = setTimeout(() => setShowLabels(false), 1500)\n    return () => clearTimeout(timeout)\n  }, [localBrushExtent])\n\n  // variables to help render the SVGs\n  const flipWestHandle = localBrushExtent && xScale(localBrushExtent[0]) > FLIP_HANDLE_THRESHOLD_PX\n  const flipEastHandle = localBrushExtent && xScale(localBrushExtent[1]) > innerWidth - FLIP_HANDLE_THRESHOLD_PX\n\n  const showWestArrow = localBrushExtent && (xScale(localBrushExtent[0]) < 0 || xScale(localBrushExtent[1]) < 0)\n  const showEastArrow =\n    localBrushExtent && (xScale(localBrushExtent[0]) > innerWidth || xScale(localBrushExtent[1]) > innerWidth)\n\n  const westHandleInView =\n    localBrushExtent && xScale(localBrushExtent[0]) >= 0 && xScale(localBrushExtent[0]) <= innerWidth\n  const eastHandleInView =\n    localBrushExtent && xScale(localBrushExtent[1]) >= 0 && xScale(localBrushExtent[1]) <= innerWidth\n\n  return useMemo(\n    () => (\n      <>\n        <defs>\n          <linearGradient id={`${id}-gradient-selection`} x1=\"0%\" y1=\"100%\" x2=\"100%\" y2=\"100%\">\n            <stop stopColor={westHandleColor} />\n            <stop stopColor={eastHandleColor} offset=\"1\" />\n          </linearGradient>\n\n          {/* clips at exactly the svg area */}\n          <clipPath id={`${id}-brush-clip`}>\n            <rect x=\"0\" y=\"0\" width={innerWidth} height={innerHeight} />\n          </clipPath>\n        </defs>\n\n        {/* will host the d3 brush */}\n        <g\n          ref={brushRef}\n          clipPath={`url(#${id}-brush-clip)`}\n          onMouseEnter={() => setHovering(true)}\n          onMouseLeave={() => setHovering(false)}\n        />\n\n        {/* custom brush handles */}\n        {localBrushExtent && (\n          <>\n            {/* west handle */}\n            {westHandleInView ? (\n              <g\n                transform={`translate(${Math.max(0, xScale(localBrushExtent[0]))}, 0), scale(${\n                  flipWestHandle ? '-1' : '1'\n                }, 1)`}\n              >\n                <g>\n                  <Handle color={westHandleColor} d={brushHandlePath(innerHeight)} />\n                  <HandleAccent d={brushHandleAccentPath()} />\n                </g>\n\n                <LabelGroup\n                  transform={`translate(50,0), scale(${flipWestHandle ? '1' : '-1'}, 1)`}\n                  visible={showLabels || hovering}\n                >\n                  <TooltipBackground y=\"0\" x=\"-30\" height=\"30\" width=\"60\" rx=\"8\" />\n                  <Tooltip transform={`scale(-1, 1)`} y=\"15\" dominantBaseline=\"middle\">\n                    {brushLabelValue('w', localBrushExtent[0])}\n                  </Tooltip>\n                </LabelGroup>\n              </g>\n            ) : null}\n\n            {/* east handle */}\n            {eastHandleInView ? (\n              <g transform={`translate(${xScale(localBrushExtent[1])}, 0), scale(${flipEastHandle ? '-1' : '1'}, 1)`}>\n                <g>\n                  <Handle color={eastHandleColor} d={brushHandlePath(innerHeight)} />\n                  <HandleAccent d={brushHandleAccentPath()} />\n                </g>\n\n                <LabelGroup\n                  transform={`translate(50,0), scale(${flipEastHandle ? '-1' : '1'}, 1)`}\n                  visible={showLabels || hovering}\n                >\n                  <TooltipBackground y=\"0\" x=\"-30\" height=\"30\" width=\"60\" rx=\"8\" />\n                  <Tooltip y=\"15\" dominantBaseline=\"middle\">\n                    {brushLabelValue('e', localBrushExtent[1])}\n                  </Tooltip>\n                </LabelGroup>\n              </g>\n            ) : null}\n\n            {showWestArrow && <OffScreenHandle color={westHandleColor} />}\n\n            {showEastArrow && (\n              <g transform={`translate(${innerWidth}, 0) scale(-1, 1)`}>\n                <OffScreenHandle color={eastHandleColor} />\n              </g>\n            )}\n          </>\n        )}\n      </>\n    ),\n    [\n      brushLabelValue,\n      eastHandleColor,\n      eastHandleInView,\n      flipEastHandle,\n      flipWestHandle,\n      hovering,\n      id,\n      innerHeight,\n      innerWidth,\n      localBrushExtent,\n      showEastArrow,\n      showLabels,\n      showWestArrow,\n      westHandleColor,\n      westHandleInView,\n      xScale,\n    ],\n  )\n}\n"],"mappings":";;;;;;AAAA,SAAmDA,MAAnD,EAA2DC,MAA3D,QAAyE,IAAzE;AACA,OAAOC,KAAP,IAAgBC,WAAhB,EAA6BC,SAA7B,EAAwCC,OAAxC,EAAiDC,MAAjD,EAAyDC,QAAzD,QAAyE,OAAzE;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,SAASC,eAAT,EAA0BC,qBAA1B,EAAiDC,eAAjD,QAAwE,yCAAxE;AACA,OAAOC,WAAP,MAAwB,mBAAxB;;;AAEA,IAAMC,MAAM,GAAGL,MAAM,CAACM,IAAV;EAAA;EAAA;AAAA,mFAKA;EAAA,IAAGC,KAAH,QAAGA,KAAH;EAAA,OAAeA,KAAf;AAAA,CALA,EAMF;EAAA,IAAGA,KAAH,SAAGA,KAAH;EAAA,OAAeA,KAAf;AAAA,CANE,CAAZ;KAAMF,M;AASN,IAAMG,YAAY,GAAGR,MAAM,CAACM,IAAV;EAAA;EAAA;AAAA,uFAKN;EAAA,IAAGG,KAAH,SAAGA,KAAH;EAAA,OAAeA,KAAK,CAACC,KAArB;AAAA,CALM,CAAlB;MAAMF,Y;AASN,IAAMG,UAAU,GAAGX,MAAM,CAACY,CAAV;EAAA;EAAA;AAAA,+CACH;EAAA,IAAGC,OAAH,SAAGA,OAAH;EAAA,OAAkBA,OAAO,GAAG,GAAH,GAAS,GAAlC;AAAA,CADG,CAAhB;MAAMF,U;AAKN,IAAMG,iBAAiB,GAAGd,MAAM,CAACe,IAAV;EAAA;EAAA;AAAA,mBACb;EAAA,IAAGN,KAAH,SAAGA,KAAH;EAAA,OAAeA,KAAK,CAACO,GAArB;AAAA,CADa,CAAvB;MAAMF,iB;AAIN,IAAMG,OAAO,GAAGjB,MAAM,CAACkB,IAAV;EAAA;EAAA;AAAA,qDAGH;EAAA,IAAGT,KAAH,SAAGA,KAAH;EAAA,OAAeA,KAAK,CAACS,IAArB;AAAA,CAHG,CAAb,C,CAMA;;MANMD,O;AAON,IAAME,wBAAwB,GAAG,EAAjC,C,CAEA;;AACA,IAAMC,sBAAsB,GAAG,CAA/B;AAEA;AACA;AACA;AACA;;AACA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,CAAD,EAAsBC,CAAtB,EAA2CC,MAA3C,EAA4F;EAC1G;EACA,IAAMC,KAAK,GAAGH,CAAC,CAACI,GAAF,CAAM,UAAAC,CAAC;IAAA,OAAIH,MAAM,CAACG,CAAD,CAAN,CAAUC,OAAV,CAAkB,CAAlB,CAAJ;EAAA,CAAP,CAAd;EACA,IAAMC,KAAK,GAAGN,CAAC,CAACG,GAAF,CAAM,UAAAC,CAAC;IAAA,OAAIH,MAAM,CAACG,CAAD,CAAN,CAAUC,OAAV,CAAkB,CAAlB,CAAJ;EAAA,CAAP,CAAd;EACA,OAAOH,KAAK,CAACK,KAAN,CAAY,UAACC,CAAD,EAAIC,CAAJ;IAAA,OAAUD,CAAC,KAAKF,KAAK,CAACG,CAAD,CAArB;EAAA,CAAZ,CAAP;AACD,CALD;;AAOA,OAAO,IAAMC,KAAK,GAAG,SAARA,KAAQ,QAsBf;EAAA;;EAAA,IArBJC,EAqBI,SArBJA,EAqBI;EAAA,IApBJV,MAoBI,SApBJA,MAoBI;EAAA,IAnBJW,WAmBI,SAnBJA,WAmBI;EAAA,IAlBJC,eAkBI,SAlBJA,eAkBI;EAAA,IAjBJC,WAiBI,SAjBJA,WAiBI;EAAA,IAhBJC,cAgBI,SAhBJA,cAgBI;EAAA,IAfJC,UAeI,SAfJA,UAeI;EAAA,IAdJC,WAcI,SAdJA,WAcI;EAAA,IAbJC,eAaI,SAbJA,eAaI;EAAA,IAZJC,eAYI,SAZJA,eAYI;EACJ,IAAMC,QAAQ,GAAG7C,MAAM,CAAqB,IAArB,CAAvB;EACA,IAAM8C,aAAa,GAAG9C,MAAM,CAAoC,IAApC,CAA5B,CAFI,CAIJ;;EACA,gBAAgDC,QAAQ,CAA0BsC,WAA1B,CAAxD;EAAA;EAAA,IAAOQ,gBAAP;EAAA,IAAyBC,mBAAzB;;EACA,iBAAoC/C,QAAQ,CAAC,KAAD,CAA5C;EAAA;EAAA,IAAOgD,UAAP;EAAA,IAAmBC,aAAnB;;EACA,iBAAgCjD,QAAQ,CAAC,KAAD,CAAxC;EAAA;EAAA,IAAOkD,QAAP;EAAA,IAAiBC,WAAjB;;EAEA,IAAMC,mBAAmB,GAAG/C,WAAW,CAACiC,WAAD,CAAvC;EAEA,IAAMe,OAAO,GAAGzD,WAAW,CACzB,UAAC0D,KAAD,EAAkC;IAChC,IAAQC,IAAR,GAAkCD,KAAlC,CAAQC,IAAR;IAAA,IAAcC,SAAd,GAAkCF,KAAlC,CAAcE,SAAd;IAAA,IAAyBC,IAAzB,GAAkCH,KAAlC,CAAyBG,IAAzB;;IAEA,IAAI,CAACD,SAAL,EAAgB;MACdT,mBAAmB,CAAC,IAAD,CAAnB;MACA;IACD;;IAED,IAAMW,MAAM,GAAIF,SAAD,CAAgC7B,GAAhC,CAAoCF,MAAM,CAACkC,MAA3C,CAAf,CARgC,CAUhC;;IACA,IAAIJ,IAAI,KAAK,KAAT,IAAkB,CAACjC,OAAO,CAACgB,WAAD,EAAcoB,MAAd,EAAsBjC,MAAtB,CAA9B,EAA6D;MAC3Dc,cAAc,CAACmB,MAAD,EAASD,IAAT,CAAd;IACD;;IAEDV,mBAAmB,CAACW,MAAD,CAAnB;EACD,CAjBwB,EAkBzB,CAACjC,MAAD,EAASa,WAAT,EAAsBC,cAAtB,CAlByB,CAA3B,CAXI,CAgCJ;EACA;;EACA1C,SAAS,CAAC,YAAM;IACdkD,mBAAmB,CAACT,WAAD,CAAnB;EACD,CAFQ,EAEN,CAACA,WAAD,CAFM,CAAT,CAlCI,CAsCJ;;EACAzC,SAAS,CAAC,YAAM;IACd,IAAI,CAAC+C,QAAQ,CAACgB,OAAd,EAAuB;IAEvBf,aAAa,CAACe,OAAd,GAAwBnE,MAAM,GAC3BoE,MADqB,CACd,CACN,CAACC,IAAI,CAACC,GAAL,CAAS,IAAI1C,sBAAb,EAAqCI,MAAM,CAAC,CAAD,CAA3C,CAAD,EAAkD,CAAlD,CADM,EAEN,CAACe,UAAU,GAAGnB,sBAAd,EAAsCoB,WAAtC,CAFM,CADc,EAKrBuB,UALqB,CAKV,EALU,EAMrBC,MANqB,CAMd;MAAA,OAAM7B,WAAN;IAAA,CANc,EAOrB8B,EAPqB,CAOlB,WAPkB,EAOLb,OAPK,CAAxB;IASAR,aAAa,CAACe,OAAd,CAAsBlE,MAAM,CAACkD,QAAQ,CAACgB,OAAV,CAA5B;;IAEA,IAAIR,mBAAmB,IAAI9B,OAAO,CAACgB,WAAD,EAAcc,mBAAd,EAAmC3B,MAAnC,CAAlC,EAA8E;MAC5E/B,MAAM,CAACkD,QAAQ,CAACgB,OAAV,CAAN,CACGO,UADH,GAEGC,IAFH,CAEQvB,aAAa,CAACe,OAAd,CAAsBS,IAF9B,EAE2C/B,WAAW,CAACX,GAAZ,CAAgBF,MAAhB,CAF3C;IAGD,CAlBa,CAoBd;;;IACA/B,MAAM,CAACkD,QAAQ,CAACgB,OAAV,CAAN,CACGU,SADH,CACa,YADb,EAEGC,IAFH,CAEQ,QAFR,EAEkB,MAFlB,EAGGA,IAHH,CAGQ,cAHR,EAGwB,KAHxB,EAIGA,IAJH,CAIQ,MAJR,iBAIwBpC,EAJxB;EAKD,CA1BQ,EA0BN,CAACG,WAAD,EAAce,OAAd,EAAuBlB,EAAvB,EAA2BM,WAA3B,EAAwCD,UAAxC,EAAoDJ,WAApD,EAAiEgB,mBAAjE,EAAsF3B,MAAtF,CA1BM,CAAT,CAvCI,CAmEJ;;EACA5B,SAAS,CAAC,YAAM;IACd,IAAI,CAAC+C,QAAQ,CAACgB,OAAV,IAAqB,CAACf,aAAa,CAACe,OAAxC,EAAiD;IAEjDf,aAAa,CAACe,OAAd,CAAsBS,IAAtB,CAA2B3E,MAAM,CAACkD,QAAQ,CAACgB,OAAV,CAAjC,EAA4DtB,WAAW,CAACX,GAAZ,CAAgBF,MAAhB,CAA5D;EACD,CAJQ,EAIN,CAACa,WAAD,EAAcb,MAAd,CAJM,CAAT,CApEI,CA0EJ;;EACA5B,SAAS,CAAC,YAAM;IACdoD,aAAa,CAAC,IAAD,CAAb;IACA,IAAMuB,OAAO,GAAGC,UAAU,CAAC;MAAA,OAAMxB,aAAa,CAAC,KAAD,CAAnB;IAAA,CAAD,EAA6B,IAA7B,CAA1B;IACA,OAAO;MAAA,OAAMyB,YAAY,CAACF,OAAD,CAAlB;IAAA,CAAP;EACD,CAJQ,EAIN,CAAC1B,gBAAD,CAJM,CAAT,CA3EI,CAiFJ;;EACA,IAAM6B,cAAc,GAAG7B,gBAAgB,IAAIrB,MAAM,CAACqB,gBAAgB,CAAC,CAAD,CAAjB,CAAN,GAA8B1B,wBAAzE;EACA,IAAMwD,cAAc,GAAG9B,gBAAgB,IAAIrB,MAAM,CAACqB,gBAAgB,CAAC,CAAD,CAAjB,CAAN,GAA8BN,UAAU,GAAGpB,wBAAtF;EAEA,IAAMyD,aAAa,GAAG/B,gBAAgB,KAAKrB,MAAM,CAACqB,gBAAgB,CAAC,CAAD,CAAjB,CAAN,GAA8B,CAA9B,IAAmCrB,MAAM,CAACqB,gBAAgB,CAAC,CAAD,CAAjB,CAAN,GAA8B,CAAtE,CAAtC;EACA,IAAMgC,aAAa,GACjBhC,gBAAgB,KAAKrB,MAAM,CAACqB,gBAAgB,CAAC,CAAD,CAAjB,CAAN,GAA8BN,UAA9B,IAA4Cf,MAAM,CAACqB,gBAAgB,CAAC,CAAD,CAAjB,CAAN,GAA8BN,UAA/E,CADlB;EAGA,IAAMuC,gBAAgB,GACpBjC,gBAAgB,IAAIrB,MAAM,CAACqB,gBAAgB,CAAC,CAAD,CAAjB,CAAN,IAA+B,CAAnD,IAAwDrB,MAAM,CAACqB,gBAAgB,CAAC,CAAD,CAAjB,CAAN,IAA+BN,UADzF;EAEA,IAAMwC,gBAAgB,GACpBlC,gBAAgB,IAAIrB,MAAM,CAACqB,gBAAgB,CAAC,CAAD,CAAjB,CAAN,IAA+B,CAAnD,IAAwDrB,MAAM,CAACqB,gBAAgB,CAAC,CAAD,CAAjB,CAAN,IAA+BN,UADzF;EAGA,OAAO1C,OAAO,CACZ;IAAA,oBACE;MAAA,wBACE;QAAA,wBACE;UAAgB,EAAE,YAAKqC,EAAL,wBAAlB;UAAgD,EAAE,EAAC,IAAnD;UAAwD,EAAE,EAAC,MAA3D;UAAkE,EAAE,EAAC,MAArE;UAA4E,EAAE,EAAC,MAA/E;UAAA,wBACE;YAAM,SAAS,EAAEO;UAAjB;YAAA;YAAA;YAAA;UAAA,SADF,eAEE;YAAM,SAAS,EAAEC,eAAjB;YAAkC,MAAM,EAAC;UAAzC;YAAA;YAAA;YAAA;UAAA,SAFF;QAAA;UAAA;UAAA;UAAA;QAAA,SADF,eAOE;UAAU,EAAE,YAAKR,EAAL,gBAAZ;UAAA,uBACE;YAAM,CAAC,EAAC,GAAR;YAAY,CAAC,EAAC,GAAd;YAAkB,KAAK,EAAEK,UAAzB;YAAqC,MAAM,EAAEC;UAA7C;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,SAPF;MAAA;QAAA;QAAA;QAAA;MAAA,SADF,eAcE;QACE,GAAG,EAAEG,QADP;QAEE,QAAQ,iBAAUT,EAAV,iBAFV;QAGE,YAAY,EAAE;UAAA,OAAMgB,WAAW,CAAC,IAAD,CAAjB;QAAA,CAHhB;QAIE,YAAY,EAAE;UAAA,OAAMA,WAAW,CAAC,KAAD,CAAjB;QAAA;MAJhB;QAAA;QAAA;QAAA;MAAA,SAdF,EAsBGL,gBAAgB,iBACf;QAAA,WAEGiC,gBAAgB,gBACf;UACE,SAAS,sBAAejB,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYtC,MAAM,CAACqB,gBAAgB,CAAC,CAAD,CAAjB,CAAlB,CAAf,yBACP6B,cAAc,GAAG,IAAH,GAAU,GADjB,SADX;UAAA,wBAKE;YAAA,wBACE,QAAC,MAAD;cAAQ,KAAK,EAAEjC,eAAf;cAAgC,CAAC,EAAEtC,eAAe,CAACqC,WAAD;YAAlD;cAAA;cAAA;cAAA;YAAA,SADF,eAEE,QAAC,YAAD;cAAc,CAAC,EAAEtC,qBAAqB;YAAtC;cAAA;cAAA;cAAA;YAAA,SAFF;UAAA;YAAA;YAAA;YAAA;UAAA,SALF,eAUE,QAAC,UAAD;YACE,SAAS,mCAA4BwE,cAAc,GAAG,GAAH,GAAS,IAAnD,SADX;YAEE,OAAO,EAAE3B,UAAU,IAAIE,QAFzB;YAAA,wBAIE,QAAC,iBAAD;cAAmB,CAAC,EAAC,GAArB;cAAyB,CAAC,EAAC,KAA3B;cAAiC,MAAM,EAAC,IAAxC;cAA6C,KAAK,EAAC,IAAnD;cAAwD,EAAE,EAAC;YAA3D;cAAA;cAAA;cAAA;YAAA,SAJF,eAKE,QAAC,OAAD;cAAS,SAAS,gBAAlB;cAAoC,CAAC,EAAC,IAAtC;cAA2C,gBAAgB,EAAC,QAA5D;cAAA,UACGb,eAAe,CAAC,GAAD,EAAMS,gBAAgB,CAAC,CAAD,CAAtB;YADlB;cAAA;cAAA;cAAA;YAAA,SALF;UAAA;YAAA;YAAA;YAAA;UAAA,SAVF;QAAA;UAAA;UAAA;UAAA;QAAA,SADe,GAqBb,IAvBN,EA0BGkC,gBAAgB,gBACf;UAAG,SAAS,sBAAevD,MAAM,CAACqB,gBAAgB,CAAC,CAAD,CAAjB,CAArB,yBAAyD8B,cAAc,GAAG,IAAH,GAAU,GAAjF,SAAZ;UAAA,wBACE;YAAA,wBACE,QAAC,MAAD;cAAQ,KAAK,EAAEjC,eAAf;cAAgC,CAAC,EAAEvC,eAAe,CAACqC,WAAD;YAAlD;cAAA;cAAA;cAAA;YAAA,SADF,eAEE,QAAC,YAAD;cAAc,CAAC,EAAEtC,qBAAqB;YAAtC;cAAA;cAAA;cAAA;YAAA,SAFF;UAAA;YAAA;YAAA;YAAA;UAAA,SADF,eAME,QAAC,UAAD;YACE,SAAS,mCAA4ByE,cAAc,GAAG,IAAH,GAAU,GAApD,SADX;YAEE,OAAO,EAAE5B,UAAU,IAAIE,QAFzB;YAAA,wBAIE,QAAC,iBAAD;cAAmB,CAAC,EAAC,GAArB;cAAyB,CAAC,EAAC,KAA3B;cAAiC,MAAM,EAAC,IAAxC;cAA6C,KAAK,EAAC,IAAnD;cAAwD,EAAE,EAAC;YAA3D;cAAA;cAAA;cAAA;YAAA,SAJF,eAKE,QAAC,OAAD;cAAS,CAAC,EAAC,IAAX;cAAgB,gBAAgB,EAAC,QAAjC;cAAA,UACGb,eAAe,CAAC,GAAD,EAAMS,gBAAgB,CAAC,CAAD,CAAtB;YADlB;cAAA;cAAA;cAAA;YAAA,SALF;UAAA;YAAA;YAAA;YAAA;UAAA,SANF;QAAA;UAAA;UAAA;UAAA;QAAA,SADe,GAiBb,IA3CN,EA6CG+B,aAAa,iBAAI,QAAC,eAAD;UAAiB,KAAK,EAAEnC;QAAxB;UAAA;UAAA;UAAA;QAAA,SA7CpB,EA+CGoC,aAAa,iBACZ;UAAG,SAAS,sBAAetC,UAAf,sBAAZ;UAAA,uBACE,QAAC,eAAD;YAAiB,KAAK,EAAEG;UAAxB;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,SAhDJ;MAAA,gBAvBJ;IAAA,gBADF;EAAA,CADY,EAiFZ,CACEN,eADF,EAEEM,eAFF,EAGEqC,gBAHF,EAIEJ,cAJF,EAKED,cALF,EAMEzB,QANF,EAOEf,EAPF,EAQEM,WARF,EASED,UATF,EAUEM,gBAVF,EAWEgC,aAXF,EAYE9B,UAZF,EAaE6B,aAbF,EAcEnC,eAdF,EAeEqC,gBAfF,EAgBEtD,MAhBF,CAjFY,CAAd;AAoGD,CAxNM;;GAAMS,K;UA+BiB7B,W;;;MA/BjB6B,K"},"metadata":{},"sourceType":"module"}