{"ast":null,"code":"import _toConsumableArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Applications/XAMPP/voxel-interface/src/components/LiveChart/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { Trans } from \"@lingui/react\";\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { isMobile } from 'react-device-detect';\nimport { Repeat } from 'react-feather';\nimport { Flex, Text } from 'rebass';\nimport styled from 'styled-components';\nimport DoubleCurrencyLogo from 'components/DoubleLogo';\nimport ProChartToggle from 'components/LiveChart/ProChartToggle';\nimport Loader from 'components/LocalLoader';\nimport ProLiveChart from 'components/TradingViewChart';\nimport { checkPairHasDextoolsData } from 'components/TradingViewChart/datafeed';\nimport { useActiveWeb3React } from 'hooks';\nimport useBasicChartData, { LiveDataTimeframeEnum } from 'hooks/useBasicChartData';\nimport useMixpanel, { MIXPANEL_TYPE } from 'hooks/useMixpanel';\nimport useTheme from 'hooks/useTheme';\nimport { Field } from 'state/swap/actions';\nimport { useShowProLiveChart, useToggleProLiveChart } from 'state/user/hooks';\nimport { useCurrencyConvertedToNative } from 'utils/dmm';\nimport AnimatingNumber from './AnimatingNumber';\nimport CircleInfoIcon from './CircleInfoIcon';\nimport LineChart from './LineChart';\nimport WarningIcon from './WarningIcon';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar LiveChartWrapper = styled.div.withConfig({\n  displayName: \"LiveChart__LiveChartWrapper\",\n  componentId: \"sc-dkl83u-0\"\n})([\"width:100%;height:100%;display:flex;flex-direction:column;\"]);\n_c = LiveChartWrapper;\nvar TimeFrameButton = styled.div.withConfig({\n  displayName: \"LiveChart__TimeFrameButton\",\n  componentId: \"sc-dkl83u-1\"\n})([\"cursor:pointer;width:26px;height:24px;border-radius:4px;line-height:24px;margin-right:5px;text-align:center;color:\", \";font-size:12px;font-weight:500;background-color:\", \";transition:all 0.2s ease;\", \"\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.subText;\n}, function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.buttonBlack;\n}, function (_ref3) {\n  var theme = _ref3.theme,\n      active = _ref3.active;\n  return active ? \"background-color: \".concat(theme.primary, \"; color: \").concat(theme.textReverse, \";\") : \"\\n    &:hover {\\n      background-color: \".concat(theme.buttonGray, \";\\n    }\\n  \");\n});\n_c2 = TimeFrameButton;\nvar SwitchButtonWrapper = styled.div.withConfig({\n  displayName: \"LiveChart__SwitchButtonWrapper\",\n  componentId: \"sc-dkl83u-2\"\n})([\"display:flex;width:24px;height:24px;border-radius:50%;cursor:pointer;align-items:center;justify-content:center;&:hover{background-color:\", \";}\"], function (_ref4) {\n  var theme = _ref4.theme;\n  return theme.buttonGray;\n});\n_c3 = SwitchButtonWrapper;\nvar ProLiveChartCustom = styled(ProLiveChart).withConfig({\n  displayName: \"LiveChart__ProLiveChartCustom\",\n  componentId: \"sc-dkl83u-3\"\n})([\"margin:\", \";display:\", \";background:\", \";\"], function () {\n  return isMobile ? '0' : '16px 0 0 0 !important';\n}, function (_ref5) {\n  var $isShowProChart = _ref5.$isShowProChart;\n  return $isShowProChart ? 'block' : 'none';\n}, function (_ref6) {\n  var theme = _ref6.theme;\n  return theme.darkMode ? theme.buttonBlack : theme.background;\n});\n_c4 = ProLiveChartCustom;\n\nvar getDifferentValues = function getDifferentValues(chartData, hoverValue) {\n  if (chartData && chartData.length > 0) {\n    var firstValue = chartData[0].value;\n    var lastValue = chartData[chartData.length - 1].value;\n    var differentValue = hoverValue !== null ? hoverValue - lastValue : lastValue - firstValue;\n    var compareValue = hoverValue !== null ? lastValue : firstValue;\n    return {\n      chartColor: lastValue - firstValue >= 0 ? '#f01d64' : '#FF537B',\n      different: differentValue.toPrecision(6),\n      differentPercent: compareValue === 0 ? 100 : (differentValue / compareValue * 100).toFixed(2)\n    };\n  }\n\n  return {\n    chartColor: '#f01d64',\n    different: 0,\n    differentPercent: 0\n  };\n};\n\nvar getTimeFrameText = function getTimeFrameText(timeFrame) {\n  switch (timeFrame) {\n    case LiveDataTimeframeEnum.HOUR:\n      return 'Past hour';\n\n    case LiveDataTimeframeEnum.FOUR_HOURS:\n      return 'Past 4 hours';\n\n    case LiveDataTimeframeEnum.DAY:\n      return 'Past 24 hours';\n\n    case LiveDataTimeframeEnum.WEEK:\n      return 'Past Week';\n\n    case LiveDataTimeframeEnum.MONTH:\n      return 'Past Month';\n\n    case LiveDataTimeframeEnum.SIX_MONTHS:\n      return 'Past 6 Months';\n  }\n};\n\nfunction LiveChart(_ref7) {\n  _s();\n\n  var _tokens$,\n      _tokens$2,\n      _tokens$3,\n      _chartData,\n      _this = this;\n\n  var currencies = _ref7.currencies,\n      onRotateClick = _ref7.onRotateClick;\n\n  var _useActiveWeb3React = useActiveWeb3React(),\n      chainId = _useActiveWeb3React.chainId;\n\n  var theme = useTheme();\n  var nativeInputCurrency = useCurrencyConvertedToNative(currencies[Field.INPUT] || undefined);\n  var nativeOutputCurrency = useCurrencyConvertedToNative(currencies[Field.OUTPUT] || undefined);\n  var tokens = useMemo(function () {\n    return [nativeInputCurrency, nativeOutputCurrency].map(function (currency) {\n      return currency === null || currency === void 0 ? void 0 : currency.wrapped;\n    });\n  }, [nativeInputCurrency, nativeOutputCurrency]);\n  var isWrappedToken = !!((_tokens$ = tokens[0]) !== null && _tokens$ !== void 0 && _tokens$.address) && ((_tokens$2 = tokens[0]) === null || _tokens$2 === void 0 ? void 0 : _tokens$2.address) === ((_tokens$3 = tokens[1]) === null || _tokens$3 === void 0 ? void 0 : _tokens$3.address);\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      hoverValue = _useState2[0],\n      setHoverValue = _useState2[1];\n\n  var _useState3 = useState(LiveDataTimeframeEnum.DAY),\n      _useState4 = _slicedToArray(_useState3, 2),\n      timeFrame = _useState4[0],\n      setTimeFrame = _useState4[1];\n\n  var _useState5 = useState({\n    hasProChart: false,\n    pairAddress: '',\n    apiVersion: '',\n    loading: true\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      stateProChart = _useState6[0],\n      setStateProChart = _useState6[1];\n\n  var _useBasicChartData = useBasicChartData(tokens, timeFrame),\n      chartData = _useBasicChartData.data,\n      basicChartError = _useBasicChartData.error,\n      basicChartLoading = _useBasicChartData.loading;\n\n  var isProchartError = !stateProChart.hasProChart && !stateProChart.loading;\n  var isBasicchartError = basicChartError && !basicChartLoading;\n  var bothChartError = isProchartError && isBasicchartError;\n  var showProChartStore = useShowProLiveChart();\n  var toggleProLiveChart = useToggleProLiveChart();\n\n  var _useMixpanel = useMixpanel(),\n      mixpanelHandler = _useMixpanel.mixpanelHandler;\n\n  useEffect(function () {\n    if (hoverValue !== null) {\n      setHoverValue(null);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [chartData]);\n  useEffect(function () {\n    if (!currencies.INPUT || !currencies.OUTPUT) return;\n    setStateProChart({\n      hasProChart: false,\n      pairAddress: '',\n      apiVersion: '',\n      loading: true\n    });\n    checkPairHasDextoolsData(currencies, chainId).then(function (res) {\n      if ((res.ver || res.ver === 0) && res.pairAddress) {\n        setStateProChart({\n          hasProChart: true,\n          pairAddress: res.pairAddress,\n          apiVersion: res.ver,\n          loading: false\n        });\n      } else {\n        setStateProChart({\n          hasProChart: false,\n          pairAddress: '',\n          apiVersion: '',\n          loading: false\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n      setStateProChart({\n        hasProChart: false,\n        pairAddress: '',\n        apiVersion: '',\n        loading: false\n      });\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [JSON.stringify(currencies)]);\n  var showingValue = hoverValue !== null && hoverValue !== void 0 ? hoverValue : ((_chartData = chartData[chartData.length - 1]) === null || _chartData === void 0 ? void 0 : _chartData.value) || 0;\n\n  var _getDifferentValues = getDifferentValues(chartData, hoverValue),\n      chartColor = _getDifferentValues.chartColor,\n      different = _getDifferentValues.different,\n      differentPercent = _getDifferentValues.differentPercent;\n\n  var _useState7 = useState(showProChartStore && !isProchartError),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isShowProChart = _useState8[0],\n      setIsShowProChart = _useState8[1];\n\n  useEffect(function () {\n    setIsShowProChart(showProChartStore && !isProchartError);\n    var timeout;\n\n    if (showProChartStore && stateProChart.loading) {\n      timeout = setTimeout(function () {\n        // Switch to Basic chart after loading over 5 seconds\n        toggleProLiveChart();\n      }, 5000);\n    }\n\n    return function () {\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n    };\n  }, [showProChartStore, isProchartError, stateProChart.loading, toggleProLiveChart]);\n\n  var renderTimeframes = function renderTimeframes() {\n    return /*#__PURE__*/_jsxDEV(Flex, {\n      marginTop: '5px',\n      children: _toConsumableArray(Object.values(LiveDataTimeframeEnum)).map(function (item) {\n        return /*#__PURE__*/_jsxDEV(TimeFrameButton, {\n          onClick: function onClick() {\n            return setTimeFrame(item);\n          },\n          active: timeFrame === item,\n          children: item\n        }, item, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var toggle = useMemo(function () {\n    return /*#__PURE__*/_jsxDEV(ProChartToggle, {\n      activeName: isShowProChart ? 'pro' : 'basic',\n      toggle: function toggle(name) {\n        if (!bothChartError) {\n          if (name !== (isShowProChart ? 'pro' : 'basic')) {\n            if (name === 'pro') {\n              mixpanelHandler(MIXPANEL_TYPE.PRO_CHART_CLICKED);\n            } else {\n              mixpanelHandler(MIXPANEL_TYPE.BASIC_CHART_CLICKED);\n            }\n\n            toggleProLiveChart();\n          }\n        }\n      },\n      buttons: [{\n        name: 'basic',\n        title: 'Basic',\n        disabled: isBasicchartError\n      }, {\n        name: 'pro',\n        title: 'Pro',\n        disabled: isProchartError\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, _this);\n  }, [isBasicchartError, isProchartError, isShowProChart, bothChartError, toggleProLiveChart, mixpanelHandler]);\n  var currenciesList = useMemo(function () {\n    return [currencies.INPUT, currencies.OUTPUT];\n  }, [currencies.INPUT, currencies.OUTPUT]);\n  return /*#__PURE__*/_jsxDEV(LiveChartWrapper, {\n    children: isWrappedToken ? /*#__PURE__*/_jsxDEV(Flex, {\n      minHeight: isMobile ? '380px' : '440px',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      color: theme.border,\n      style: {\n        gap: '16px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(CircleInfoIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        fontSize: 16,\n        textAlign: 'center',\n        children: /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"You can swap {0} for {1} (and vice versa)<0/>Exchange rate is always 1 to 1.\",\n          values: {\n            0: nativeInputCurrency === null || nativeInputCurrency === void 0 ? void 0 : nativeInputCurrency.symbol,\n            1: nativeOutputCurrency === null || nativeOutputCurrency === void 0 ? void 0 : nativeOutputCurrency.symbol\n          },\n          components: {\n            0: /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this)\n          }\n        }, void 0, false, void 0, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Flex, {\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        paddingY: \"4px\",\n        children: [/*#__PURE__*/_jsxDEV(Flex, {\n          flex: isMobile ? 2 : 1,\n          children: [/*#__PURE__*/_jsxDEV(DoubleCurrencyLogo, {\n            currency0: nativeInputCurrency,\n            currency1: nativeOutputCurrency,\n            size: 24,\n            margin: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Flex, {\n            alignItems: \"center\",\n            fontSize: isMobile ? 14 : 18,\n            color: theme.subText,\n            children: [/*#__PURE__*/_jsxDEV(Flex, {\n              alignItems: \"center\",\n              children: [/*#__PURE__*/_jsxDEV(Text, {\n                fontSize: isMobile ? 18 : 24,\n                fontWeight: 500,\n                color: theme.text,\n                children: nativeInputCurrency === null || nativeInputCurrency === void 0 ? void 0 : nativeInputCurrency.symbol\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                marginLeft: \"4px\",\n                style: {\n                  whiteSpace: 'nowrap'\n                },\n                children: [' / ', nativeOutputCurrency === null || nativeOutputCurrency === void 0 ? void 0 : nativeOutputCurrency.symbol]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(SwitchButtonWrapper, {\n              onClick: onRotateClick,\n              children: /*#__PURE__*/_jsxDEV(Repeat, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          flex: 1,\n          justifyContent: \"flex-end\",\n          children: toggle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ProLiveChartCustom, {\n        currencies: currenciesList,\n        stateProChart: stateProChart,\n        $isShowProChart: isShowProChart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }, this), !isShowProChart && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Flex, {\n          justifyContent: \"space-between\",\n          alignItems: \"flex-start\",\n          marginTop: \"12px\",\n          children: [/*#__PURE__*/_jsxDEV(Flex, {\n            flexDirection: \"column\",\n            alignItems: \"flex-start\",\n            children: [showingValue === 0 || basicChartError ? /*#__PURE__*/_jsxDEV(Text, {\n              fontSize: 28,\n              color: theme.subText,\n              children: \"--\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(AnimatingNumber, {\n              value: showingValue,\n              symbol: nativeOutputCurrency === null || nativeOutputCurrency === void 0 ? void 0 : nativeOutputCurrency.symbol,\n              fontSize: isMobile ? 24 : 28\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Flex, {\n              marginTop: \"2px\",\n              children: showingValue === 0 || basicChartError ? /*#__PURE__*/_jsxDEV(Text, {\n                fontSize: 12,\n                color: theme.disableText,\n                children: \"--\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: 12,\n                  color: different >= 0 ? '#f01d64' : '#FF537B',\n                  marginRight: \"5px\",\n                  children: [different, \" (\", differentPercent, \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 25\n                }, this), !hoverValue && /*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: 12,\n                  color: theme.disableText,\n                  children: getTimeFrameText(timeFrame)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 17\n          }, this), !isMobile && renderTimeframes()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 15\n        }, this), isMobile && !showProChartStore && renderTimeframes(), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1,\n            marginTop: '12px'\n          },\n          children: basicChartLoading || isBasicchartError ? /*#__PURE__*/_jsxDEV(Flex, {\n            minHeight: isMobile ? '300px' : '370px',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            color: theme.disableText,\n            style: {\n              gap: '16px'\n            },\n            children: basicChartLoading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 23\n            }, this) : isBasicchartError && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(WarningIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                fontSize: 16,\n                children: /*#__PURE__*/_jsxDEV(Trans, {\n                  id: \"Chart is unavailable right now\"\n                }, void 0, false, void 0, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(LineChart, {\n            data: chartData,\n            setHoverValue: setHoverValue,\n            color: chartColor,\n            timeFrame: timeFrame,\n            minHeight: 370\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 231,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LiveChart, \"nl1wI90qKCKu2YEiBk0EkWNvhAg=\", false, function () {\n  return [useActiveWeb3React, useTheme, useCurrencyConvertedToNative, useCurrencyConvertedToNative, useBasicChartData, useShowProLiveChart, useToggleProLiveChart, useMixpanel];\n});\n\n_c5 = LiveChart;\nexport default _c6 = /*#__PURE__*/React.memo(LiveChart);\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"LiveChartWrapper\");\n$RefreshReg$(_c2, \"TimeFrameButton\");\n$RefreshReg$(_c3, \"SwitchButtonWrapper\");\n$RefreshReg$(_c4, \"ProLiveChartCustom\");\n$RefreshReg$(_c5, \"LiveChart\");\n$RefreshReg$(_c6, \"%default%\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","isMobile","Repeat","Flex","Text","styled","DoubleCurrencyLogo","ProChartToggle","Loader","ProLiveChart","checkPairHasDextoolsData","useActiveWeb3React","useBasicChartData","LiveDataTimeframeEnum","useMixpanel","MIXPANEL_TYPE","useTheme","Field","useShowProLiveChart","useToggleProLiveChart","useCurrencyConvertedToNative","AnimatingNumber","CircleInfoIcon","LineChart","WarningIcon","LiveChartWrapper","div","TimeFrameButton","theme","subText","buttonBlack","active","primary","textReverse","buttonGray","SwitchButtonWrapper","ProLiveChartCustom","$isShowProChart","darkMode","background","getDifferentValues","chartData","hoverValue","length","firstValue","value","lastValue","differentValue","compareValue","chartColor","different","toPrecision","differentPercent","toFixed","getTimeFrameText","timeFrame","HOUR","FOUR_HOURS","DAY","WEEK","MONTH","SIX_MONTHS","LiveChart","currencies","onRotateClick","chainId","nativeInputCurrency","INPUT","undefined","nativeOutputCurrency","OUTPUT","tokens","map","currency","wrapped","isWrappedToken","address","setHoverValue","setTimeFrame","hasProChart","pairAddress","apiVersion","loading","stateProChart","setStateProChart","data","basicChartError","error","basicChartLoading","isProchartError","isBasicchartError","bothChartError","showProChartStore","toggleProLiveChart","mixpanelHandler","then","res","ver","catch","console","log","JSON","stringify","showingValue","isShowProChart","setIsShowProChart","timeout","setTimeout","clearTimeout","renderTimeframes","Object","values","item","toggle","name","PRO_CHART_CLICKED","BASIC_CHART_CLICKED","title","disabled","currenciesList","border","gap","symbol","text","whiteSpace","disableText","flex","marginTop","memo"],"sources":["/Applications/XAMPP/voxel-interface/src/components/LiveChart/index.tsx"],"sourcesContent":["import { Currency } from '@kyberswap/ks-sdk-core'\nimport { Trans } from '@lingui/macro'\nimport React, { useEffect, useMemo, useState } from 'react'\nimport { isMobile } from 'react-device-detect'\nimport { Repeat } from 'react-feather'\nimport { Flex, Text } from 'rebass'\nimport styled from 'styled-components'\n\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\nimport ProChartToggle from 'components/LiveChart/ProChartToggle'\nimport Loader from 'components/LocalLoader'\nimport ProLiveChart from 'components/TradingViewChart'\nimport { checkPairHasDextoolsData } from 'components/TradingViewChart/datafeed'\nimport { useActiveWeb3React } from 'hooks'\nimport useBasicChartData, { LiveDataTimeframeEnum } from 'hooks/useBasicChartData'\nimport useMixpanel, { MIXPANEL_TYPE } from 'hooks/useMixpanel'\nimport useTheme from 'hooks/useTheme'\nimport { Field } from 'state/swap/actions'\nimport { useShowProLiveChart, useToggleProLiveChart } from 'state/user/hooks'\nimport { useCurrencyConvertedToNative } from 'utils/dmm'\n\nimport AnimatingNumber from './AnimatingNumber'\nimport CircleInfoIcon from './CircleInfoIcon'\nimport LineChart from './LineChart'\nimport WarningIcon from './WarningIcon'\n\nconst LiveChartWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n`\nconst TimeFrameButton = styled.div<{ active?: boolean }>`\n  cursor: pointer;\n  width: 26px;\n  height: 24px;\n  border-radius: 4px;\n  line-height: 24px;\n  margin-right: 5px;\n  text-align: center;\n  color: ${({ theme }) => theme.subText};\n  font-size: 12px;\n  font-weight: 500;\n  background-color: ${({ theme }) => theme.buttonBlack};\n  transition: all 0.2s ease;\n  ${({ theme, active }) =>\n    active\n      ? `background-color: ${theme.primary}; color: ${theme.textReverse};`\n      : `\n    &:hover {\n      background-color: ${theme.buttonGray};\n    }\n  `}\n`\n\nconst SwitchButtonWrapper = styled.div`\n  display: flex;\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  cursor: pointer;\n  align-items: center;\n  justify-content: center;\n  &:hover {\n    background-color: ${({ theme }) => theme.buttonGray};\n  }\n`\n\nconst ProLiveChartCustom = styled(ProLiveChart)<{ $isShowProChart: boolean }>`\n  margin: ${() => (isMobile ? '0' : '16px 0 0 0 !important')};\n  display: ${({ $isShowProChart }) => ($isShowProChart ? 'block' : 'none')};\n  background: ${({ theme }) => (theme.darkMode ? theme.buttonBlack : theme.background)};\n`\n\nconst getDifferentValues = (chartData: any, hoverValue: number | null) => {\n  if (chartData && chartData.length > 0) {\n    const firstValue = chartData[0].value\n    const lastValue = chartData[chartData.length - 1].value\n    const differentValue = hoverValue !== null ? hoverValue - lastValue : lastValue - firstValue\n    const compareValue = hoverValue !== null ? lastValue : firstValue\n    return {\n      chartColor: lastValue - firstValue >= 0 ? '#f01d64' : '#FF537B',\n      different: differentValue.toPrecision(6),\n      differentPercent: compareValue === 0 ? 100 : ((differentValue / compareValue) * 100).toFixed(2),\n    }\n  }\n  return {\n    chartColor: '#f01d64',\n    different: 0,\n    differentPercent: 0,\n  }\n}\n\nconst getTimeFrameText = (timeFrame: LiveDataTimeframeEnum) => {\n  switch (timeFrame) {\n    case LiveDataTimeframeEnum.HOUR:\n      return 'Past hour'\n    case LiveDataTimeframeEnum.FOUR_HOURS:\n      return 'Past 4 hours'\n    case LiveDataTimeframeEnum.DAY:\n      return 'Past 24 hours'\n    case LiveDataTimeframeEnum.WEEK:\n      return 'Past Week'\n    case LiveDataTimeframeEnum.MONTH:\n      return 'Past Month'\n    case LiveDataTimeframeEnum.SIX_MONTHS:\n      return 'Past 6 Months'\n  }\n}\n\nfunction LiveChart({\n  currencies,\n  onRotateClick,\n}: {\n  currencies: { [field in Field]?: Currency }\n  onRotateClick?: () => void\n}) {\n  const { chainId } = useActiveWeb3React()\n  const theme = useTheme()\n  const nativeInputCurrency = useCurrencyConvertedToNative(currencies[Field.INPUT] || undefined)\n  const nativeOutputCurrency = useCurrencyConvertedToNative(currencies[Field.OUTPUT] || undefined)\n  const tokens = useMemo(() => {\n    return [nativeInputCurrency, nativeOutputCurrency].map(currency => currency?.wrapped)\n  }, [nativeInputCurrency, nativeOutputCurrency])\n\n  const isWrappedToken = !!tokens[0]?.address && tokens[0]?.address === tokens[1]?.address\n  const [hoverValue, setHoverValue] = useState<number | null>(null)\n  const [timeFrame, setTimeFrame] = useState<LiveDataTimeframeEnum>(LiveDataTimeframeEnum.DAY)\n  const [stateProChart, setStateProChart] = useState({\n    hasProChart: false,\n    pairAddress: '',\n    apiVersion: '',\n    loading: true,\n  })\n  const { data: chartData, error: basicChartError, loading: basicChartLoading } = useBasicChartData(tokens, timeFrame)\n  const isProchartError = !stateProChart.hasProChart && !stateProChart.loading\n  const isBasicchartError = basicChartError && !basicChartLoading\n  const bothChartError = isProchartError && isBasicchartError\n  const showProChartStore = useShowProLiveChart()\n  const toggleProLiveChart = useToggleProLiveChart()\n  const { mixpanelHandler } = useMixpanel()\n\n  useEffect(() => {\n    if (hoverValue !== null) {\n      setHoverValue(null)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [chartData])\n\n  useEffect(() => {\n    if (!currencies.INPUT || !currencies.OUTPUT) return\n    setStateProChart({ hasProChart: false, pairAddress: '', apiVersion: '', loading: true })\n    checkPairHasDextoolsData(currencies, chainId)\n      .then((res: any) => {\n        if ((res.ver || res.ver === 0) && res.pairAddress) {\n          setStateProChart({ hasProChart: true, pairAddress: res.pairAddress, apiVersion: res.ver, loading: false })\n        } else {\n          setStateProChart({ hasProChart: false, pairAddress: '', apiVersion: '', loading: false })\n        }\n      })\n      .catch(error => {\n        console.log(error)\n        setStateProChart({ hasProChart: false, pairAddress: '', apiVersion: '', loading: false })\n      })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [JSON.stringify(currencies)])\n\n  const showingValue = hoverValue ?? (chartData[chartData.length - 1]?.value || 0)\n\n  const { chartColor, different, differentPercent } = getDifferentValues(chartData, hoverValue)\n\n  const [isShowProChart, setIsShowProChart] = useState(showProChartStore && !isProchartError)\n\n  useEffect(() => {\n    setIsShowProChart(showProChartStore && !isProchartError)\n    let timeout: NodeJS.Timeout\n    if (showProChartStore && stateProChart.loading) {\n      timeout = setTimeout(() => {\n        // Switch to Basic chart after loading over 5 seconds\n        toggleProLiveChart()\n      }, 5000)\n    }\n    return () => {\n      if (timeout) {\n        clearTimeout(timeout)\n      }\n    }\n  }, [showProChartStore, isProchartError, stateProChart.loading, toggleProLiveChart])\n\n  const renderTimeframes = () => {\n    return (\n      <Flex marginTop={'5px'}>\n        {[...Object.values(LiveDataTimeframeEnum)].map(item => {\n          return (\n            <TimeFrameButton key={item} onClick={() => setTimeFrame(item)} active={timeFrame === item}>\n              {item}\n            </TimeFrameButton>\n          )\n        })}\n      </Flex>\n    )\n  }\n\n  const toggle = useMemo(() => {\n    return (\n      <ProChartToggle\n        activeName={isShowProChart ? 'pro' : 'basic'}\n        toggle={(name: string) => {\n          if (!bothChartError) {\n            if (name !== (isShowProChart ? 'pro' : 'basic')) {\n              if (name === 'pro') {\n                mixpanelHandler(MIXPANEL_TYPE.PRO_CHART_CLICKED)\n              } else {\n                mixpanelHandler(MIXPANEL_TYPE.BASIC_CHART_CLICKED)\n              }\n              toggleProLiveChart()\n            }\n          }\n        }}\n        buttons={[\n          { name: 'basic', title: 'Basic', disabled: isBasicchartError },\n          { name: 'pro', title: 'Pro', disabled: isProchartError },\n        ]}\n      />\n    )\n  }, [isBasicchartError, isProchartError, isShowProChart, bothChartError, toggleProLiveChart, mixpanelHandler])\n\n  const currenciesList = useMemo(() => [currencies.INPUT, currencies.OUTPUT], [currencies.INPUT, currencies.OUTPUT])\n\n  return (\n    <LiveChartWrapper>\n      {isWrappedToken ? (\n        <Flex\n          minHeight={isMobile ? '380px' : '440px'}\n          flexDirection={'column'}\n          alignItems={'center'}\n          justifyContent={'center'}\n          color={theme.border}\n          style={{ gap: '16px' }}\n        >\n          <CircleInfoIcon />\n          <Text fontSize={16} textAlign={'center'}>\n            <Trans>\n              You can swap {nativeInputCurrency?.symbol} for {nativeOutputCurrency?.symbol} (and vice versa)\n              <br />\n              Exchange rate is always 1 to 1.\n            </Trans>\n          </Text>\n        </Flex>\n      ) : (\n        <>\n          <Flex justifyContent=\"space-between\" alignItems=\"center\" paddingY=\"4px\">\n            <Flex flex={isMobile ? 2 : 1}>\n              <DoubleCurrencyLogo\n                currency0={nativeInputCurrency}\n                currency1={nativeOutputCurrency}\n                size={24}\n                margin={true}\n              />\n              <Flex alignItems=\"center\" fontSize={isMobile ? 14 : 18} color={theme.subText}>\n                <Flex alignItems=\"center\">\n                  <Text fontSize={isMobile ? 18 : 24} fontWeight={500} color={theme.text}>\n                    {nativeInputCurrency?.symbol}\n                  </Text>\n                  <Text marginLeft=\"4px\" style={{ whiteSpace: 'nowrap' }}>\n                    {' / '}\n                    {nativeOutputCurrency?.symbol}\n                  </Text>\n                </Flex>\n                <SwitchButtonWrapper onClick={onRotateClick}>\n                  <Repeat size={14} />\n                </SwitchButtonWrapper>\n              </Flex>\n            </Flex>\n            <Flex flex={1} justifyContent=\"flex-end\">\n              {toggle}\n            </Flex>\n          </Flex>\n\n          <ProLiveChartCustom\n            currencies={currenciesList}\n            stateProChart={stateProChart}\n            $isShowProChart={isShowProChart}\n          />\n          {!isShowProChart && (\n            <>\n              <Flex justifyContent=\"space-between\" alignItems=\"flex-start\" marginTop=\"12px\">\n                <Flex flexDirection=\"column\" alignItems=\"flex-start\">\n                  {showingValue === 0 || basicChartError ? (\n                    <Text fontSize={28} color={theme.subText}>\n                      --\n                    </Text>\n                  ) : (\n                    <AnimatingNumber\n                      value={showingValue}\n                      symbol={nativeOutputCurrency?.symbol}\n                      fontSize={isMobile ? 24 : 28}\n                    />\n                  )}\n                  <Flex marginTop=\"2px\">\n                    {showingValue === 0 || basicChartError ? (\n                      <Text fontSize={12} color={theme.disableText}>\n                        --\n                      </Text>\n                    ) : (\n                      <>\n                        <Text fontSize={12} color={different >= 0 ? '#f01d64' : '#FF537B'} marginRight=\"5px\">\n                          {different} ({differentPercent}%)\n                        </Text>\n                        {!hoverValue && (\n                          <Text fontSize={12} color={theme.disableText}>\n                            {getTimeFrameText(timeFrame)}\n                          </Text>\n                        )}\n                      </>\n                    )}\n                  </Flex>\n                </Flex>\n                {!isMobile && renderTimeframes()}\n              </Flex>\n              {isMobile && !showProChartStore && renderTimeframes()}\n              <div style={{ flex: 1, marginTop: '12px' }}>\n                {basicChartLoading || isBasicchartError ? (\n                  <Flex\n                    minHeight={isMobile ? '300px' : '370px'}\n                    flexDirection={'column'}\n                    alignItems={'center'}\n                    justifyContent={'center'}\n                    color={theme.disableText}\n                    style={{ gap: '16px' }}\n                  >\n                    {basicChartLoading ? (\n                      <Loader />\n                    ) : (\n                      isBasicchartError && (\n                        <>\n                          <WarningIcon />\n                          <Text fontSize={16}>\n                            <Trans>Chart is unavailable right now</Trans>\n                          </Text>\n                        </>\n                      )\n                    )}\n                  </Flex>\n                ) : (\n                  <LineChart\n                    data={chartData}\n                    setHoverValue={setHoverValue}\n                    color={chartColor}\n                    timeFrame={timeFrame}\n                    minHeight={370}\n                  />\n                )}\n              </div>\n            </>\n          )}\n        </>\n      )}\n    </LiveChartWrapper>\n  )\n}\n\nexport default React.memo(LiveChart)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}