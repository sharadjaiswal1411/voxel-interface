{"ast":null,"code":"import _objectSpread from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _defineProperty from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\n\nvar _initialState;\n\nimport { createReducer } from '@reduxjs/toolkit';\nimport { parse } from 'qs';\nimport { Field, chooseToSaveGas, replaceSwapState, resetSelectCurrency, selectCurrency, setFeeConfig, setRecipient, setTrade, setTrendingSoonShowed, switchCurrencies, switchCurrenciesV2, typeInput } from './actions';\nvar search = window.location.search;\n\nvar _parse = parse(search.indexOf('?') === 0 ? search.substring(1) : search),\n    inputCurrency = _parse.inputCurrency,\n    outputCurrency = _parse.outputCurrency;\n\nvar initialState = (_initialState = {\n  independentField: Field.INPUT,\n  typedValue: ''\n}, _defineProperty(_initialState, Field.INPUT, {\n  currencyId: (inputCurrency === null || inputCurrency === void 0 ? void 0 : inputCurrency.toString()) || ''\n}), _defineProperty(_initialState, Field.OUTPUT, {\n  currencyId: (outputCurrency === null || outputCurrency === void 0 ? void 0 : outputCurrency.toString()) || ''\n}), _defineProperty(_initialState, \"recipient\", null), _defineProperty(_initialState, \"saveGas\", false), _defineProperty(_initialState, \"feeConfig\", undefined), _defineProperty(_initialState, \"trendingSoonShowed\", false), _defineProperty(_initialState, \"trade\", undefined), _initialState);\nexport default createReducer(initialState, function (builder) {\n  return builder.addCase(replaceSwapState, function (state, _ref) {\n    var _ref2;\n\n    var _ref$payload = _ref.payload,\n        typedValue = _ref$payload.typedValue,\n        recipient = _ref$payload.recipient,\n        field = _ref$payload.field,\n        inputCurrencyId = _ref$payload.inputCurrencyId,\n        outputCurrencyId = _ref$payload.outputCurrencyId,\n        feeConfig = _ref$payload.feeConfig;\n    return _ref2 = {}, _defineProperty(_ref2, Field.INPUT, {\n      currencyId: inputCurrencyId\n    }), _defineProperty(_ref2, Field.OUTPUT, {\n      currencyId: outputCurrencyId\n    }), _defineProperty(_ref2, \"independentField\", field), _defineProperty(_ref2, \"typedValue\", typedValue || state.typedValue || '1'), _defineProperty(_ref2, \"recipient\", recipient), _defineProperty(_ref2, \"saveGas\", state.saveGas), _defineProperty(_ref2, \"feeConfig\", feeConfig), _defineProperty(_ref2, \"trendingSoonShowed\", state.trendingSoonShowed), _defineProperty(_ref2, \"trade\", state.trade), _ref2;\n  }).addCase(selectCurrency, function (state, _ref3) {\n    var _ref3$payload = _ref3.payload,\n        currencyId = _ref3$payload.currencyId,\n        field = _ref3$payload.field;\n    var otherField = field === Field.INPUT ? Field.OUTPUT : Field.INPUT;\n\n    if (currencyId === state[otherField].currencyId) {\n      var _objectSpread2;\n\n      // the case where we have to swap the order\n      return _objectSpread(_objectSpread({}, state), {}, (_objectSpread2 = {\n        typedValue: '',\n        independentField: state.independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT\n      }, _defineProperty(_objectSpread2, field, {\n        currencyId: currencyId\n      }), _defineProperty(_objectSpread2, otherField, {\n        currencyId: state[field].currencyId\n      }), _objectSpread2));\n    } else {\n      // the normal case\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, field, {\n        currencyId: currencyId\n      }));\n    }\n  }).addCase(resetSelectCurrency, function (state, _ref4) {\n    var field = _ref4.payload.field;\n    return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, field, {\n      currencyId: ''\n    }));\n  }).addCase(switchCurrencies, function (state) {\n    var _objectSpread5;\n\n    return _objectSpread(_objectSpread({}, state), {}, (_objectSpread5 = {\n      independentField: state.independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT\n    }, _defineProperty(_objectSpread5, Field.INPUT, {\n      currencyId: state[Field.OUTPUT].currencyId\n    }), _defineProperty(_objectSpread5, Field.OUTPUT, {\n      currencyId: state[Field.INPUT].currencyId\n    }), _objectSpread5));\n  }).addCase(switchCurrenciesV2, function (state) {\n    var _objectSpread6;\n\n    return _objectSpread(_objectSpread({}, state), {}, (_objectSpread6 = {\n      // independentField: state.independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT,\n      independentField: Field.INPUT\n    }, _defineProperty(_objectSpread6, Field.INPUT, {\n      currencyId: state[Field.OUTPUT].currencyId\n    }), _defineProperty(_objectSpread6, Field.OUTPUT, {\n      currencyId: state[Field.INPUT].currencyId\n    }), _objectSpread6));\n  }).addCase(typeInput, function (state, _ref5) {\n    var _ref5$payload = _ref5.payload,\n        field = _ref5$payload.field,\n        typedValue = _ref5$payload.typedValue;\n    return _objectSpread(_objectSpread({}, state), {}, {\n      independentField: field,\n      typedValue: typedValue\n    });\n  }).addCase(setRecipient, function (state, _ref6) {\n    var recipient = _ref6.payload.recipient;\n    state.recipient = recipient;\n  }).addCase(chooseToSaveGas, function (state, _ref7) {\n    var saveGas = _ref7.payload.saveGas;\n    state.saveGas = saveGas;\n  }).addCase(setFeeConfig, function (state, _ref8) {\n    var feeConfig = _ref8.payload.feeConfig;\n    state.feeConfig = feeConfig;\n  }).addCase(setTrendingSoonShowed, function (state) {\n    state.trendingSoonShowed = true;\n  }).addCase(setTrade, function (state, _ref9) {\n    var trade = _ref9.payload.trade;\n    state.trade = trade;\n  });\n});","map":{"version":3,"names":["createReducer","parse","Field","chooseToSaveGas","replaceSwapState","resetSelectCurrency","selectCurrency","setFeeConfig","setRecipient","setTrade","setTrendingSoonShowed","switchCurrencies","switchCurrenciesV2","typeInput","search","window","location","indexOf","substring","inputCurrency","outputCurrency","initialState","independentField","INPUT","typedValue","currencyId","toString","OUTPUT","undefined","builder","addCase","state","payload","recipient","field","inputCurrencyId","outputCurrencyId","feeConfig","saveGas","trendingSoonShowed","trade","otherField"],"sources":["/Applications/XAMPP/voxel-interface/src/state/swap/reducer.ts"],"sourcesContent":["import { createReducer } from '@reduxjs/toolkit'\nimport { parse } from 'qs'\n\nimport { FeeConfig } from 'hooks/useSwapV2Callback'\nimport { Aggregator } from 'utils/aggregator'\n\nimport {\n  Field,\n  chooseToSaveGas,\n  replaceSwapState,\n  resetSelectCurrency,\n  selectCurrency,\n  setFeeConfig,\n  setRecipient,\n  setTrade,\n  setTrendingSoonShowed,\n  switchCurrencies,\n  switchCurrenciesV2,\n  typeInput,\n} from './actions'\n\nexport interface SwapState {\n  readonly independentField: Field\n  readonly typedValue: string\n  readonly [Field.INPUT]: {\n    readonly currencyId: string | undefined\n  }\n  readonly [Field.OUTPUT]: {\n    readonly currencyId: string | undefined\n  }\n  // the typed recipient address or ENS name, or null if swap should go to sender\n  readonly recipient: string | null\n  readonly saveGas: boolean\n  readonly feeConfig: FeeConfig | undefined\n  readonly trendingSoonShowed?: boolean\n  readonly trade?: Aggregator\n}\n\nconst { search } = window.location\nconst { inputCurrency, outputCurrency } = parse(search.indexOf('?') === 0 ? search.substring(1) : search)\n\nconst initialState: SwapState = {\n  independentField: Field.INPUT,\n  typedValue: '',\n  [Field.INPUT]: {\n    currencyId: inputCurrency?.toString() || '',\n  },\n  [Field.OUTPUT]: {\n    currencyId: outputCurrency?.toString() || '',\n  },\n  recipient: null,\n  saveGas: false,\n  feeConfig: undefined,\n  // Flag to only show animation of trending soon banner 1 time\n  trendingSoonShowed: false,\n  trade: undefined,\n}\n\nexport default createReducer<SwapState>(initialState, builder =>\n  builder\n    .addCase(\n      replaceSwapState,\n      (state, { payload: { typedValue, recipient, field, inputCurrencyId, outputCurrencyId, feeConfig } }) => {\n        return {\n          [Field.INPUT]: {\n            currencyId: inputCurrencyId,\n          },\n          [Field.OUTPUT]: {\n            currencyId: outputCurrencyId,\n          },\n          independentField: field,\n          typedValue: typedValue || state.typedValue || '1',\n          recipient,\n          saveGas: state.saveGas,\n          feeConfig,\n          trendingSoonShowed: state.trendingSoonShowed,\n          trade: state.trade,\n        }\n      },\n    )\n    .addCase(selectCurrency, (state, { payload: { currencyId, field } }) => {\n      const otherField = field === Field.INPUT ? Field.OUTPUT : Field.INPUT\n      if (currencyId === state[otherField].currencyId) {\n        // the case where we have to swap the order\n        return {\n          ...state,\n          typedValue: '',\n          independentField: state.independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT,\n          [field]: { currencyId },\n          [otherField]: { currencyId: state[field].currencyId },\n        }\n      } else {\n        // the normal case\n        return {\n          ...state,\n          [field]: { currencyId },\n        }\n      }\n    })\n    .addCase(resetSelectCurrency, (state, { payload: { field } }) => {\n      return {\n        ...state,\n        [field]: { currencyId: '' },\n      }\n    })\n    .addCase(switchCurrencies, state => {\n      return {\n        ...state,\n        independentField: state.independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT,\n        [Field.INPUT]: { currencyId: state[Field.OUTPUT].currencyId },\n        [Field.OUTPUT]: { currencyId: state[Field.INPUT].currencyId },\n      }\n    })\n    .addCase(switchCurrenciesV2, state => {\n      return {\n        ...state,\n        // independentField: state.independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT,\n        independentField: Field.INPUT,\n        // typedValue: '',\n        [Field.INPUT]: { currencyId: state[Field.OUTPUT].currencyId },\n        [Field.OUTPUT]: { currencyId: state[Field.INPUT].currencyId },\n      }\n    })\n    .addCase(typeInput, (state, { payload: { field, typedValue } }) => {\n      return {\n        ...state,\n        independentField: field,\n        typedValue,\n      }\n    })\n    .addCase(setRecipient, (state, { payload: { recipient } }) => {\n      state.recipient = recipient\n    })\n    .addCase(chooseToSaveGas, (state, { payload: { saveGas } }) => {\n      state.saveGas = saveGas\n    })\n    .addCase(setFeeConfig, (state, { payload: { feeConfig } }) => {\n      state.feeConfig = feeConfig\n    })\n    .addCase(setTrendingSoonShowed, state => {\n      state.trendingSoonShowed = true\n    })\n    .addCase(setTrade, (state, { payload: { trade } }) => {\n      state.trade = trade\n    }),\n)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}