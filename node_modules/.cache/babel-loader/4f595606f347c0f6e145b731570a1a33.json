{"ast":null,"code":"import _regeneratorRuntime from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _s = $RefreshSig$();\n\nimport { BigNumber } from '@ethersproject/bignumber';\nimport { useCallback, useEffect, useState } from 'react';\nimport { useActiveWeb3React } from 'hooks';\nimport { useBlockNumber } from 'state/application/hooks';\nimport { useFairLaunchContract } from './useContract';\n\nvar useStakedBalance = function useStakedBalance(contractAddress, pid) {\n  _s();\n\n  var decimals = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 18;\n\n  // SLP is usually 18, KMP is 6\n  var _useState = useState({\n    value: BigNumber.from(0),\n    decimals: 18\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      balance = _useState2[0],\n      setBalance = _useState2[1];\n\n  var _useActiveWeb3React = useActiveWeb3React(),\n      account = _useActiveWeb3React.account;\n\n  var currentBlockNumber = useBlockNumber();\n  var fairLaunchContract = useFairLaunchContract(contractAddress);\n  var fetchBalance = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var getStaked, balance;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            getStaked = /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(pid, owner) {\n                var _yield$fairLaunchCont, amount;\n\n                return _regeneratorRuntime().wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.prev = 0;\n                        _context.next = 3;\n                        return fairLaunchContract === null || fairLaunchContract === void 0 ? void 0 : fairLaunchContract.getUserInfo(pid, owner);\n\n                      case 3:\n                        _yield$fairLaunchCont = _context.sent;\n                        amount = _yield$fairLaunchCont.amount;\n                        return _context.abrupt(\"return\", {\n                          value: BigNumber.from(amount),\n                          decimals: decimals\n                        });\n\n                      case 8:\n                        _context.prev = 8;\n                        _context.t0 = _context[\"catch\"](0);\n                        return _context.abrupt(\"return\", {\n                          value: BigNumber.from(0),\n                          decimals: decimals\n                        });\n\n                      case 11:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee, null, [[0, 8]]);\n              }));\n\n              return function getStaked(_x, _x2) {\n                return _ref2.apply(this, arguments);\n              };\n            }();\n\n            _context2.next = 3;\n            return getStaked(pid, account);\n\n          case 3:\n            balance = _context2.sent;\n            setBalance(balance);\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), [account, decimals, fairLaunchContract, pid]);\n  useEffect(function () {\n    if (account && fairLaunchContract) {\n      fetchBalance();\n    }\n  }, [account, setBalance, currentBlockNumber, fetchBalance, fairLaunchContract]);\n  return balance;\n};\n\n_s(useStakedBalance, \"F/gi9b5HFJbCopJTdJTLGHS18Iw=\", false, function () {\n  return [useActiveWeb3React, useBlockNumber, useFairLaunchContract];\n});\n\nexport default useStakedBalance;","map":{"version":3,"names":["BigNumber","useCallback","useEffect","useState","useActiveWeb3React","useBlockNumber","useFairLaunchContract","useStakedBalance","contractAddress","pid","decimals","value","from","balance","setBalance","account","currentBlockNumber","fairLaunchContract","fetchBalance","getStaked","owner","getUserInfo","amount"],"sources":["/Applications/XAMPP/voxel-interface/src/hooks/useStakedBalance.ts"],"sourcesContent":["import { BigNumber } from '@ethersproject/bignumber'\nimport { useCallback, useEffect, useState } from 'react'\n\nimport { useActiveWeb3React } from 'hooks'\nimport { useBlockNumber } from 'state/application/hooks'\n\nimport { useFairLaunchContract } from './useContract'\n\nexport interface BalanceProps {\n  value: BigNumber\n  decimals: number\n}\n\nconst useStakedBalance = (contractAddress: string, pid: number, decimals = 18) => {\n  // SLP is usually 18, KMP is 6\n  const [balance, setBalance] = useState<BalanceProps>({ value: BigNumber.from(0), decimals: 18 })\n  const { account } = useActiveWeb3React()\n  const currentBlockNumber = useBlockNumber()\n  const fairLaunchContract = useFairLaunchContract(contractAddress)\n\n  const fetchBalance = useCallback(async () => {\n    const getStaked = async (pid: number, owner: string | null | undefined): Promise<BalanceProps> => {\n      try {\n        const { amount } = await fairLaunchContract?.getUserInfo(pid, owner)\n        return { value: BigNumber.from(amount), decimals: decimals }\n      } catch (e) {\n        return { value: BigNumber.from(0), decimals: decimals }\n      }\n    }\n    const balance = await getStaked(pid, account)\n    setBalance(balance)\n  }, [account, decimals, fairLaunchContract, pid])\n\n  useEffect(() => {\n    if (account && fairLaunchContract) {\n      fetchBalance()\n    }\n  }, [account, setBalance, currentBlockNumber, fetchBalance, fairLaunchContract])\n\n  return balance\n}\n\nexport default useStakedBalance\n"],"mappings":";;;;;;AAAA,SAASA,SAAT,QAA0B,0BAA1B;AACA,SAASC,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AAEA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,cAAT,QAA+B,yBAA/B;AAEA,SAASC,qBAAT,QAAsC,eAAtC;;AAOA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,eAAD,EAA0BC,GAA1B,EAAyD;EAAA;;EAAA,IAAlBC,QAAkB,uEAAP,EAAO;;EAChF;EACA,gBAA8BP,QAAQ,CAAe;IAAEQ,KAAK,EAAEX,SAAS,CAACY,IAAV,CAAe,CAAf,CAAT;IAA4BF,QAAQ,EAAE;EAAtC,CAAf,CAAtC;EAAA;EAAA,IAAOG,OAAP;EAAA,IAAgBC,UAAhB;;EACA,0BAAoBV,kBAAkB,EAAtC;EAAA,IAAQW,OAAR,uBAAQA,OAAR;;EACA,IAAMC,kBAAkB,GAAGX,cAAc,EAAzC;EACA,IAAMY,kBAAkB,GAAGX,qBAAqB,CAACE,eAAD,CAAhD;EAEA,IAAMU,YAAY,GAAGjB,WAAW,0EAAC;IAAA;IAAA;MAAA;QAAA;UAAA;YACzBkB,SADyB;cAAA,uEACb,iBAAOV,GAAP,EAAoBW,KAApB;gBAAA;;gBAAA;kBAAA;oBAAA;sBAAA;wBAAA;wBAAA;wBAAA,OAEWH,kBAFX,aAEWA,kBAFX,uBAEWA,kBAAkB,CAAEI,WAApB,CAAgCZ,GAAhC,EAAqCW,KAArC,CAFX;;sBAAA;wBAAA;wBAENE,MAFM,yBAENA,MAFM;wBAAA,iCAGP;0BAAEX,KAAK,EAAEX,SAAS,CAACY,IAAV,CAAeU,MAAf,CAAT;0BAAiCZ,QAAQ,EAAEA;wBAA3C,CAHO;;sBAAA;wBAAA;wBAAA;wBAAA,iCAKP;0BAAEC,KAAK,EAAEX,SAAS,CAACY,IAAV,CAAe,CAAf,CAAT;0BAA4BF,QAAQ,EAAEA;wBAAtC,CALO;;sBAAA;sBAAA;wBAAA;oBAAA;kBAAA;gBAAA;cAAA,CADa;;cAAA,gBACzBS,SADyB;gBAAA;cAAA;YAAA;;YAAA;YAAA,OASTA,SAAS,CAACV,GAAD,EAAMM,OAAN,CATA;;UAAA;YASzBF,OATyB;YAU/BC,UAAU,CAACD,OAAD,CAAV;;UAV+B;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAD,IAW7B,CAACE,OAAD,EAAUL,QAAV,EAAoBO,kBAApB,EAAwCR,GAAxC,CAX6B,CAAhC;EAaAP,SAAS,CAAC,YAAM;IACd,IAAIa,OAAO,IAAIE,kBAAf,EAAmC;MACjCC,YAAY;IACb;EACF,CAJQ,EAIN,CAACH,OAAD,EAAUD,UAAV,EAAsBE,kBAAtB,EAA0CE,YAA1C,EAAwDD,kBAAxD,CAJM,CAAT;EAMA,OAAOJ,OAAP;AACD,CA3BD;;GAAMN,gB;UAGgBH,kB,EACOC,c,EACAC,qB;;;AAwB7B,eAAeC,gBAAf"},"metadata":{},"sourceType":"module"}