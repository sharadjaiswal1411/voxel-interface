{"ast":null,"code":"import _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _taggedTemplateLiteral from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\n\nvar _jsxFileName = \"/Applications/XAMPP/voxel-interface/src/pages/ProAmmPool/PositionListItem.tsx\",\n    _templateObject,\n    _s = $RefreshSig$();\n\nimport { Trans } from \"@lingui/react\";\nimport { i18n } from \"@lingui/core\";\nimport { CurrencyAmount } from '@kyberswap/ks-sdk-core';\nimport { Position } from '@kyberswap/ks-sdk-elastic';\nimport { useWeb3React } from '@web3-react/core';\nimport { stringify } from 'qs';\nimport React, { useMemo, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Flex, Text } from 'rebass';\nimport styled from 'styled-components';\nimport { ButtonEmpty, ButtonOutlined, ButtonPrimary } from 'components/Button';\nimport { LightCard } from 'components/Card';\nimport Divider from 'components/Divider';\nimport ProAmmFee from 'components/ProAmm/ProAmmFee';\nimport ProAmmPoolInfo from 'components/ProAmm/ProAmmPoolInfo';\nimport ProAmmPooledTokens from 'components/ProAmm/ProAmmPooledTokens';\nimport ProAmmPriceRange from 'components/ProAmm/ProAmmPriceRange';\nimport { RowBetween } from 'components/Row';\nimport { MouseoverTooltip } from 'components/Tooltip';\nimport { PROMM_ANALYTICS_URL } from 'constants/index';\nimport { VERSION } from 'constants/v2';\nimport { useToken } from 'hooks/Tokens';\nimport useIsTickAtLimit from 'hooks/useIsTickAtLimit';\nimport useMixpanel, { MIXPANEL_TYPE } from 'hooks/useMixpanel';\nimport { usePool } from 'hooks/usePools';\nimport useTheme from 'hooks/useTheme';\nimport { useTokensPrice } from 'state/application/hooks';\nimport { ExternalLink, StyledInternalLink } from 'theme';\nimport { currencyId } from 'utils/currencyId';\nimport { formatDollarAmount } from 'utils/numbers';\nimport { unwrappedToken } from 'utils/wrappedCurrency';\nimport ContentLoader from './ContentLoader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar StyledPositionCard = styled(LightCard).withConfig({\n  displayName: \"PositionListItem__StyledPositionCard\",\n  componentId: \"sc-ogc5y2-0\"\n})([\"border:none;background:\", \";position:relative;overflow:hidden;border-radius:20px;padding:20px;display:flex;flex-direction:column;\", \"\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.background;\n}, function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.mediaWidth.upToMedium(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    padding: 16px;\\n  \"])));\n});\n_c = StyledPositionCard;\nvar TabContainer = styled.div.withConfig({\n  displayName: \"PositionListItem__TabContainer\",\n  componentId: \"sc-ogc5y2-1\"\n})([\"display:flex;border-radius:999px;background-color:\", \";padding:2px;\"], function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.tabBackgound;\n});\n_c2 = TabContainer;\nvar Tab = styled(ButtonEmpty).withConfig({\n  displayName: \"PositionListItem__Tab\",\n  componentId: \"sc-ogc5y2-2\"\n})([\"display:flex;justify-content:center;align-items:center;flex:1;background-color:\", \";padding:4px;font-size:12px;font-weight:500;border-radius:20px;transition:all 0.2s;&:hover{text-decoration:none;}\"], function (_ref4) {\n  var theme = _ref4.theme,\n      isActive = _ref4.isActive;\n  return isActive ? theme.tabActive : theme.tabBackgound;\n});\n_c3 = Tab;\nvar TabText = styled.div.withConfig({\n  displayName: \"PositionListItem__TabText\",\n  componentId: \"sc-ogc5y2-3\"\n})([\"display:flex;align-items:center;gap:2px;color:\", \";\"], function (_ref5) {\n  var theme = _ref5.theme,\n      isActive = _ref5.isActive;\n  return isActive ? theme.text : theme.subText;\n});\n_c4 = TabText;\nvar StakedInfo = styled.div.withConfig({\n  displayName: \"PositionListItem__StakedInfo\",\n  componentId: \"sc-ogc5y2-4\"\n})([\"border-radius:4px;border:1px solid \", \";padding:12px;margin-top:16px;\"], function (_ref6) {\n  var theme = _ref6.theme;\n  return theme.border;\n});\n_c5 = StakedInfo;\nvar StakedRow = styled.div.withConfig({\n  displayName: \"PositionListItem__StakedRow\",\n  componentId: \"sc-ogc5y2-5\"\n})([\"line-height:24px;display:flex;justify-content:space-between;font-size:12px;\"]);\n_c6 = StakedRow;\nvar ButtonGroup = styled.div.withConfig({\n  displayName: \"PositionListItem__ButtonGroup\",\n  componentId: \"sc-ogc5y2-6\"\n})([\"display:flex;gap:1rem;margin-bottom:20px;> *{flex:1 1 50%;}\"]);\n_c7 = ButtonGroup;\nexport function getPriceOrderingFromPositionForUI(position) {\n  if (!position) {\n    return {};\n  }\n\n  var token0 = position.amount0.currency;\n  var token1 = position.amount1.currency; // otherwise, just return the default\n\n  return {\n    priceLower: position.token0PriceLower,\n    priceUpper: position.token0PriceUpper,\n    quote: token1,\n    base: token0\n  };\n}\n\nfunction PositionListItem(_ref7) {\n  _s();\n\n  var stakedLayout = _ref7.stakedLayout,\n      hasUserDepositedInFarm = _ref7.hasUserDepositedInFarm,\n      positionDetails = _ref7.positionDetails,\n      refe = _ref7.refe,\n      hasActiveFarm = _ref7.hasActiveFarm;\n\n  var _useWeb3React = useWeb3React(),\n      chainId = _useWeb3React.chainId;\n\n  var token0Address = positionDetails.token0,\n      token1Address = positionDetails.token1,\n      feeAmount = positionDetails.fee,\n      liquidity = positionDetails.liquidity,\n      tickLower = positionDetails.tickLower,\n      tickUpper = positionDetails.tickUpper,\n      stakedLiquidity = positionDetails.stakedLiquidity;\n  var token0 = useToken(token0Address);\n  var token1 = useToken(token1Address);\n\n  if (refe && token0 && !refe.current[token0Address.toLocaleLowerCase()] && token0.symbol) {\n    refe.current[token0Address.toLocaleLowerCase()] = token0.symbol.toLowerCase();\n  }\n\n  if (refe && token1 && !refe.current[token1Address.toLocaleLowerCase()] && token1.symbol) {\n    refe.current[token1Address.toLocaleLowerCase()] = token1.symbol.toLowerCase();\n  }\n\n  var currency0 = token0 ? unwrappedToken(token0) : undefined;\n  var currency1 = token1 ? unwrappedToken(token1) : undefined;\n  var prices = useTokensPrice([token0, token1], VERSION.ELASTIC); // construct Position from details returned\n\n  var _usePool = usePool(currency0 !== null && currency0 !== void 0 ? currency0 : undefined, currency1 !== null && currency1 !== void 0 ? currency1 : undefined, feeAmount),\n      _usePool2 = _slicedToArray(_usePool, 2),\n      pool = _usePool2[1];\n\n  var position = useMemo(function () {\n    if (pool) {\n      return new Position({\n        pool: pool,\n        liquidity: liquidity.toString(),\n        tickLower: tickLower,\n        tickUpper: tickUpper\n      });\n    }\n\n    return undefined;\n  }, [liquidity, pool, tickLower, tickUpper]);\n  var stakedPosition = pool && hasUserDepositedInFarm ? new Position({\n    pool: pool,\n    liquidity: positionDetails.stakedLiquidity.toString(),\n    tickLower: tickLower,\n    tickUpper: tickUpper\n  }) : undefined;\n  var usd = parseFloat((position === null || position === void 0 ? void 0 : position.amount0.toExact()) || '0') * prices[0] + parseFloat((position === null || position === void 0 ? void 0 : position.amount1.toExact()) || '0') * prices[1];\n  var stakedUsd = parseFloat((stakedPosition === null || stakedPosition === void 0 ? void 0 : stakedPosition.amount0.toExact()) || '0') * prices[0] + parseFloat((stakedPosition === null || stakedPosition === void 0 ? void 0 : stakedPosition.amount1.toExact()) || '0') * prices[1];\n  var tickAtLimit = useIsTickAtLimit(feeAmount, tickLower, tickUpper); // prices\n\n  var _getPriceOrderingFrom = getPriceOrderingFromPositionForUI(position),\n      priceLower = _getPriceOrderingFrom.priceLower,\n      priceUpper = _getPriceOrderingFrom.priceUpper;\n\n  var removed = liquidity === null || liquidity === void 0 ? void 0 : liquidity.eq(0);\n  var theme = useTheme();\n\n  var _useMixpanel = useMixpanel(),\n      mixpanelHandler = _useMixpanel.mixpanelHandler;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeTab = _useState2[0],\n      setActiveTab = _useState2[1];\n\n  var now = Date.now() / 1000;\n\n  var reasonToDisableRemoveLiquidity = function () {\n    if (removed) {\n      return (\n        /*i18n*/\n        i18n._(\"You have zero liquidity to remove\")\n      );\n    }\n\n    if (stakedLiquidity) {\n      return (\n        /*i18n*/\n        i18n._(\"You need to withdraw your deposited liquidity position from the farms first\")\n      );\n    }\n\n    return '';\n  }();\n\n  return position && priceLower && priceUpper ? /*#__PURE__*/_jsxDEV(StyledPositionCard, {\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(ProAmmPoolInfo, {\n        position: position,\n        tokenId: positionDetails.tokenId.toString(),\n        isFarmActive: hasActiveFarm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabContainer, {\n        style: {\n          marginTop: '1rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Tab, {\n          isActive: activeTab === 0,\n          padding: \"0\",\n          onClick: function onClick() {\n            return setActiveTab(0);\n          },\n          children: /*#__PURE__*/_jsxDEV(TabText, {\n            isActive: activeTab === 0,\n            style: {\n              fontSize: '12px'\n            },\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Your Liquidity\"\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          isActive: activeTab === 1,\n          padding: \"0\",\n          onClick: function onClick() {\n            return setActiveTab(1);\n          },\n          children: /*#__PURE__*/_jsxDEV(TabText, {\n            isActive: activeTab === 1,\n            style: {\n              fontSize: '12px'\n            },\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Price Range\"\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this), activeTab === 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [!stakedLayout ? /*#__PURE__*/_jsxDEV(ProAmmPooledTokens, {\n          valueUSD: usd,\n          stakedUsd: stakedUsd,\n          liquidityValue0: CurrencyAmount.fromRawAmount(unwrappedToken(position.pool.token0), position.amount0.quotient),\n          liquidityValue1: CurrencyAmount.fromRawAmount(unwrappedToken(position.pool.token1), position.amount1.quotient),\n          layout: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(StakedInfo, {\n          children: [/*#__PURE__*/_jsxDEV(StakedRow, {\n            children: [/*#__PURE__*/_jsxDEV(Text, {\n              color: theme.subText,\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Your Staked Balance\"\n              }, void 0, false, void 0, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              children: formatDollarAmount(stakedUsd)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(StakedRow, {\n            children: [/*#__PURE__*/_jsxDEV(Text, {\n              color: theme.subText,\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Your Staked {0}\",\n                values: {\n                  0: position.amount0.currency.symbol\n                }\n              }, void 0, false, void 0, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              children: stakedPosition === null || stakedPosition === void 0 ? void 0 : stakedPosition.amount0.toSignificant(6)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(StakedRow, {\n            children: [/*#__PURE__*/_jsxDEV(Text, {\n              color: theme.subText,\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Your Staked {0}\",\n                values: {\n                  0: position.amount1.currency.symbol\n                }\n              }, void 0, false, void 0, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              children: stakedPosition === null || stakedPosition === void 0 ? void 0 : stakedPosition.amount1.toSignificant(6)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(StakedRow, {\n            children: [/*#__PURE__*/_jsxDEV(Text, {\n              color: theme.subText,\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Farm APR\"\n              }, void 0, false, void 0, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              color: theme.apr,\n              children: \"--\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 15\n        }, this), !stakedLayout && /*#__PURE__*/_jsxDEV(ProAmmFee, {\n          position: position,\n          tokenId: positionDetails.tokenId,\n          layout: 1,\n          hasUserDepositedInFarm: hasUserDepositedInFarm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), activeTab === 1 && /*#__PURE__*/_jsxDEV(ProAmmPriceRange, {\n        position: position,\n        ticksAtLimit: tickAtLimit,\n        layout: 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '20px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        flexDirection: 'column',\n        marginTop: \"auto\",\n        children: [stakedLayout ? /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n          style: {\n            marginBottom: '20px',\n            textDecoration: 'none',\n            color: theme.textReverse,\n            fontSize: '14px'\n          },\n          padding: \"8px\",\n          as: StyledInternalLink,\n          to: \"/farms?\".concat(stringify({\n            tab: 'elastic',\n            type: positionDetails.endTime ? positionDetails.endTime > now ? 'active' : 'ended' : 'active',\n            search: positionDetails.poolId\n          })),\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Go to Farm\"\n          }, void 0, false, void 0, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(ButtonGroup, {\n          children: [reasonToDisableRemoveLiquidity ? /*#__PURE__*/_jsxDEV(MouseoverTooltip, {\n            text: reasonToDisableRemoveLiquidity,\n            placement: \"top\",\n            children: /*#__PURE__*/_jsxDEV(Flex // this flex looks like redundant\n            // but without this, the cursor will be default\n            // as we put pointerEvents=none on the button\n            , {\n              sx: {\n                cursor: 'not-allowed',\n                width: '100%'\n              },\n              children: /*#__PURE__*/_jsxDEV(ButtonOutlined, {\n                style: {\n                  padding: '8px',\n                  width: '100%',\n                  pointerEvents: 'none'\n                },\n                disabled: true,\n                children: /*#__PURE__*/_jsxDEV(Text, {\n                  width: \"max-content\",\n                  fontSize: \"14px\",\n                  children: /*#__PURE__*/_jsxDEV(Trans, {\n                    id: \"Remove Liquidity\"\n                  }, void 0, false, void 0, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(ButtonOutlined, {\n            padding: \"8px\",\n            as: Link,\n            to: \"/elastic/remove/\".concat(positionDetails.tokenId),\n            onClick: function onClick() {\n              mixpanelHandler(MIXPANEL_TYPE.ELASTIC_REMOVE_LIQUIDITY_INITIATED, {\n                token_1: (token0 === null || token0 === void 0 ? void 0 : token0.symbol) || '',\n                token_2: (token1 === null || token1 === void 0 ? void 0 : token1.symbol) || '',\n                fee_tier: (pool === null || pool === void 0 ? void 0 : pool.fee) / 10000\n              });\n            },\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              width: \"max-content\",\n              fontSize: \"14px\",\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Remove Liquidity\"\n              }, void 0, false, void 0, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 17\n          }, this), removed ? /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n            disabled: true,\n            padding: \"8px\",\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              width: \"max-content\",\n              fontSize: \"14px\",\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Increase Liquidity\"\n              }, void 0, false, void 0, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n            padding: \"8px\",\n            style: {\n              borderRadius: '18px',\n              fontSize: '14px'\n            },\n            as: Link,\n            to: \"/elastic/increase/\".concat(currencyId(currency0, chainId), \"/\").concat(currencyId(currency1, chainId), \"/\").concat(feeAmount, \"/\").concat(positionDetails.tokenId),\n            onClick: function onClick() {\n              mixpanelHandler(MIXPANEL_TYPE.ELASTIC_INCREASE_LIQUIDITY_INITIATED, {\n                token_1: (token0 === null || token0 === void 0 ? void 0 : token0.symbol) || '',\n                token_2: (token1 === null || token1 === void 0 ? void 0 : token1.symbol) || '',\n                fee_tier: (pool === null || pool === void 0 ? void 0 : pool.fee) / 10000\n              });\n            },\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              width: \"max-content\",\n              fontSize: \"14px\",\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Increase Liquidity\"\n              }, void 0, false, void 0, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {\n          sx: {\n            marginBottom: '20px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RowBetween, {\n          children: [/*#__PURE__*/_jsxDEV(ButtonEmpty, {\n            width: \"max-content\",\n            style: {\n              fontSize: '14px'\n            },\n            padding: \"0\",\n            children: /*#__PURE__*/_jsxDEV(ExternalLink, {\n              style: {\n                width: '100%',\n                textAlign: 'center'\n              },\n              href: \"\".concat(PROMM_ANALYTICS_URL[chainId], \"/pool/\").concat(positionDetails.poolId.toLowerCase()),\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Pool Analytics \\u2197\"\n              }, void 0, false, void 0, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this), hasUserDepositedInFarm && /*#__PURE__*/_jsxDEV(ButtonEmpty, {\n            width: \"max-content\",\n            style: {\n              fontSize: '14px'\n            },\n            padding: \"0\",\n            children: /*#__PURE__*/_jsxDEV(StyledInternalLink, {\n              style: {\n                width: '100%',\n                textAlign: 'center'\n              },\n              to: \"/farms\",\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Go to Farms \\u2197\"\n              }, void 0, false, void 0, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(ContentLoader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 411,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PositionListItem, \"2wgAbgqt+zsgQAAFdX1/HfdHB5w=\", false, function () {\n  return [useWeb3React, useToken, useToken, useTokensPrice, usePool, useIsTickAtLimit, useTheme, useMixpanel];\n});\n\n_c8 = PositionListItem;\nexport default _c9 = /*#__PURE__*/React.memo(PositionListItem);\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n\n$RefreshReg$(_c, \"StyledPositionCard\");\n$RefreshReg$(_c2, \"TabContainer\");\n$RefreshReg$(_c3, \"Tab\");\n$RefreshReg$(_c4, \"TabText\");\n$RefreshReg$(_c5, \"StakedInfo\");\n$RefreshReg$(_c6, \"StakedRow\");\n$RefreshReg$(_c7, \"ButtonGroup\");\n$RefreshReg$(_c8, \"PositionListItem\");\n$RefreshReg$(_c9, \"%default%\");","map":{"version":3,"names":["CurrencyAmount","Position","useWeb3React","stringify","React","useMemo","useState","Link","Flex","Text","styled","ButtonEmpty","ButtonOutlined","ButtonPrimary","LightCard","Divider","ProAmmFee","ProAmmPoolInfo","ProAmmPooledTokens","ProAmmPriceRange","RowBetween","MouseoverTooltip","PROMM_ANALYTICS_URL","VERSION","useToken","useIsTickAtLimit","useMixpanel","MIXPANEL_TYPE","usePool","useTheme","useTokensPrice","ExternalLink","StyledInternalLink","currencyId","formatDollarAmount","unwrappedToken","ContentLoader","StyledPositionCard","theme","background","mediaWidth","upToMedium","TabContainer","div","tabBackgound","Tab","isActive","tabActive","TabText","text","subText","StakedInfo","border","StakedRow","ButtonGroup","getPriceOrderingFromPositionForUI","position","token0","amount0","currency","token1","amount1","priceLower","token0PriceLower","priceUpper","token0PriceUpper","quote","base","PositionListItem","stakedLayout","hasUserDepositedInFarm","positionDetails","refe","hasActiveFarm","chainId","token0Address","token1Address","feeAmount","fee","liquidity","tickLower","tickUpper","stakedLiquidity","current","toLocaleLowerCase","symbol","toLowerCase","currency0","undefined","currency1","prices","ELASTIC","pool","toString","stakedPosition","usd","parseFloat","toExact","stakedUsd","tickAtLimit","removed","eq","mixpanelHandler","activeTab","setActiveTab","now","Date","reasonToDisableRemoveLiquidity","tokenId","marginTop","fontSize","fromRawAmount","quotient","toSignificant","apr","marginBottom","textDecoration","color","textReverse","tab","type","endTime","search","poolId","cursor","width","padding","pointerEvents","ELASTIC_REMOVE_LIQUIDITY_INITIATED","token_1","token_2","fee_tier","borderRadius","ELASTIC_INCREASE_LIQUIDITY_INITIATED","textAlign","memo"],"sources":["/Applications/XAMPP/voxel-interface/src/pages/ProAmmPool/PositionListItem.tsx"],"sourcesContent":["import { ChainId, CurrencyAmount, Price, Token } from '@kyberswap/ks-sdk-core'\nimport { Position } from '@kyberswap/ks-sdk-elastic'\nimport { Trans, t } from '@lingui/macro'\nimport { useWeb3React } from '@web3-react/core'\nimport { stringify } from 'qs'\nimport React, { useMemo, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { Flex, Text } from 'rebass'\nimport styled from 'styled-components'\n\nimport { ButtonEmpty, ButtonOutlined, ButtonPrimary } from 'components/Button'\nimport { LightCard } from 'components/Card'\nimport Divider from 'components/Divider'\nimport ProAmmFee from 'components/ProAmm/ProAmmFee'\nimport ProAmmPoolInfo from 'components/ProAmm/ProAmmPoolInfo'\nimport ProAmmPooledTokens from 'components/ProAmm/ProAmmPooledTokens'\nimport ProAmmPriceRange from 'components/ProAmm/ProAmmPriceRange'\nimport { RowBetween } from 'components/Row'\nimport { MouseoverTooltip } from 'components/Tooltip'\nimport { PROMM_ANALYTICS_URL } from 'constants/index'\nimport { VERSION } from 'constants/v2'\nimport { useToken } from 'hooks/Tokens'\nimport useIsTickAtLimit from 'hooks/useIsTickAtLimit'\nimport useMixpanel, { MIXPANEL_TYPE } from 'hooks/useMixpanel'\nimport { usePool } from 'hooks/usePools'\nimport useTheme from 'hooks/useTheme'\nimport { useTokensPrice } from 'state/application/hooks'\nimport { UserPositionFarm } from 'state/farms/promm/types'\nimport { ExternalLink, StyledInternalLink } from 'theme'\nimport { PositionDetails } from 'types/position'\nimport { currencyId } from 'utils/currencyId'\nimport { formatDollarAmount } from 'utils/numbers'\nimport { unwrappedToken } from 'utils/wrappedCurrency'\n\nimport ContentLoader from './ContentLoader'\n\nconst StyledPositionCard = styled(LightCard)`\n  border: none;\n  background: ${({ theme }) => theme.background};\n  position: relative;\n  overflow: hidden;\n  border-radius: 20px;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    padding: 16px;\n  `}\n`\n\nconst TabContainer = styled.div`\n  display: flex;\n  border-radius: 999px;\n  background-color: ${({ theme }) => theme.tabBackgound};\n  padding: 2px;\n`\n\nconst Tab = styled(ButtonEmpty)<{ isActive?: boolean; isLeft?: boolean }>`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex: 1;\n  background-color: ${({ theme, isActive }) => (isActive ? theme.tabActive : theme.tabBackgound)};\n  padding: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  border-radius: 20px;\n  transition: all 0.2s;\n\n  &:hover {\n    text-decoration: none;\n  }\n`\n\nconst TabText = styled.div<{ isActive: boolean }>`\n  display: flex;\n  align-items: center;\n  gap: 2px;\n  color: ${({ theme, isActive }) => (isActive ? theme.text : theme.subText)};\n`\n\nconst StakedInfo = styled.div`\n  border-radius: 4px;\n  border: 1px solid ${({ theme }) => theme.border};\n  padding: 12px;\n  margin-top: 16px;\n`\n\nconst StakedRow = styled.div`\n  line-height: 24px;\n  display: flex;\n  justify-content: space-between;\n  font-size: 12px;\n`\n\nconst ButtonGroup = styled.div`\n  display: flex;\n  gap: 1rem;\n  margin-bottom: 20px;\n\n  > * {\n    /* to make sure all immediate buttons take equal width */\n    flex: 1 1 50%;\n  }\n`\n\ninterface PositionListItemProps {\n  positionDetails: PositionDetails | UserPositionFarm\n  hasUserDepositedInFarm?: boolean\n  stakedLayout?: boolean\n  refe?: React.MutableRefObject<any>\n  hasActiveFarm: boolean\n}\n\nexport function getPriceOrderingFromPositionForUI(position?: Position): {\n  priceLower?: Price<Token, Token>\n  priceUpper?: Price<Token, Token>\n  quote?: Token\n  base?: Token\n} {\n  if (!position) {\n    return {}\n  }\n  const token0 = position.amount0.currency\n  const token1 = position.amount1.currency\n  // otherwise, just return the default\n  return {\n    priceLower: position.token0PriceLower,\n    priceUpper: position.token0PriceUpper,\n    quote: token1,\n    base: token0,\n  }\n}\n\nfunction PositionListItem({\n  stakedLayout,\n  hasUserDepositedInFarm,\n  positionDetails,\n  refe,\n  hasActiveFarm,\n}: PositionListItemProps) {\n  const { chainId } = useWeb3React()\n  const {\n    token0: token0Address,\n    token1: token1Address,\n    fee: feeAmount,\n    liquidity,\n    tickLower,\n    tickUpper,\n    stakedLiquidity,\n  } = positionDetails\n\n  const token0 = useToken(token0Address)\n  const token1 = useToken(token1Address)\n  if (refe && token0 && !refe.current[token0Address.toLocaleLowerCase()] && token0.symbol) {\n    refe.current[token0Address.toLocaleLowerCase()] = token0.symbol.toLowerCase()\n  }\n  if (refe && token1 && !refe.current[token1Address.toLocaleLowerCase()] && token1.symbol) {\n    refe.current[token1Address.toLocaleLowerCase()] = token1.symbol.toLowerCase()\n  }\n  const currency0 = token0 ? unwrappedToken(token0) : undefined\n  const currency1 = token1 ? unwrappedToken(token1) : undefined\n\n  const prices = useTokensPrice([token0, token1], VERSION.ELASTIC)\n\n  // construct Position from details returned\n  const [, pool] = usePool(currency0 ?? undefined, currency1 ?? undefined, feeAmount)\n\n  const position = useMemo(() => {\n    if (pool) {\n      return new Position({ pool, liquidity: liquidity.toString(), tickLower, tickUpper })\n    }\n    return undefined\n  }, [liquidity, pool, tickLower, tickUpper])\n\n  const stakedPosition =\n    pool && hasUserDepositedInFarm\n      ? new Position({\n          pool,\n          liquidity: (positionDetails as UserPositionFarm).stakedLiquidity.toString(),\n          tickLower,\n          tickUpper,\n        })\n      : undefined\n\n  const usd =\n    parseFloat(position?.amount0.toExact() || '0') * prices[0] +\n    parseFloat(position?.amount1.toExact() || '0') * prices[1]\n\n  const stakedUsd =\n    parseFloat(stakedPosition?.amount0.toExact() || '0') * prices[0] +\n    parseFloat(stakedPosition?.amount1.toExact() || '0') * prices[1]\n\n  const tickAtLimit = useIsTickAtLimit(feeAmount, tickLower, tickUpper)\n\n  // prices\n  const { priceLower, priceUpper } = getPriceOrderingFromPositionForUI(position)\n\n  const removed = liquidity?.eq(0)\n  const theme = useTheme()\n\n  const { mixpanelHandler } = useMixpanel()\n\n  const [activeTab, setActiveTab] = useState(0)\n  const now = Date.now() / 1000\n\n  const reasonToDisableRemoveLiquidity = (() => {\n    if (removed) {\n      return t`You have zero liquidity to remove`\n    }\n\n    if (stakedLiquidity) {\n      return t`You need to withdraw your deposited liquidity position from the farms first`\n    }\n\n    return ''\n  })()\n\n  return position && priceLower && priceUpper ? (\n    <StyledPositionCard>\n      <>\n        <ProAmmPoolInfo position={position} tokenId={positionDetails.tokenId.toString()} isFarmActive={hasActiveFarm} />\n        <TabContainer style={{ marginTop: '1rem' }}>\n          <Tab isActive={activeTab === 0} padding=\"0\" onClick={() => setActiveTab(0)}>\n            <TabText isActive={activeTab === 0} style={{ fontSize: '12px' }}>\n              <Trans>Your Liquidity</Trans>\n            </TabText>\n          </Tab>\n          <Tab isActive={activeTab === 1} padding=\"0\" onClick={() => setActiveTab(1)}>\n            <TabText isActive={activeTab === 1} style={{ fontSize: '12px' }}>\n              <Trans>Price Range</Trans>\n            </TabText>\n          </Tab>\n        </TabContainer>\n        {activeTab === 0 && (\n          <>\n            {!stakedLayout ? (\n              <ProAmmPooledTokens\n                valueUSD={usd}\n                stakedUsd={stakedUsd}\n                liquidityValue0={CurrencyAmount.fromRawAmount(\n                  unwrappedToken(position.pool.token0),\n                  position.amount0.quotient,\n                )}\n                liquidityValue1={CurrencyAmount.fromRawAmount(\n                  unwrappedToken(position.pool.token1),\n                  position.amount1.quotient,\n                )}\n                layout={1}\n              />\n            ) : (\n              <StakedInfo>\n                <StakedRow>\n                  <Text color={theme.subText}>\n                    <Trans>Your Staked Balance</Trans>\n                  </Text>\n                  <Text>{formatDollarAmount(stakedUsd)}</Text>\n                </StakedRow>\n\n                <StakedRow>\n                  <Text color={theme.subText}>\n                    <Trans>Your Staked {position.amount0.currency.symbol}</Trans>\n                  </Text>\n                  <Text>{stakedPosition?.amount0.toSignificant(6)}</Text>\n                </StakedRow>\n\n                <StakedRow>\n                  <Text color={theme.subText}>\n                    <Trans>Your Staked {position.amount1.currency.symbol}</Trans>\n                  </Text>\n                  <Text>{stakedPosition?.amount1.toSignificant(6)}</Text>\n                </StakedRow>\n\n                <StakedRow>\n                  <Text color={theme.subText}>\n                    <Trans>Farm APR</Trans>\n                  </Text>\n                  <Text color={theme.apr}>--</Text>\n                </StakedRow>\n              </StakedInfo>\n            )}\n            {!stakedLayout && (\n              <ProAmmFee\n                position={position}\n                tokenId={positionDetails.tokenId}\n                layout={1}\n                hasUserDepositedInFarm={hasUserDepositedInFarm}\n              />\n            )}\n          </>\n        )}\n        {activeTab === 1 && <ProAmmPriceRange position={position} ticksAtLimit={tickAtLimit} layout={1} />}\n        <div style={{ marginTop: '20px' }} />\n        <Flex flexDirection={'column'} marginTop=\"auto\">\n          {stakedLayout ? (\n            <ButtonPrimary\n              style={{ marginBottom: '20px', textDecoration: 'none', color: theme.textReverse, fontSize: '14px' }}\n              padding=\"8px\"\n              as={StyledInternalLink}\n              to={`/farms?${stringify({\n                tab: 'elastic',\n                type: positionDetails.endTime ? (positionDetails.endTime > now ? 'active' : 'ended') : 'active',\n                search: positionDetails.poolId,\n              })}`}\n            >\n              <Trans>Go to Farm</Trans>\n            </ButtonPrimary>\n          ) : (\n            <ButtonGroup>\n              {reasonToDisableRemoveLiquidity ? (\n                <MouseoverTooltip text={reasonToDisableRemoveLiquidity} placement=\"top\">\n                  <Flex\n                    // this flex looks like redundant\n                    // but without this, the cursor will be default\n                    // as we put pointerEvents=none on the button\n                    sx={{\n                      cursor: 'not-allowed',\n                      width: '100%',\n                    }}\n                  >\n                    <ButtonOutlined\n                      style={{\n                        padding: '8px',\n                        width: '100%',\n                        pointerEvents: 'none',\n                      }}\n                      disabled\n                    >\n                      <Text width=\"max-content\" fontSize=\"14px\">\n                        <Trans>Remove Liquidity</Trans>\n                      </Text>\n                    </ButtonOutlined>\n                  </Flex>\n                </MouseoverTooltip>\n              ) : (\n                <ButtonOutlined\n                  padding=\"8px\"\n                  as={Link}\n                  to={`/elastic/remove/${positionDetails.tokenId}`}\n                  onClick={() => {\n                    mixpanelHandler(MIXPANEL_TYPE.ELASTIC_REMOVE_LIQUIDITY_INITIATED, {\n                      token_1: token0?.symbol || '',\n                      token_2: token1?.symbol || '',\n                      fee_tier: (pool?.fee as number) / 10000,\n                    })\n                  }}\n                >\n                  <Text width=\"max-content\" fontSize=\"14px\">\n                    <Trans>Remove Liquidity</Trans>\n                  </Text>\n                </ButtonOutlined>\n              )}\n\n              {removed ? (\n                <ButtonPrimary disabled padding=\"8px\">\n                  <Text width=\"max-content\" fontSize=\"14px\">\n                    <Trans>Increase Liquidity</Trans>\n                  </Text>\n                </ButtonPrimary>\n              ) : (\n                <ButtonPrimary\n                  padding=\"8px\"\n                  style={{\n                    borderRadius: '18px',\n                    fontSize: '14px',\n                  }}\n                  as={Link}\n                  to={`/elastic/increase/${currencyId(currency0, chainId)}/${currencyId(\n                    currency1,\n                    chainId,\n                  )}/${feeAmount}/${positionDetails.tokenId}`}\n                  onClick={() => {\n                    mixpanelHandler(MIXPANEL_TYPE.ELASTIC_INCREASE_LIQUIDITY_INITIATED, {\n                      token_1: token0?.symbol || '',\n                      token_2: token1?.symbol || '',\n                      fee_tier: (pool?.fee as number) / 10000,\n                    })\n                  }}\n                >\n                  <Text width=\"max-content\" fontSize=\"14px\">\n                    <Trans>Increase Liquidity</Trans>\n                  </Text>\n                </ButtonPrimary>\n              )}\n            </ButtonGroup>\n          )}\n          <Divider sx={{ marginBottom: '20px' }} />\n          <RowBetween>\n            <ButtonEmpty width=\"max-content\" style={{ fontSize: '14px' }} padding=\"0\">\n              <ExternalLink\n                style={{ width: '100%', textAlign: 'center' }}\n                href={`${PROMM_ANALYTICS_URL[chainId as ChainId]}/pool/${positionDetails.poolId.toLowerCase()}`}\n              >\n                <Trans>Pool Analytics ↗</Trans>\n              </ExternalLink>\n            </ButtonEmpty>\n\n            {hasUserDepositedInFarm && (\n              <ButtonEmpty width=\"max-content\" style={{ fontSize: '14px' }} padding=\"0\">\n                <StyledInternalLink style={{ width: '100%', textAlign: 'center' }} to=\"/farms\">\n                  <Trans>Go to Farms ↗</Trans>\n                </StyledInternalLink>\n              </ButtonEmpty>\n            )}\n          </RowBetween>\n        </Flex>\n      </>\n    </StyledPositionCard>\n  ) : (\n    <ContentLoader />\n  )\n}\n\nexport default React.memo(PositionListItem)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}