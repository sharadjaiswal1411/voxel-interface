{"ast":null,"code":"import _regeneratorRuntime from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Applications/XAMPP/voxel-interface/src/components/NftPools/NftCards.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { Flex, Text } from 'rebass';\nimport useTheme from 'hooks/useTheme';\nimport { useBlockNumber } from 'state/application/hooks';\nimport { useFarmAction } from 'state/nfts/promm/hooks';\nimport { useIsTransactionPending } from 'state/transactions/hooks';\nimport styled from 'styled-components';\nimport { ButtonPrimary } from 'components/Button';\nimport { useActiveWeb3React } from 'hooks';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport var NftCard = styled.div.withConfig({\n  displayName: \"NftCards__NftCard\",\n  componentId: \"sc-18vqvwa-0\"\n})([\"background:#1C1C1C;height:auto;border-radius:12px;padding:15px 15px 20px 15px;position:relative;width:320px;margin-right:5px;\"]);\n_c = NftCard;\n\nfunction NftCards(_ref) {\n  _s();\n\n  var _this = this;\n\n  var stakingAddress = _ref.stakingAddress,\n      nftAddress = _ref.nftAddress;\n  var theme = useTheme();\n\n  var _useActiveWeb3React = useActiveWeb3React(),\n      chainId = _useActiveWeb3React.chainId,\n      account = _useActiveWeb3React.account;\n\n  var _useFarmAction = useFarmAction(stakingAddress, nftAddress),\n      approve = _useFarmAction.approve,\n      deposit = _useFarmAction.deposit,\n      isApprovedContract = _useFarmAction.isApprovedContract;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      approvalTx = _useState2[0],\n      setApprovalTx = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isApprovedForAll = _useState4[0],\n      setApprovedForAll = _useState4[1];\n\n  var isApprovalTxPending = useIsTransactionPending(approvalTx);\n\n  var handleApprove = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(nftId) {\n      var tx, _tx;\n\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (isApprovedForAll) {\n                _context.next = 7;\n                break;\n              }\n\n              _context.next = 3;\n              return approve();\n\n            case 3:\n              tx = _context.sent;\n              setApprovalTx(tx);\n              _context.next = 11;\n              break;\n\n            case 7:\n              _context.next = 9;\n              return deposit(nftId);\n\n            case 9:\n              _tx = _context.sent;\n              setApprovalTx(_tx);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleApprove(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      nfts = _useState6[0],\n      setNfts = _useState6[1];\n\n  var getProMMFarms = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var options;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.t0 = setApprovedForAll;\n              _context2.next = 3;\n              return isApprovedContract();\n\n            case 3:\n              _context2.t1 = _context2.sent;\n              (0, _context2.t0)(_context2.t1);\n              options = {\n                method: 'GET',\n                url: \"https://deep-index.moralis.io/api/v2/\".concat(account, \"/nft\"),\n                params: {\n                  chain: 'goerli',\n                  format: 'decimal',\n                  limit: '100',\n                  token_addresses: nftAddress\n                },\n                headers: {\n                  accept: 'application/json',\n                  'X-API-Key': '0w8Ivx0tOflZTjQIb9ITjW2LFU1U243aiNXc6Ccqf9eu9qNajB4F4OSYb9xsxEQZ'\n                }\n              };\n              axios.request(options).then(function (response) {\n                var _response$data;\n\n                setNfts(response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.result);\n              }).catch(function (error) {\n                console.error(error);\n              });\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getProMMFarms() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var blockNumber = useBlockNumber();\n  useEffect(function () {\n    getProMMFarms();\n  }, [getProMMFarms, approvalTx, isApprovedForAll]);\n  var history = useHistory();\n  var location = useLocation();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Flex, {\n      children: [!nfts.length && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \" No NFTs owned. Please mint some. \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 23\n      }, this), nfts && (nfts === null || nfts === void 0 ? void 0 : nfts.map(function (item, key) {\n        return /*#__PURE__*/_jsxDEV(NftCard, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"capitalize\",\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 23\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Token Id: #\", item.token_id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 23\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 21\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-card-footer\",\n            children: /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n              style: {\n                margin: '4px 0 0 0',\n                padding: '16px'\n              },\n              onClick: function onClick() {\n                return handleApprove(item.token_id.toString());\n              },\n              children: /*#__PURE__*/_jsxDEV(Text, {\n                fontWeight: 500,\n                fontSize: 18,\n                children: isApprovedForAll ? \"Stake Your NFT\" : \"Approve Contract\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 20\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 21\n          }, _this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, _this);\n      }))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 6\n    }, this)\n  }, void 0, false);\n}\n\n_s(NftCards, \"o4Kzy2hM7z1RUgBlGhW/zyBKgN0=\", false, function () {\n  return [useTheme, useActiveWeb3React, useFarmAction, useIsTransactionPending, useBlockNumber, useHistory, useLocation];\n});\n\n_c2 = NftCards;\nexport default NftCards;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"NftCard\");\n$RefreshReg$(_c2, \"NftCards\");","map":{"version":3,"names":["useEffect","useState","useHistory","useLocation","Flex","Text","useTheme","useBlockNumber","useFarmAction","useIsTransactionPending","styled","ButtonPrimary","useActiveWeb3React","axios","NftCard","div","NftCards","stakingAddress","nftAddress","theme","chainId","account","approve","deposit","isApprovedContract","approvalTx","setApprovalTx","isApprovedForAll","setApprovedForAll","isApprovalTxPending","handleApprove","nftId","tx","nfts","setNfts","getProMMFarms","options","method","url","params","chain","format","limit","token_addresses","headers","accept","request","then","response","data","result","catch","error","console","blockNumber","history","location","length","map","item","key","name","token_id","margin","padding","toString"],"sources":["/Applications/XAMPP/voxel-interface/src/components/NftPools/NftCards.tsx"],"sourcesContent":["import {  useEffect, useState } from 'react'\nimport { useHistory, useLocation} from 'react-router-dom'\nimport { Flex, Text } from 'rebass'\nimport useTheme from 'hooks/useTheme'\nimport { useBlockNumber} from 'state/application/hooks'\nimport {useFarmAction} from 'state/nfts/promm/hooks'\nimport { useIsTransactionPending } from 'state/transactions/hooks'\nimport styled from 'styled-components'\nimport { ButtonPrimary } from 'components/Button'\nimport { useActiveWeb3React } from 'hooks'\nimport axios from 'axios';\n\n\nexport const NftCard= styled.div`\n    background: #1C1C1C;\n    height: auto;\n    border-radius: 12px;\n    padding: 15px 15px 20px 15px;\n    position: relative;\n    width:320px;\n    margin-right:5px;\n`\nfunction NftCards({stakingAddress,nftAddress}: { stakingAddress:string,nftAddress:string } ) {\n   const theme = useTheme()\n\n   const { chainId,account } = useActiveWeb3React()\n\n\n  const { approve,deposit,isApprovedContract } = useFarmAction(stakingAddress,nftAddress)\n  const [approvalTx, setApprovalTx] = useState('')\n  const [isApprovedForAll, setApprovedForAll] = useState<boolean>(false)\n\n  const isApprovalTxPending = useIsTransactionPending(approvalTx)\n  \n\n  const handleApprove = async (nftId:string) => {\n    if (!isApprovedForAll) {\n      const tx = await approve()\n      setApprovalTx(tx)\n    }else{\n     \n     const tx = await deposit(nftId)\n      setApprovalTx(tx)\n    }\n  }\n\n \n\n  const [nfts, setNfts] = useState<any[]>([])\n  const getProMMFarms = async()=>{\n     setApprovedForAll(await isApprovedContract());\n      const options = {\n      method: 'GET',\n      url: `https://deep-index.moralis.io/api/v2/${account}/nft`,\n      params: {chain: 'goerli', format: 'decimal',limit: '100',token_addresses: nftAddress},\n      headers: {accept: 'application/json', 'X-API-Key': '0w8Ivx0tOflZTjQIb9ITjW2LFU1U243aiNXc6Ccqf9eu9qNajB4F4OSYb9xsxEQZ'}\n    };\n\n    axios\n      .request(options)\n      .then(function (response) {\n        setNfts(response?.data?.result);\n      })\n      .catch(function (error) {\n        console.error(error);\n      });\n  }\n\n  const blockNumber = useBlockNumber()\n\n  useEffect(() => {\n    getProMMFarms()\n  }, [getProMMFarms,approvalTx,isApprovedForAll])\n\n  const history = useHistory()\n  const location = useLocation()\n\n\n  return (\n    <>\n     <Flex>\n     {!nfts.length && <div> No NFTs owned. Please mint some. </div>}\n     {nfts &&\n          nfts?.map((item, key) => (\n          <NftCard key={key}>\n                  \n                    <div className=\"product-card-body\">\n                      <h4 className=\"capitalize\">\n                        {item.name}\n                      </h4>\n                      <p>Token Id: #{item.token_id}</p>\n                    </div>\n                    <div className=\"product-card-footer\">\n                   \n                   <ButtonPrimary style={{ margin: '4px 0 0 0', padding: '16px' }} onClick={() =>handleApprove(item.token_id.toString())}>\n                    <Text fontWeight={500} fontSize={18}>\n                    {isApprovedForAll ? \"Stake Your NFT\" :\"Approve Contract\"\n                    }  \n                    </Text>\n                  </ButtonPrimary>\n                    </div>\n         </NftCard>\n \n\n          ))\n     }\n</Flex>\n    </>\n  )\n}\n\nexport default NftCards\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}