{"ast":null,"code":"import _regeneratorRuntime from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Applications/XAMPP/voxel-interface/src/components/YieldPools/ProMMFarmModals/HarvestModal.tsx\",\n    _s = $RefreshSig$(),\n    _this2 = this,\n    _s2 = $RefreshSig$();\n\nimport { Trans } from \"@lingui/react\";\nimport { CurrencyAmount } from '@kyberswap/ks-sdk-core';\nimport { BigNumber } from 'ethers';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { X } from 'react-feather';\nimport { Flex, Text } from 'rebass';\nimport styled from 'styled-components';\nimport { ButtonEmpty, ButtonPrimary } from 'components/Button';\nimport CurrencyLogo from 'components/CurrencyLogo';\nimport DoubleCurrencyLogo from 'components/DoubleLogo';\nimport HoverInlineText from 'components/HoverInlineText';\nimport Modal from 'components/Modal';\nimport { MouseoverTooltip } from 'components/Tooltip';\nimport { VERSION } from 'constants/v2';\nimport { useToken } from 'hooks/Tokens';\nimport useMixpanel, { MIXPANEL_TYPE } from 'hooks/useMixpanel';\nimport useTheme from 'hooks/useTheme';\nimport { useTokensPrice } from 'state/application/hooks';\nimport { useFarmAction, useProMMFarms } from 'state/farms/promm/hooks';\nimport { StyledInternalLink } from 'theme';\nimport { formatDollarAmount } from 'utils/numbers';\nimport { ModalContentWrapper, Title } from './styled';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar HarvestInfo = styled.div.withConfig({\n  displayName: \"HarvestModal__HarvestInfo\",\n  componentId: \"sc-1by88yp-0\"\n})([\"padding:16px;border-radius:4px;background:\", \";margin-top:18px;font-size:12px;line-height:20px;\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.primary + '33';\n});\n_c = HarvestInfo;\nvar RewardRow = styled.div.withConfig({\n  displayName: \"HarvestModal__RewardRow\",\n  componentId: \"sc-1by88yp-1\"\n})([\"border-radius:999px;padding:8px;background:\", \";display:flex;justify-content:center;align-items:center;gap:8px;margin-top:20px;margin-bottom:24px;\"], function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.buttonBlack;\n});\n_c2 = RewardRow;\n\nfunction HarvestModal(_ref3) {\n  _s();\n\n  var _this = this;\n\n  var farmsAddress = _ref3.farmsAddress,\n      poolId = _ref3.poolId,\n      onDismiss = _ref3.onDismiss;\n  var theme = useTheme();\n\n  var _useProMMFarms = useProMMFarms(),\n      farms = _useProMMFarms.data;\n\n  var selectedFarm = farms[farmsAddress];\n\n  var _useFarmAction = useFarmAction(farmsAddress),\n      harvest = _useFarmAction.harvest;\n\n  var selectedPool = poolId !== null ? selectedFarm[poolId] : undefined;\n  var token0 = useToken(selectedPool === null || selectedPool === void 0 ? void 0 : selectedPool.token0);\n  var token1 = useToken(selectedPool === null || selectedPool === void 0 ? void 0 : selectedPool.token1);\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      usdByToken = _useState2[0],\n      setUsdValueByToken = _useState2[1];\n\n  var _useMixpanel = useMixpanel(),\n      mixpanelHandler = _useMixpanel.mixpanelHandler;\n\n  var aggreateRewardUsdValue = useCallback(function (_ref4) {\n    var address = _ref4.address,\n        value = _ref4.value;\n    setUsdValueByToken(function (prev) {\n      var tmp = _objectSpread({}, prev);\n\n      if (tmp[address]) tmp[address] = tmp[address] + value;else tmp[address] = value;\n      return tmp;\n    });\n  }, []);\n  var rewards = {};\n\n  if (poolId === null) {\n    selectedFarm.forEach(function (farm) {\n      farm.userDepositedNFTs.forEach(function (pos) {\n        pos.rewardPendings.forEach(function (amount, index) {\n          var token = farm.rewardTokens[index];\n          if (rewards[token]) rewards[token] = rewards[token].add(BigNumber.from(amount));else rewards[token] = amount;\n        });\n      });\n    });\n  } else {\n    selectedPool === null || selectedPool === void 0 ? void 0 : selectedPool.userDepositedNFTs.forEach(function (pos) {\n      pos.rewardPendings.forEach(function (amount, index) {\n        var token = selectedPool.rewardTokens[index];\n        if (rewards[token]) rewards[token] = rewards[token].add(BigNumber.from(amount));else rewards[token] = amount;\n      });\n    });\n  }\n\n  var handleHarvest = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var nftIds, poolIds, tx;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              nftIds = [];\n              poolIds = [];\n              if (poolId === null) selectedFarm.forEach(function (farm) {\n                farm.userDepositedNFTs.filter(function (pos) {\n                  return pos.stakedLiquidity.gt(0);\n                }).forEach(function (pos) {\n                  nftIds.push(BigNumber.from(pos.tokenId));\n                  poolIds.push(BigNumber.from(farm.pid));\n                });\n              });else selectedPool === null || selectedPool === void 0 ? void 0 : selectedPool.userDepositedNFTs.filter(function (pos) {\n                return pos.stakedLiquidity.gt(0);\n              }).forEach(function (pos) {\n                nftIds.push(BigNumber.from(pos.tokenId));\n                poolIds.push(BigNumber.from(poolId));\n              });\n              _context.next = 5;\n              return harvest(nftIds, poolIds);\n\n            case 5:\n              tx = _context.sent;\n\n              if (tx) {\n                onDismiss();\n\n                if (poolId === null) {\n                  mixpanelHandler(MIXPANEL_TYPE.ELASTIC_ALLS_REWARD_HARVESTED);\n                } else {\n                  mixpanelHandler(MIXPANEL_TYPE.ELASTIC_INDIVIDUAL_REWARD_HARVESTED);\n                }\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleHarvest() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var addresses = Object.keys(rewards).filter(function (rw) {\n    return rewards[rw].gt(BigNumber.from(0));\n  });\n  var usd = Object.keys(usdByToken).reduce(function (acc, cur) {\n    return acc + usdByToken[cur];\n  }, 0);\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: !!selectedFarm,\n    onDismiss: onDismiss,\n    maxHeight: 80,\n    maxWidth: \"392px\",\n    children: /*#__PURE__*/_jsxDEV(ModalContentWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        children: [/*#__PURE__*/_jsxDEV(Title, {\n          children: poolId === null ? /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Harvest All\"\n          }, void 0, false, void 0, this) : /*#__PURE__*/_jsxDEV(Flex, {\n            children: [/*#__PURE__*/_jsxDEV(DoubleCurrencyLogo, {\n              size: 24,\n              currency0: token0,\n              currency1: token1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 17\n            }, this), ' ', /*#__PURE__*/_jsxDEV(Text, {\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Harvest\"\n              }, void 0, false, void 0, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          sx: {\n            gap: '12px'\n          },\n          children: /*#__PURE__*/_jsxDEV(ButtonEmpty, {\n            onClick: onDismiss,\n            width: \"36px\",\n            height: \"36px\",\n            padding: \"0\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              color: theme.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(HarvestInfo, {\n        children: /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"After harvesting, your rewards will begin vesting linearly (only if the farm has a vesting duration).<0/><1/>Vesting means that your reward tokens will be locked initially but released gradually. You can claim the reward tokens to your wallet as and when they are released.<2/><3/>To claim your rewards, go to the <4> Vesting</4> tab and click 'Claim'.\",\n          components: {\n            0: /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 13\n            }, this),\n            1: /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 13\n            }, this),\n            2: /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 13\n            }, this),\n            3: /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 13\n            }, this),\n            4: /*#__PURE__*/_jsxDEV(StyledInternalLink, {\n              to: \"/farms?type=vesting\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 13\n            }, this)\n          }\n        }, void 0, false, void 0, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        marginTop: \"20px\",\n        justifyContent: \"space-between\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"My Rewards\"\n          }, void 0, false, void 0, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          children: formatDollarAmount(usd)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RewardRow, {\n        children: addresses.map(function (rw, index) {\n          return /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Reward, {\n              token: rw,\n              amount: rewards[rw],\n              onAggreateUsdValue: aggreateRewardUsdValue\n            }, rw, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, _this), index !== addresses.length - 1 && /*#__PURE__*/_jsxDEV(Text, {\n              color: theme.subText,\n              children: \"|\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 50\n            }, _this)]\n          }, void 0, true);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n        onClick: handleHarvest,\n        children: poolId === null ? /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"Harvest All\"\n        }, void 0, false, void 0, this) : /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"Harvest\"\n        }, void 0, false, void 0, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n}\n\n_s(HarvestModal, \"wT3IWr/1WVdwmhRycibZ0YWPJ/Q=\", false, function () {\n  return [useTheme, useProMMFarms, useFarmAction, useToken, useToken, useMixpanel];\n});\n\n_c3 = HarvestModal;\n\nvar Reward = function Reward(_ref6) {\n  _s2();\n\n  var address = _ref6.token,\n      amount = _ref6.amount,\n      onAggreateUsdValue = _ref6.onAggreateUsdValue;\n  var token = useToken(address);\n  var price = useTokensPrice([token], VERSION.ELASTIC);\n  var amountString = amount === null || amount === void 0 ? void 0 : amount.toString();\n  var tokenAmout = useMemo(function () {\n    return token && CurrencyAmount.fromRawAmount(token, amountString || '0');\n  }, [amountString, token]);\n  useEffect(function () {\n    if (price[0] && tokenAmout) {\n      onAggreateUsdValue({\n        address: address,\n        value: price[0] * parseFloat(tokenAmout === null || tokenAmout === void 0 ? void 0 : tokenAmout.toExact())\n      });\n    }\n  }, [tokenAmout, price, address, onAggreateUsdValue]);\n  return /*#__PURE__*/_jsxDEV(Flex, {\n    alignItems: \"center\",\n    sx: {\n      gap: '4px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(HoverInlineText, {\n      text: (tokenAmout === null || tokenAmout === void 0 ? void 0 : tokenAmout.toSignificant(6)) || '0',\n      maxCharacters: 10\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, _this2), /*#__PURE__*/_jsxDEV(MouseoverTooltip, {\n      placement: \"top\",\n      text: token === null || token === void 0 ? void 0 : token.symbol,\n      width: \"fit-content\",\n      children: /*#__PURE__*/_jsxDEV(CurrencyLogo, {\n        currency: token,\n        size: \"16px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, _this2)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, _this2)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 5\n  }, _this2);\n};\n\n_s2(Reward, \"svvvYbhJadHUiJ9dHagIl5ywfUI=\", false, function () {\n  return [useToken, useTokensPrice];\n});\n\n_c4 = Reward;\nexport default HarvestModal;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"HarvestInfo\");\n$RefreshReg$(_c2, \"RewardRow\");\n$RefreshReg$(_c3, \"HarvestModal\");\n$RefreshReg$(_c4, \"Reward\");","map":{"version":3,"names":["CurrencyAmount","BigNumber","React","useCallback","useEffect","useMemo","useState","X","Flex","Text","styled","ButtonEmpty","ButtonPrimary","CurrencyLogo","DoubleCurrencyLogo","HoverInlineText","Modal","MouseoverTooltip","VERSION","useToken","useMixpanel","MIXPANEL_TYPE","useTheme","useTokensPrice","useFarmAction","useProMMFarms","StyledInternalLink","formatDollarAmount","ModalContentWrapper","Title","HarvestInfo","div","theme","primary","RewardRow","buttonBlack","HarvestModal","farmsAddress","poolId","onDismiss","farms","data","selectedFarm","harvest","selectedPool","undefined","token0","token1","usdByToken","setUsdValueByToken","mixpanelHandler","aggreateRewardUsdValue","address","value","prev","tmp","rewards","forEach","farm","userDepositedNFTs","pos","rewardPendings","amount","index","token","rewardTokens","add","from","handleHarvest","nftIds","poolIds","filter","stakedLiquidity","gt","push","tokenId","pid","tx","ELASTIC_ALLS_REWARD_HARVESTED","ELASTIC_INDIVIDUAL_REWARD_HARVESTED","addresses","Object","keys","rw","usd","reduce","acc","cur","gap","text","map","length","subText","Reward","onAggreateUsdValue","price","ELASTIC","amountString","toString","tokenAmout","fromRawAmount","parseFloat","toExact","toSignificant","symbol"],"sources":["/Applications/XAMPP/voxel-interface/src/components/YieldPools/ProMMFarmModals/HarvestModal.tsx"],"sourcesContent":["import { CurrencyAmount } from '@kyberswap/ks-sdk-core'\nimport { Trans } from '@lingui/macro'\nimport { BigNumber } from 'ethers'\nimport React, { useCallback, useEffect, useMemo, useState } from 'react'\nimport { X } from 'react-feather'\nimport { Flex, Text } from 'rebass'\nimport styled from 'styled-components'\n\nimport { ButtonEmpty, ButtonPrimary } from 'components/Button'\nimport CurrencyLogo from 'components/CurrencyLogo'\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\nimport HoverInlineText from 'components/HoverInlineText'\nimport Modal from 'components/Modal'\nimport { MouseoverTooltip } from 'components/Tooltip'\nimport { VERSION } from 'constants/v2'\nimport { useToken } from 'hooks/Tokens'\nimport useMixpanel, { MIXPANEL_TYPE } from 'hooks/useMixpanel'\nimport useTheme from 'hooks/useTheme'\nimport { useTokensPrice } from 'state/application/hooks'\nimport { useFarmAction, useProMMFarms } from 'state/farms/promm/hooks'\nimport { StyledInternalLink } from 'theme'\nimport { formatDollarAmount } from 'utils/numbers'\n\nimport { ModalContentWrapper, Title } from './styled'\n\nconst HarvestInfo = styled.div`\n  padding: 16px;\n  border-radius: 4px;\n  background: ${({ theme }) => theme.primary + '33'};\n  margin-top: 18px;\n  font-size: 12px;\n  line-height: 20px;\n`\n\nconst RewardRow = styled.div`\n  border-radius: 999px;\n  padding: 8px;\n  background: ${({ theme }) => theme.buttonBlack};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n  margin-top: 20px;\n  margin-bottom: 24px;\n`\n\nfunction HarvestModal({\n  farmsAddress,\n  poolId,\n  onDismiss,\n}: {\n  farmsAddress: string\n  // Null mean harvest all\n  poolId: number | null\n  onDismiss: () => void\n}) {\n  const theme = useTheme()\n  const { data: farms } = useProMMFarms()\n  const selectedFarm = farms[farmsAddress]\n\n  const { harvest } = useFarmAction(farmsAddress)\n  const selectedPool = poolId !== null ? selectedFarm[poolId] : undefined\n  const token0 = useToken(selectedPool?.token0)\n  const token1 = useToken(selectedPool?.token1)\n\n  const [usdByToken, setUsdValueByToken] = useState<{ [address: string]: number }>({})\n  const { mixpanelHandler } = useMixpanel()\n  const aggreateRewardUsdValue = useCallback(({ address, value }: { address: string; value: number }) => {\n    setUsdValueByToken(prev => {\n      const tmp = { ...prev }\n      if (tmp[address]) tmp[address] = tmp[address] + value\n      else tmp[address] = value\n\n      return tmp\n    })\n  }, [])\n\n  const rewards: { [address: string]: BigNumber } = {}\n\n  if (poolId === null) {\n    selectedFarm.forEach(farm => {\n      farm.userDepositedNFTs.forEach(pos => {\n        pos.rewardPendings.forEach((amount, index) => {\n          const token = farm.rewardTokens[index]\n          if (rewards[token]) rewards[token] = rewards[token].add(BigNumber.from(amount))\n          else rewards[token] = amount\n        })\n      })\n    })\n  } else {\n    selectedPool?.userDepositedNFTs.forEach(pos => {\n      pos.rewardPendings.forEach((amount, index) => {\n        const token = selectedPool.rewardTokens[index]\n        if (rewards[token]) rewards[token] = rewards[token].add(BigNumber.from(amount))\n        else rewards[token] = amount\n      })\n    })\n  }\n\n  const handleHarvest = async () => {\n    const nftIds: BigNumber[] = []\n    const poolIds: BigNumber[] = []\n\n    if (poolId === null)\n      selectedFarm.forEach(farm => {\n        farm.userDepositedNFTs\n          .filter(pos => pos.stakedLiquidity.gt(0))\n          .forEach(pos => {\n            nftIds.push(BigNumber.from(pos.tokenId))\n            poolIds.push(BigNumber.from(farm.pid))\n          })\n      })\n    else\n      selectedPool?.userDepositedNFTs\n        .filter(pos => pos.stakedLiquidity.gt(0))\n        .forEach(pos => {\n          nftIds.push(BigNumber.from(pos.tokenId))\n          poolIds.push(BigNumber.from(poolId))\n        })\n\n    const tx = await harvest(nftIds, poolIds)\n    if (tx) {\n      onDismiss()\n      if (poolId === null) {\n        mixpanelHandler(MIXPANEL_TYPE.ELASTIC_ALLS_REWARD_HARVESTED)\n      } else {\n        mixpanelHandler(MIXPANEL_TYPE.ELASTIC_INDIVIDUAL_REWARD_HARVESTED)\n      }\n    }\n  }\n\n  const addresses = Object.keys(rewards).filter(rw => rewards[rw].gt(BigNumber.from(0)))\n\n  const usd = Object.keys(usdByToken).reduce((acc, cur) => acc + usdByToken[cur], 0)\n\n  return (\n    <Modal isOpen={!!selectedFarm} onDismiss={onDismiss} maxHeight={80} maxWidth=\"392px\">\n      <ModalContentWrapper>\n        <Flex alignItems=\"center\" justifyContent=\"space-between\">\n          <Title>\n            {poolId === null ? (\n              <Trans>Harvest All</Trans>\n            ) : (\n              <Flex>\n                <DoubleCurrencyLogo size={24} currency0={token0} currency1={token1} />{' '}\n                <Text>\n                  <Trans>Harvest</Trans>\n                </Text>\n              </Flex>\n            )}\n          </Title>\n\n          <Flex sx={{ gap: '12px' }}>\n            <ButtonEmpty onClick={onDismiss} width=\"36px\" height=\"36px\" padding=\"0\">\n              <X color={theme.text} />\n            </ButtonEmpty>\n          </Flex>\n        </Flex>\n\n        <HarvestInfo>\n          <Trans>\n            After harvesting, your rewards will begin vesting linearly (only if the farm has a vesting duration).\n            <br />\n            <br />\n            Vesting means that your reward tokens will be locked initially but released gradually. You can claim the\n            reward tokens to your wallet as and when they are released.\n            <br />\n            <br />\n            To claim your rewards, go to the{' '}\n            <StyledInternalLink to=\"/farms?type=vesting\"> Vesting</StyledInternalLink> tab and click\n            &apos;Claim&apos;.\n          </Trans>\n        </HarvestInfo>\n\n        <Flex marginTop=\"20px\" justifyContent=\"space-between\">\n          <Text>\n            <Trans>My Rewards</Trans>\n          </Text>\n          <Text>{formatDollarAmount(usd)}</Text>\n        </Flex>\n\n        <RewardRow>\n          {addresses.map((rw, index) => (\n            <>\n              <Reward key={rw} token={rw} amount={rewards[rw]} onAggreateUsdValue={aggreateRewardUsdValue} />\n              {index !== addresses.length - 1 && <Text color={theme.subText}>|</Text>}\n            </>\n          ))}\n        </RewardRow>\n\n        <ButtonPrimary onClick={handleHarvest}>\n          {poolId === null ? <Trans>Harvest All</Trans> : <Trans>Harvest</Trans>}\n        </ButtonPrimary>\n      </ModalContentWrapper>\n    </Modal>\n  )\n}\n\nconst Reward = ({\n  token: address,\n  amount,\n  onAggreateUsdValue,\n}: {\n  token: string\n  amount?: BigNumber\n  onAggreateUsdValue: (input: { address: string; value: number }) => void\n}) => {\n  const token = useToken(address)\n\n  const price = useTokensPrice([token], VERSION.ELASTIC)\n\n  const amountString = amount?.toString()\n\n  const tokenAmout = useMemo(() => {\n    return token && CurrencyAmount.fromRawAmount(token, amountString || '0')\n  }, [amountString, token])\n\n  useEffect(() => {\n    if (price[0] && tokenAmout) {\n      onAggreateUsdValue({ address, value: price[0] * parseFloat(tokenAmout?.toExact()) })\n    }\n  }, [tokenAmout, price, address, onAggreateUsdValue])\n\n  return (\n    <Flex alignItems=\"center\" sx={{ gap: '4px' }}>\n      <HoverInlineText text={tokenAmout?.toSignificant(6) || '0'} maxCharacters={10}></HoverInlineText>\n      <MouseoverTooltip placement=\"top\" text={token?.symbol} width=\"fit-content\">\n        <CurrencyLogo currency={token} size=\"16px\" />\n      </MouseoverTooltip>\n    </Flex>\n  )\n}\n\nexport default HarvestModal\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}