{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { ChainId, WETH } from '@kyberswap/ks-sdk-core';\nimport { useMemo } from 'react';\nimport useSWR from 'swr';\nimport { COINGECKO_API_URL, KNC, KNC_COINGECKO_ID, ZERO_ADDRESS } from 'constants/index';\nimport { NETWORKS_INFO } from 'constants/networks';\nimport { useActiveWeb3React } from 'hooks';\n\nvar fetcher = function fetcher(url) {\n  return fetch(url).then(function (r) {\n    return r.json();\n  });\n};\n\nexport function useKNCMarketPrice() {\n  _s();\n\n  var _data$KNC_COINGECKO_I;\n\n  var url = \"\".concat(COINGECKO_API_URL, \"/simple/price?ids=\").concat(KNC_COINGECKO_ID, \"&vs_currencies=usd\");\n\n  var _useSWR = useSWR(url, fetcher, {\n    refreshInterval: 30000,\n    onErrorRetry: function onErrorRetry(error, key, config, revalidate, _ref) {\n      var retryCount = _ref.retryCount;\n      // Never retry on 404.\n      if (error.status === 404) return; // Only retry up to 10 times.\n\n      if (retryCount >= 10) return;\n\n      if (error.status === 403) {\n        // If API return 403, retry after 30 seconds.\n        setTimeout(function () {\n          return revalidate({\n            retryCount: retryCount\n          });\n        }, 30000);\n        return;\n      } // Retry after 20 seconds.\n\n\n      setTimeout(function () {\n        return revalidate({\n          retryCount: retryCount\n        });\n      }, 20000);\n    }\n  }),\n      data = _useSWR.data,\n      error = _useSWR.error;\n\n  if (error && process.env.NODE_ENV === 'development') {\n    console.error(error);\n  }\n\n  return (data === null || data === void 0 ? void 0 : (_data$KNC_COINGECKO_I = data[KNC_COINGECKO_ID]) === null || _data$KNC_COINGECKO_I === void 0 ? void 0 : _data$KNC_COINGECKO_I.usd) || 0;\n}\n\n_s(useKNCMarketPrice, \"r2QYs02BSrn+Eu/1uMGZi8N+HnQ=\", false, function () {\n  return [useSWR];\n});\n\nexport default function useTokensMarketPrice(tokens) {\n  _s2();\n\n  var _useActiveWeb3React = useActiveWeb3React(),\n      chainId = _useActiveWeb3React.chainId;\n\n  var kncPrice = useKNCMarketPrice();\n  var tokenAddress = tokens.filter(Boolean).map(function (token) {\n    return token !== null && token !== void 0 && token.isNative || (token === null || token === void 0 ? void 0 : token.address) === ZERO_ADDRESS ? WETH[chainId || ChainId.MAINNET].address : token === null || token === void 0 ? void 0 : token.address;\n  });\n  var url = \"\".concat(COINGECKO_API_URL, \"/simple/token_price/\").concat(NETWORKS_INFO[chainId || ChainId.MAINNET].coingeckoNetworkId, \"?contract_addresses=\").concat(tokenAddress.join(), \"&vs_currencies=usd\");\n\n  var _useSWR2 = useSWR(url, fetcher, {\n    refreshInterval: 30000,\n    onErrorRetry: function onErrorRetry(error, key, config, revalidate, _ref2) {\n      var retryCount = _ref2.retryCount;\n      // Never retry on 404.\n      if (error.status === 404) return; // Only retry up to 10 times.\n\n      if (retryCount >= 10) return;\n\n      if (error.status === 403) {\n        // If API return 403, retry after 30 seconds.\n        setTimeout(function () {\n          return revalidate({\n            retryCount: retryCount\n          });\n        }, 30000);\n        return;\n      } // Retry after 20 seconds.\n\n\n      setTimeout(function () {\n        return revalidate({\n          retryCount: retryCount\n        });\n      }, 20000);\n    }\n  }),\n      data = _useSWR2.data,\n      error = _useSWR2.error;\n\n  if (error && process.env.NODE_ENV === 'development') {\n    console.error(error);\n  }\n\n  return useMemo(function () {\n    return tokens.map(function (token) {\n      var _token$address, _data$WETH$address$to, _data$WETH$address$to2, _data$token$address$t, _data$token$address$t2, _token$address2;\n\n      if (!token || !token.address) return 0;\n      if (token.address.toLowerCase() === KNC[chainId].address.toLowerCase()) return kncPrice;\n      if (!data || !data[token === null || token === void 0 ? void 0 : (_token$address = token.address) === null || _token$address === void 0 ? void 0 : _token$address.toLowerCase()]) return 0;\n      if (token.isNative || token.address === ZERO_ADDRESS) return (_data$WETH$address$to = (_data$WETH$address$to2 = data[WETH[chainId || ChainId.MAINNET].address.toLowerCase()]) === null || _data$WETH$address$to2 === void 0 ? void 0 : _data$WETH$address$to2.usd) !== null && _data$WETH$address$to !== void 0 ? _data$WETH$address$to : 0;\n      return (_data$token$address$t = (_data$token$address$t2 = data[token === null || token === void 0 ? void 0 : (_token$address2 = token.address) === null || _token$address2 === void 0 ? void 0 : _token$address2.toLowerCase()]) === null || _data$token$address$t2 === void 0 ? void 0 : _data$token$address$t2.usd) !== null && _data$token$address$t !== void 0 ? _data$token$address$t : 0;\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [chainId, data, JSON.stringify(tokens)]);\n}\n\n_s2(useTokensMarketPrice, \"buZUa2ndCLD9IuBgu5X8Brdh3Z4=\", false, function () {\n  return [useActiveWeb3React, useKNCMarketPrice, useSWR];\n});","map":{"version":3,"names":["ChainId","WETH","useMemo","useSWR","COINGECKO_API_URL","KNC","KNC_COINGECKO_ID","ZERO_ADDRESS","NETWORKS_INFO","useActiveWeb3React","fetcher","url","fetch","then","r","json","useKNCMarketPrice","refreshInterval","onErrorRetry","error","key","config","revalidate","retryCount","status","setTimeout","data","process","env","NODE_ENV","console","usd","useTokensMarketPrice","tokens","chainId","kncPrice","tokenAddress","filter","Boolean","map","token","isNative","address","MAINNET","coingeckoNetworkId","join","toLowerCase","JSON","stringify"],"sources":["/Applications/XAMPP/voxel-interface/src/hooks/useTokensMarketPrice.ts"],"sourcesContent":["import { ChainId, Token, WETH } from '@kyberswap/ks-sdk-core'\nimport { useMemo } from 'react'\nimport useSWR from 'swr'\n\nimport { COINGECKO_API_URL, KNC, KNC_COINGECKO_ID, ZERO_ADDRESS } from 'constants/index'\nimport { NETWORKS_INFO } from 'constants/networks'\nimport { useActiveWeb3React } from 'hooks'\n\nconst fetcher = (url: string) => fetch(url).then(r => r.json())\n\nexport function useKNCMarketPrice() {\n  const url = `${COINGECKO_API_URL}/simple/price?ids=${KNC_COINGECKO_ID}&vs_currencies=usd`\n\n  const { data, error } = useSWR(url, fetcher, {\n    refreshInterval: 30000,\n    onErrorRetry: (error, key, config, revalidate, { retryCount }) => {\n      // Never retry on 404.\n      if (error.status === 404) return\n\n      // Only retry up to 10 times.\n      if (retryCount >= 10) return\n\n      if (error.status === 403) {\n        // If API return 403, retry after 30 seconds.\n        setTimeout(() => revalidate({ retryCount }), 30000)\n        return\n      }\n\n      // Retry after 20 seconds.\n      setTimeout(() => revalidate({ retryCount }), 20000)\n    },\n  })\n\n  if (error && process.env.NODE_ENV === 'development') {\n    console.error(error)\n  }\n\n  return data?.[KNC_COINGECKO_ID]?.usd || 0\n}\n\nexport default function useTokensMarketPrice(tokens: (Token | null | undefined)[]) {\n  const { chainId } = useActiveWeb3React()\n  const kncPrice = useKNCMarketPrice()\n\n  const tokenAddress = tokens\n    .filter(Boolean)\n    .map(token =>\n      token?.isNative || token?.address === ZERO_ADDRESS ? WETH[chainId || ChainId.MAINNET].address : token?.address,\n    )\n\n  const url = `${COINGECKO_API_URL}/simple/token_price/${\n    NETWORKS_INFO[chainId || ChainId.MAINNET].coingeckoNetworkId\n  }?contract_addresses=${tokenAddress.join()}&vs_currencies=usd`\n\n  const { data, error } = useSWR(url, fetcher, {\n    refreshInterval: 30000,\n    onErrorRetry: (error, key, config, revalidate, { retryCount }) => {\n      // Never retry on 404.\n      if (error.status === 404) return\n\n      // Only retry up to 10 times.\n      if (retryCount >= 10) return\n\n      if (error.status === 403) {\n        // If API return 403, retry after 30 seconds.\n        setTimeout(() => revalidate({ retryCount }), 30000)\n        return\n      }\n\n      // Retry after 20 seconds.\n      setTimeout(() => revalidate({ retryCount }), 20000)\n    },\n  })\n\n  if (error && process.env.NODE_ENV === 'development') {\n    console.error(error)\n  }\n\n  return useMemo(() => {\n    return tokens.map(token => {\n      if (!token || !token.address) return 0\n\n      if (token.address.toLowerCase() === KNC[chainId as ChainId].address.toLowerCase()) return kncPrice\n\n      if (!data || !data[token?.address?.toLowerCase()]) return 0\n\n      if (token.isNative || token.address === ZERO_ADDRESS)\n        return data[WETH[chainId || ChainId.MAINNET].address.toLowerCase()]?.usd ?? 0\n\n      return data[token?.address?.toLowerCase()]?.usd ?? 0\n    })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [chainId, data, JSON.stringify(tokens)])\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}