{"ast":null,"code":"import _classCallCheck from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { _optionalChain } from '@sentry/utils/esm/buildPolyfills';\nimport { loadModule, logger, fill } from '@sentry/utils';\n/** Tracing integration for node-mysql package */\n\nvar Mysql = /*#__PURE__*/function () {\n  function Mysql() {\n    _classCallCheck(this, Mysql);\n\n    Mysql.prototype.__init.call(this);\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  _createClass(Mysql, [{\n    key: \"__init\",\n    value:\n    /**\n     * @inheritDoc\n     */\n    function __init() {\n      this.name = Mysql.id;\n    }\n    /**\n     * @inheritDoc\n     */\n\n  }, {\n    key: \"setupOnce\",\n    value: function setupOnce(_, getCurrentHub) {\n      var pkg = loadModule('mysql/lib/Connection.js');\n\n      if (!pkg) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Mysql Integration was unable to require `mysql` package.');\n        return;\n      } // The original function will have one of these signatures:\n      //    function (callback) => void\n      //    function (options, callback) => void\n      //    function (options, values, callback) => void\n\n\n      fill(pkg, 'createQuery', function (orig) {\n        return function (options, values, callback) {\n          var scope = getCurrentHub().getScope();\n\n          var parentSpan = _optionalChain([scope, 'optionalAccess', function (_2) {\n            return _2.getSpan;\n          }, 'call', function (_3) {\n            return _3();\n          }]);\n\n          var span = _optionalChain([parentSpan, 'optionalAccess', function (_4) {\n            return _4.startChild;\n          }, 'call', function (_5) {\n            return _5({\n              description: typeof options === 'string' ? options : options.sql,\n              op: 'db'\n            });\n          }]);\n\n          if (typeof callback === 'function') {\n            return orig.call(this, options, values, function (err, result, fields) {\n              _optionalChain([span, 'optionalAccess', function (_6) {\n                return _6.finish;\n              }, 'call', function (_7) {\n                return _7();\n              }]);\n\n              callback(err, result, fields);\n            });\n          }\n\n          if (typeof values === 'function') {\n            return orig.call(this, options, function (err, result, fields) {\n              _optionalChain([span, 'optionalAccess', function (_8) {\n                return _8.finish;\n              }, 'call', function (_9) {\n                return _9();\n              }]);\n\n              values(err, result, fields);\n            });\n          }\n\n          return orig.call(this, options, values, callback);\n        };\n      });\n    }\n  }], [{\n    key: \"__initStatic\",\n    value: function __initStatic() {\n      this.id = 'Mysql';\n    }\n  }]);\n\n  return Mysql;\n}();\n\nMysql.__initStatic();\n\nexport { Mysql };","map":null,"metadata":{},"sourceType":"module"}