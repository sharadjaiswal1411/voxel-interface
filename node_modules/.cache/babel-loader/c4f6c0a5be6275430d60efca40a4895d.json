{"ast":null,"code":"import _regeneratorRuntime from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _taggedTemplateLiteral from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\n\nvar _jsxFileName = \"/Applications/XAMPP/voxel-interface/src/components/WalletModal/index.tsx\",\n    _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _s = $RefreshSig$();\n\nimport { Trans } from \"@lingui/react\";\nimport { i18n } from \"@lingui/core\";\nimport { UnsupportedChainIdError, useWeb3React } from '@web3-react/core';\nimport { WalletConnectConnector } from '@web3-react/walletconnect-connector';\nimport { useEffect, useState } from 'react';\nimport { isMobile } from 'react-device-detect';\nimport { ChevronLeft } from 'react-feather';\nimport { useLocation } from 'react-router-dom';\nimport { useLocalStorage } from 'react-use';\nimport styled from 'styled-components';\nimport WrongNetworkModal from 'components/WrongNetworkModal';\nimport useMixpanel, { MIXPANEL_TYPE } from 'hooks/useMixpanel';\nimport useTheme from 'hooks/useTheme';\nimport checkForBraveBrowser from 'utils/checkForBraveBrowser';\nimport { ReactComponent as Close } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/images/x.svg\";\nimport { braveInjectedConnector, coin98InjectedConnector, fortmatic, injected, portis } from '../../connectors';\nimport { OVERLAY_READY } from '../../connectors/Fortmatic';\nimport { SUPPORTED_WALLETS } from '../../constants';\nimport usePrevious from '../../hooks/usePrevious';\nimport { ApplicationModal } from '../../state/application/actions';\nimport { useModalOpen, useWalletModalToggle } from '../../state/application/hooks';\nimport { useIsDarkMode } from '../../state/user/hooks';\nimport { ExternalLink } from '../../theme';\nimport AccountDetails from '../AccountDetails';\nimport Modal from '../Modal';\nimport InstallBraveNote from './InstallBraveNote';\nimport Option from './Option';\nimport PendingView from './PendingView';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar CloseIcon = styled.div.withConfig({\n  displayName: \"WalletModal__CloseIcon\",\n  componentId: \"sc-e1v1xi-0\"\n})([\"position:absolute;right:1rem;top:16px;padding:8px;&:hover{cursor:pointer;opacity:0.6;}\"]);\n_c = CloseIcon;\nvar CloseColor = styled(Close).withConfig({\n  displayName: \"WalletModal__CloseColor\",\n  componentId: \"sc-e1v1xi-1\"\n})([\"path{stroke:\", \";}\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.text4;\n});\n_c2 = CloseColor;\nvar Wrapper = styled.div.withConfig({\n  displayName: \"WalletModal__Wrapper\",\n  componentId: \"sc-e1v1xi-2\"\n})([\"\", \" margin:0;padding:0;width:100%;\"], function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.flexColumnNoWrap;\n});\n_c3 = Wrapper;\nvar HeaderRow = styled.div.withConfig({\n  displayName: \"WalletModal__HeaderRow\",\n  componentId: \"sc-e1v1xi-3\"\n})([\"\", \";padding:\", \";font-weight:500;color:\", \";\", \";\"], function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.flexRowNoWrap;\n}, function (_ref4) {\n  var padding = _ref4.padding;\n  return padding !== null && padding !== void 0 ? padding : '1.5rem 2rem 0 2rem';\n}, function (props) {\n  return props.color === 'blue' ? function (_ref5) {\n    var theme = _ref5.theme;\n    return theme.primary;\n  } : 'inherit';\n}, function (_ref6) {\n  var theme = _ref6.theme;\n  return theme.mediaWidth.upToMedium(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    padding: 1.5rem 1rem 1rem;\\n  \"])));\n});\n_c4 = HeaderRow;\nvar ContentWrapper = styled.div.withConfig({\n  displayName: \"WalletModal__ContentWrapper\",\n  componentId: \"sc-e1v1xi-4\"\n})([\"padding:\", \";border-bottom-left-radius:20px;border-bottom-right-radius:20px;\", \";\"], function (_ref7) {\n  var padding = _ref7.padding;\n  return padding !== null && padding !== void 0 ? padding : '2rem';\n}, function (_ref8) {\n  var theme = _ref8.theme;\n  return theme.mediaWidth.upToMedium(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"padding: 1rem\"])));\n});\n_c5 = ContentWrapper;\nvar TermAndCondition = styled.div.withConfig({\n  displayName: \"WalletModal__TermAndCondition\",\n  componentId: \"sc-e1v1xi-5\"\n})([\"\", \";padding:32px 2rem 0px 2rem;font-weight:500;color:\", \";\", \";accent-color:\", \";\"], function (_ref9) {\n  var theme = _ref9.theme;\n  return theme.flexRowNoWrap;\n}, function (props) {\n  return props.color === 'blue' ? function (_ref10) {\n    var theme = _ref10.theme;\n    return theme.primary;\n  } : 'inherit';\n}, function (_ref11) {\n  var theme = _ref11.theme;\n  return theme.mediaWidth.upToMedium(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n    padding: 1rem;\\n  \"])));\n}, function (_ref12) {\n  var theme = _ref12.theme;\n  return theme.primary;\n});\n_c6 = TermAndCondition;\nvar UpperSection = styled.div.withConfig({\n  displayName: \"WalletModal__UpperSection\",\n  componentId: \"sc-e1v1xi-6\"\n})([\"position:relative;h5{margin:0;margin-bottom:0.5rem;font-size:1rem;font-weight:400;}h5:last-child{margin-bottom:0px;}h4{margin-top:0;font-weight:500;}\"]);\n_c7 = UpperSection;\nvar OptionGrid = styled.div.withConfig({\n  displayName: \"WalletModal__OptionGrid\",\n  componentId: \"sc-e1v1xi-7\"\n})([\"display:grid;grid-template-columns:1fr 1fr;gap:20px;\", \";\"], function (_ref13) {\n  var theme = _ref13.theme;\n  return theme.mediaWidth.upToMedium(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n    grid-template-columns: 1fr;\\n    grid-gap: 10px;\\n  \"])));\n});\n_c8 = OptionGrid;\nvar HoverText = styled.div.withConfig({\n  displayName: \"WalletModal__HoverText\",\n  componentId: \"sc-e1v1xi-8\"\n})([\"display:flex;gap:4px;align-items:center;font-size:18px;:hover{cursor:pointer;}\"]);\n_c9 = HoverText;\nvar ToSText = styled.span.withConfig({\n  displayName: \"WalletModal__ToSText\",\n  componentId: \"sc-e1v1xi-9\"\n})([\"color:\", \";font-weight:500;\"], function (_ref14) {\n  var theme = _ref14.theme;\n  return theme.text9;\n});\n_c10 = ToSText;\nvar WALLET_VIEWS = {\n  OPTIONS: 'options',\n  OPTIONS_SECONDARY: 'options_secondary',\n  ACCOUNT: 'account',\n  PENDING: 'pending'\n};\nexport default function WalletModal(_ref15) {\n  _s();\n\n  var pendingTransactions = _ref15.pendingTransactions,\n      confirmedTransactions = _ref15.confirmedTransactions,\n      ENSName = _ref15.ENSName;\n\n  // important that these are destructed from the account-specific web3-react context\n  var _useWeb3React = useWeb3React(),\n      active = _useWeb3React.active,\n      account = _useWeb3React.account,\n      connector = _useWeb3React.connector,\n      activate = _useWeb3React.activate,\n      error = _useWeb3React.error;\n\n  var theme = useTheme();\n\n  var _useState = useState(WALLET_VIEWS.ACCOUNT),\n      _useState2 = _slicedToArray(_useState, 2),\n      walletView = _useState2[0],\n      setWalletView = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pendingWallet = _useState4[0],\n      setPendingWallet = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pendingError = _useState6[0],\n      setPendingError = _useState6[1];\n\n  var walletModalOpen = useModalOpen(ApplicationModal.WALLET);\n  var toggleWalletModal = useWalletModalToggle();\n  var previousAccount = usePrevious(account);\n  var isDarkMode = useIsDarkMode();\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isAccepted = _useState8[0],\n      setIsAccepted = _useState8[1];\n\n  var isWrongNetwork = error instanceof UnsupportedChainIdError;\n  var location = useLocation();\n\n  var _useMixpanel = useMixpanel(),\n      mixpanelHandler = _useMixpanel.mixpanelHandler; // need to call this inside a Component as there's an async call in `checkForBraveBrowser`\n\n\n  var isBraveBrowser = checkForBraveBrowser(); // close on connection, when logged out before\n\n  useEffect(function () {\n    if (account && !previousAccount && walletModalOpen) {\n      if (location.pathname.startsWith('/campaigns')) {\n        mixpanelHandler(MIXPANEL_TYPE.CAMPAIGN_WALLET_CONNECTED);\n      }\n\n      toggleWalletModal();\n    }\n  }, [account, previousAccount, toggleWalletModal, walletModalOpen, location.pathname, mixpanelHandler]); // always reset to account view\n\n  useEffect(function () {\n    if (walletModalOpen) {\n      setPendingError(false);\n      setWalletView(WALLET_VIEWS.ACCOUNT);\n    }\n  }, [walletModalOpen]); // close modal when a connection is successful\n\n  var activePrevious = usePrevious(active);\n  var connectorPrevious = usePrevious(connector);\n  useEffect(function () {\n    if (walletModalOpen && (active && !activePrevious || connector && connector !== connectorPrevious && !error)) {\n      setWalletView(WALLET_VIEWS.ACCOUNT);\n    }\n  }, [setWalletView, active, error, connector, walletModalOpen, activePrevious, connectorPrevious]);\n\n  var _useLocalStorage = useLocalStorage('user-manually-disconnect'),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 2),\n      setIsUserManuallyDisconnect = _useLocalStorage2[1];\n\n  var tryActivation = /*#__PURE__*/function () {\n    var _ref16 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(connector) {\n      var _connector$walletConn, _connector$walletConn2;\n\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setPendingWallet(connector); // set wallet for pending view\n\n              setWalletView(WALLET_VIEWS.PENDING);\n\n              if (!(connector === braveInjectedConnector && !isBraveBrowser)) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 4:\n              // if the connector is walletconnect and the user has already tried to connect, manually reset the connector\n              if (connector instanceof WalletConnectConnector && (_connector$walletConn = connector.walletConnectProvider) !== null && _connector$walletConn !== void 0 && (_connector$walletConn2 = _connector$walletConn.wc) !== null && _connector$walletConn2 !== void 0 && _connector$walletConn2.uri) {\n                connector.walletConnectProvider = undefined;\n              }\n\n              if (!connector) {\n                _context.next = 8;\n                break;\n              }\n\n              _context.next = 8;\n              return activate(connector, undefined, true).then(function () {\n                setIsUserManuallyDisconnect(false);\n              }).catch(function (error) {\n                if (error instanceof UnsupportedChainIdError) {\n                  activate(connector);\n                } else {\n                  setPendingError(true);\n                }\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function tryActivation(_x) {\n      return _ref16.apply(this, arguments);\n    };\n  }(); // close wallet modal if fortmatic modal is active\n\n\n  useEffect(function () {\n    fortmatic.on(OVERLAY_READY, function () {\n      toggleWalletModal();\n    });\n  }, [toggleWalletModal]);\n\n  var handleAccept = function handleAccept() {\n    setIsAccepted(!isAccepted);\n  }; // get wallets user can switch too, depending on device/browser\n\n\n  function getOptions() {\n    var _this = this;\n\n    var isMetamask = window.ethereum && window.ethereum.isMetaMask;\n    return Object.keys(SUPPORTED_WALLETS).map(function (key) {\n      var option = SUPPORTED_WALLETS[key]; // check for mobile options\n\n      if (isMobile) {\n        //disable portis on mobile for now\n        if (option.connector === portis) {\n          return null;\n        }\n\n        if (!window.web3 && !window.ethereum && option.mobile || // add this condition below for Brave browser. In Brave, window.ethereum is not undefined\n        // the above condition fails and there are no wallet options to choose\n        option.mobile && isBraveBrowser) {\n          return /*#__PURE__*/_jsxDEV(Option, {\n            onClick: function onClick() {\n              option.connector !== connector && !option.href && tryActivation(option.connector);\n            },\n            id: \"connect-\".concat(key),\n            active: option.connector && option.connector === connector,\n            color: option.color,\n            link: option.href,\n            header: option.name,\n            subheader: null,\n            icon: require(\"../../assets/images/\".concat(isDarkMode ? '' : 'light-').concat(option.iconName)).default\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, _this);\n        }\n\n        return null;\n      } // overwrite injected when needed\n\n\n      if (option.connector === injected) {\n        var _window$ethereum;\n\n        // don't show injected if there's no injected provider\n        if (!(window.web3 || (_window$ethereum = window.ethereum) !== null && _window$ethereum !== void 0 && _window$ethereum.isMetaMask)) {\n          if (option.name === 'MetaMask') {\n            return /*#__PURE__*/_jsxDEV(Option, {\n              id: \"connect-\".concat(key),\n              color: '#E8831D',\n              header: 'Install Metamask',\n              subheader: null,\n              link: 'https://metamask.io/',\n              icon: require(\"../../assets/images/\".concat(isDarkMode ? '' : 'light-').concat(option.iconName)).default\n            }, key, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 17\n            }, _this);\n          } else {\n            return null; //dont want to return install twice\n          }\n        } // don't return metamask if injected provider isn't metamask\n        else if (option.name === 'MetaMask' && !isMetamask) {\n          return null;\n        } // likewise for generic\n        else if (option.name === 'Injected' && isMetamask) {\n          return null;\n        }\n      }\n\n      if (option.connector === coin98InjectedConnector) {\n        var _window$ethereum2;\n\n        if (!(window.web3 || (_window$ethereum2 = window.ethereum) !== null && _window$ethereum2 !== void 0 && _window$ethereum2.isCoin98)) {\n          return /*#__PURE__*/_jsxDEV(Option, {\n            id: \"connect-\".concat(key),\n            color: '#E8831D',\n            header: 'Install Coin98',\n            link: 'https://coin98.com/',\n            icon: require(\"../../assets/images/\".concat(isDarkMode ? '' : 'light-').concat(option.iconName)).default\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 15\n          }, _this);\n        }\n      } // return rest of options\n\n\n      return !isMobile && !option.mobileOnly && /*#__PURE__*/_jsxDEV(Option, {\n        clickable: isAccepted,\n        id: \"connect-\".concat(key),\n        onClick: function onClick() {\n          option.connector === connector ? setWalletView(WALLET_VIEWS.ACCOUNT) : !option.href && tryActivation(option.connector);\n        },\n        active: option.connector === connector,\n        color: option.color,\n        link: option.href,\n        header: option.name,\n        subheader: null //use option.descriptio to bring back multi-line\n        ,\n        icon: require(\"../../assets/images/\".concat(isDarkMode ? '' : 'light-').concat(option.iconName)).default\n      }, key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 13\n      }, _this);\n    }).filter(Boolean);\n  }\n\n  function getModalContent() {\n    var _this2 = this;\n\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: isWrongNetwork ? /*#__PURE__*/_jsxDEV(WrongNetworkModal, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(UpperSection, {\n          children: [/*#__PURE__*/_jsxDEV(CloseIcon, {\n            onClick: toggleWalletModal,\n            children: /*#__PURE__*/_jsxDEV(CloseColor, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(HeaderRow, {\n            padding: \"1rem\",\n            children: 'Error connecting'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ContentWrapper, {\n            padding: \"1rem 1.5rem 1.5rem\",\n            children:\n            /*i18n*/\n            i18n._(\"Error connecting. Try refreshing the page.\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this)\n      }, void 0, false);\n    }\n\n    if (account && walletView === WALLET_VIEWS.ACCOUNT) {\n      return /*#__PURE__*/_jsxDEV(AccountDetails, {\n        toggleWalletModal: toggleWalletModal,\n        pendingTransactions: pendingTransactions,\n        confirmedTransactions: confirmedTransactions,\n        ENSName: ENSName,\n        openOptions: function openOptions() {\n          return setWalletView(WALLET_VIEWS.OPTIONS);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this);\n    }\n\n    var shouldShowInstallBrave = !isBraveBrowser && pendingWallet === braveInjectedConnector;\n    var walletOptionKey = Object.keys(SUPPORTED_WALLETS).find(function (key) {\n      var wallet = SUPPORTED_WALLETS[key];\n      return wallet.connector === connector;\n    });\n    return /*#__PURE__*/_jsxDEV(UpperSection, {\n      children: [/*#__PURE__*/_jsxDEV(CloseIcon, {\n        onClick: toggleWalletModal,\n        children: /*#__PURE__*/_jsxDEV(CloseColor, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), walletView !== WALLET_VIEWS.ACCOUNT ? /*#__PURE__*/_jsxDEV(HeaderRow, {\n        children: /*#__PURE__*/_jsxDEV(HoverText, {\n          onClick: function onClick() {\n            setPendingError(false);\n            setWalletView(WALLET_VIEWS.ACCOUNT);\n          },\n          children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n            color: theme.primary\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Back\"\n          }, void 0, false, void 0, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(HeaderRow, {\n        children: /*#__PURE__*/_jsxDEV(HoverText, {\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Connect your Wallet\"\n          }, void 0, false, void 0, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TermAndCondition, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: isAccepted,\n          onChange: handleAccept,\n          style: {\n            marginRight: '12px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ToSText, {\n          children: [/*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Accept\"\n          }, void 0, false, void 0, this), ' ', /*#__PURE__*/_jsxDEV(ExternalLink, {\n            href: \"/15022022KyberSwapTermsofUse.pdf\",\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Terms of Use\"\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this), ' ', /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"and\"\n          }, void 0, false, void 0, this), ' ', /*#__PURE__*/_jsxDEV(ExternalLink, {\n            href: \"http://files.dmm.exchange/privacy.pdf\",\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Privacy Policy\"\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ContentWrapper, {\n        children: walletView === WALLET_VIEWS.PENDING ? /*#__PURE__*/_jsxDEV(PendingView, {\n          walletOptionKey: walletOptionKey,\n          hasError: pendingError,\n          renderHelperText: function renderHelperText() {\n            if (shouldShowInstallBrave) {\n              return /*#__PURE__*/_jsxDEV(InstallBraveNote, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 26\n              }, _this2);\n            }\n\n            return null;\n          },\n          onClickTryAgain: function onClickTryAgain() {\n            setPendingError(false);\n            connector && tryActivation(connector);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(OptionGrid, {\n          children: getOptions()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: walletModalOpen,\n    onDismiss: toggleWalletModal,\n    minHeight: false,\n    maxHeight: 90,\n    maxWidth: account && walletView === WALLET_VIEWS.ACCOUNT ? 544 : 512,\n    children: /*#__PURE__*/_jsxDEV(Wrapper, {\n      children: getModalContent()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 450,\n    columnNumber: 5\n  }, this);\n}\n\n_s(WalletModal, \"s4jNptNLv3ArFRrO0Q2uM886Fa8=\", false, function () {\n  return [useWeb3React, useTheme, useModalOpen, useWalletModalToggle, usePrevious, useIsDarkMode, useLocation, useMixpanel, usePrevious, usePrevious, useLocalStorage];\n});\n\n_c11 = WalletModal;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11;\n\n$RefreshReg$(_c, \"CloseIcon\");\n$RefreshReg$(_c2, \"CloseColor\");\n$RefreshReg$(_c3, \"Wrapper\");\n$RefreshReg$(_c4, \"HeaderRow\");\n$RefreshReg$(_c5, \"ContentWrapper\");\n$RefreshReg$(_c6, \"TermAndCondition\");\n$RefreshReg$(_c7, \"UpperSection\");\n$RefreshReg$(_c8, \"OptionGrid\");\n$RefreshReg$(_c9, \"HoverText\");\n$RefreshReg$(_c10, \"ToSText\");\n$RefreshReg$(_c11, \"WalletModal\");","map":{"version":3,"names":["UnsupportedChainIdError","useWeb3React","WalletConnectConnector","useEffect","useState","isMobile","ChevronLeft","useLocation","useLocalStorage","styled","WrongNetworkModal","useMixpanel","MIXPANEL_TYPE","useTheme","checkForBraveBrowser","braveInjectedConnector","coin98InjectedConnector","fortmatic","injected","portis","OVERLAY_READY","SUPPORTED_WALLETS","usePrevious","ApplicationModal","useModalOpen","useWalletModalToggle","useIsDarkMode","ExternalLink","AccountDetails","Modal","InstallBraveNote","Option","PendingView","CloseIcon","div","CloseColor","Close","theme","text4","Wrapper","flexColumnNoWrap","HeaderRow","flexRowNoWrap","padding","props","color","primary","mediaWidth","upToMedium","ContentWrapper","TermAndCondition","UpperSection","OptionGrid","HoverText","ToSText","span","text9","WALLET_VIEWS","OPTIONS","OPTIONS_SECONDARY","ACCOUNT","PENDING","WalletModal","pendingTransactions","confirmedTransactions","ENSName","active","account","connector","activate","error","walletView","setWalletView","pendingWallet","setPendingWallet","pendingError","setPendingError","walletModalOpen","WALLET","toggleWalletModal","previousAccount","isDarkMode","isAccepted","setIsAccepted","isWrongNetwork","location","mixpanelHandler","isBraveBrowser","pathname","startsWith","CAMPAIGN_WALLET_CONNECTED","activePrevious","connectorPrevious","setIsUserManuallyDisconnect","tryActivation","walletConnectProvider","wc","uri","undefined","then","catch","on","handleAccept","getOptions","isMetamask","window","ethereum","isMetaMask","Object","keys","map","key","option","web3","mobile","href","name","require","iconName","default","isCoin98","mobileOnly","filter","Boolean","getModalContent","shouldShowInstallBrave","walletOptionKey","find","wallet","marginRight"],"sources":["/Applications/XAMPP/voxel-interface/src/components/WalletModal/index.tsx"],"sourcesContent":["import { Trans, t } from '@lingui/macro'\nimport { AbstractConnector } from '@web3-react/abstract-connector'\nimport { UnsupportedChainIdError, useWeb3React } from '@web3-react/core'\nimport { WalletConnectConnector } from '@web3-react/walletconnect-connector'\nimport { useEffect, useState } from 'react'\nimport { isMobile } from 'react-device-detect'\nimport { ChevronLeft } from 'react-feather'\nimport { useLocation } from 'react-router-dom'\nimport { useLocalStorage } from 'react-use'\nimport styled from 'styled-components'\n\nimport WrongNetworkModal from 'components/WrongNetworkModal'\nimport useMixpanel, { MIXPANEL_TYPE } from 'hooks/useMixpanel'\nimport useTheme from 'hooks/useTheme'\nimport checkForBraveBrowser from 'utils/checkForBraveBrowser'\n\nimport { ReactComponent as Close } from '../../assets/images/x.svg'\nimport { braveInjectedConnector, coin98InjectedConnector, fortmatic, injected, portis } from '../../connectors'\nimport { OVERLAY_READY } from '../../connectors/Fortmatic'\nimport { SUPPORTED_WALLETS } from '../../constants'\nimport usePrevious from '../../hooks/usePrevious'\nimport { ApplicationModal } from '../../state/application/actions'\nimport { useModalOpen, useWalletModalToggle } from '../../state/application/hooks'\nimport { useIsDarkMode } from '../../state/user/hooks'\nimport { ExternalLink } from '../../theme'\nimport AccountDetails from '../AccountDetails'\nimport Modal from '../Modal'\nimport InstallBraveNote from './InstallBraveNote'\nimport Option from './Option'\nimport PendingView from './PendingView'\n\nconst CloseIcon = styled.div`\n  position: absolute;\n  right: 1rem;\n  top: 16px;\n  padding: 8px;\n  &:hover {\n    cursor: pointer;\n    opacity: 0.6;\n  }\n`\n\nconst CloseColor = styled(Close)`\n  path {\n    stroke: ${({ theme }) => theme.text4};\n  }\n`\n\nconst Wrapper = styled.div`\n  ${({ theme }) => theme.flexColumnNoWrap}\n  margin: 0;\n  padding: 0;\n  width: 100%;\n`\n\nconst HeaderRow = styled.div<{ padding?: string }>`\n  ${({ theme }) => theme.flexRowNoWrap};\n  padding: ${({ padding }) => padding ?? '1.5rem 2rem 0 2rem'};\n  font-weight: 500;\n  color: ${props => (props.color === 'blue' ? ({ theme }) => theme.primary : 'inherit')};\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    padding: 1.5rem 1rem 1rem;\n  `};\n`\n\nconst ContentWrapper = styled.div<{ padding?: string }>`\n  padding: ${({ padding }) => padding ?? '2rem'};\n  border-bottom-left-radius: 20px;\n  border-bottom-right-radius: 20px;\n\n  ${({ theme }) => theme.mediaWidth.upToMedium`padding: 1rem`};\n`\n\nconst TermAndCondition = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap};\n  padding: 32px 2rem 0px 2rem;\n  font-weight: 500;\n  color: ${props => (props.color === 'blue' ? ({ theme }) => theme.primary : 'inherit')};\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    padding: 1rem;\n  `};\n  accent-color: ${({ theme }) => theme.primary};\n`\n\nconst UpperSection = styled.div`\n  position: relative;\n\n  h5 {\n    margin: 0;\n    margin-bottom: 0.5rem;\n    font-size: 1rem;\n    font-weight: 400;\n  }\n\n  h5:last-child {\n    margin-bottom: 0px;\n  }\n\n  h4 {\n    margin-top: 0;\n    font-weight: 500;\n  }\n`\n\nconst OptionGrid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 20px;\n\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    grid-template-columns: 1fr;\n    grid-gap: 10px;\n  `};\n`\n\nconst HoverText = styled.div`\n  display: flex;\n  gap: 4px;\n  align-items: center;\n  font-size: 18px;\n  :hover {\n    cursor: pointer;\n  }\n`\n\nconst ToSText = styled.span`\n  color: ${({ theme }) => theme.text9};\n  font-weight: 500;\n`\n\nconst WALLET_VIEWS = {\n  OPTIONS: 'options',\n  OPTIONS_SECONDARY: 'options_secondary',\n  ACCOUNT: 'account',\n  PENDING: 'pending',\n}\n\nexport default function WalletModal({\n  pendingTransactions,\n  confirmedTransactions,\n  ENSName,\n}: {\n  pendingTransactions: string[] // hashes of pending\n  confirmedTransactions: string[] // hashes of confirmed\n  ENSName?: string\n}) {\n  // important that these are destructed from the account-specific web3-react context\n  const { active, account, connector, activate, error } = useWeb3React()\n  const theme = useTheme()\n\n  const [walletView, setWalletView] = useState(WALLET_VIEWS.ACCOUNT)\n\n  const [pendingWallet, setPendingWallet] = useState<AbstractConnector | undefined>()\n\n  const [pendingError, setPendingError] = useState<boolean>()\n\n  const walletModalOpen = useModalOpen(ApplicationModal.WALLET)\n  const toggleWalletModal = useWalletModalToggle()\n\n  const previousAccount = usePrevious(account)\n  const isDarkMode = useIsDarkMode()\n\n  const [isAccepted, setIsAccepted] = useState(true)\n\n  const isWrongNetwork = error instanceof UnsupportedChainIdError\n  const location = useLocation()\n  const { mixpanelHandler } = useMixpanel()\n\n  // need to call this inside a Component as there's an async call in `checkForBraveBrowser`\n  const isBraveBrowser = checkForBraveBrowser()\n\n  // close on connection, when logged out before\n  useEffect(() => {\n    if (account && !previousAccount && walletModalOpen) {\n      if (location.pathname.startsWith('/campaigns')) {\n        mixpanelHandler(MIXPANEL_TYPE.CAMPAIGN_WALLET_CONNECTED)\n      }\n      toggleWalletModal()\n    }\n  }, [account, previousAccount, toggleWalletModal, walletModalOpen, location.pathname, mixpanelHandler])\n\n  // always reset to account view\n  useEffect(() => {\n    if (walletModalOpen) {\n      setPendingError(false)\n      setWalletView(WALLET_VIEWS.ACCOUNT)\n    }\n  }, [walletModalOpen])\n\n  // close modal when a connection is successful\n  const activePrevious = usePrevious(active)\n  const connectorPrevious = usePrevious(connector)\n  useEffect(() => {\n    if (walletModalOpen && ((active && !activePrevious) || (connector && connector !== connectorPrevious && !error))) {\n      setWalletView(WALLET_VIEWS.ACCOUNT)\n    }\n  }, [setWalletView, active, error, connector, walletModalOpen, activePrevious, connectorPrevious])\n  const [, setIsUserManuallyDisconnect] = useLocalStorage('user-manually-disconnect')\n\n  const tryActivation = async (connector: AbstractConnector | undefined) => {\n    setPendingWallet(connector) // set wallet for pending view\n    setWalletView(WALLET_VIEWS.PENDING)\n\n    if (connector === braveInjectedConnector && !isBraveBrowser) {\n      // we just want the loading indicator, so return here\n      return\n    }\n\n    // if the connector is walletconnect and the user has already tried to connect, manually reset the connector\n    if (connector instanceof WalletConnectConnector && connector.walletConnectProvider?.wc?.uri) {\n      connector.walletConnectProvider = undefined\n    }\n\n    if (connector) {\n      await activate(connector, undefined, true)\n        .then(() => {\n          setIsUserManuallyDisconnect(false)\n        })\n        .catch(error => {\n          if (error instanceof UnsupportedChainIdError) {\n            activate(connector)\n          } else {\n            setPendingError(true)\n          }\n        })\n    }\n  }\n\n  // close wallet modal if fortmatic modal is active\n  useEffect(() => {\n    fortmatic.on(OVERLAY_READY, () => {\n      toggleWalletModal()\n    })\n  }, [toggleWalletModal])\n\n  const handleAccept = () => {\n    setIsAccepted(!isAccepted)\n  }\n\n  // get wallets user can switch too, depending on device/browser\n  function getOptions() {\n    const isMetamask = window.ethereum && window.ethereum.isMetaMask\n\n    return Object.keys(SUPPORTED_WALLETS)\n      .map(key => {\n        const option = SUPPORTED_WALLETS[key]\n        // check for mobile options\n        if (isMobile) {\n          //disable portis on mobile for now\n          if (option.connector === portis) {\n            return null\n          }\n\n          if (\n            (!window.web3 && !window.ethereum && option.mobile) ||\n            // add this condition below for Brave browser. In Brave, window.ethereum is not undefined\n            // the above condition fails and there are no wallet options to choose\n            (option.mobile && isBraveBrowser)\n          ) {\n            return (\n              <Option\n                onClick={() => {\n                  option.connector !== connector && !option.href && tryActivation(option.connector)\n                }}\n                id={`connect-${key}`}\n                key={key}\n                active={option.connector && option.connector === connector}\n                color={option.color}\n                link={option.href}\n                header={option.name}\n                subheader={null}\n                icon={require(`../../assets/images/${isDarkMode ? '' : 'light-'}${option.iconName}`).default}\n              />\n            )\n          }\n\n          return null\n        }\n        // overwrite injected when needed\n        if (option.connector === injected) {\n          // don't show injected if there's no injected provider\n          if (!(window.web3 || window.ethereum?.isMetaMask)) {\n            if (option.name === 'MetaMask') {\n              return (\n                <Option\n                  id={`connect-${key}`}\n                  key={key}\n                  color={'#E8831D'}\n                  header={'Install Metamask'}\n                  subheader={null}\n                  link={'https://metamask.io/'}\n                  icon={require(`../../assets/images/${isDarkMode ? '' : 'light-'}${option.iconName}`).default}\n                />\n              )\n            } else {\n              return null //dont want to return install twice\n            }\n          }\n          // don't return metamask if injected provider isn't metamask\n          else if (option.name === 'MetaMask' && !isMetamask) {\n            return null\n          }\n          // likewise for generic\n          else if (option.name === 'Injected' && isMetamask) {\n            return null\n          }\n        }\n\n        if (option.connector === coin98InjectedConnector) {\n          if (!(window.web3 || window.ethereum?.isCoin98)) {\n            return (\n              <Option\n                id={`connect-${key}`}\n                key={key}\n                color={'#E8831D'}\n                header={'Install Coin98'}\n                link={'https://coin98.com/'}\n                icon={require(`../../assets/images/${isDarkMode ? '' : 'light-'}${option.iconName}`).default}\n              />\n            )\n          }\n        }\n\n        // return rest of options\n        return (\n          !isMobile &&\n          !option.mobileOnly && (\n            <Option\n              clickable={isAccepted}\n              id={`connect-${key}`}\n              onClick={() => {\n                option.connector === connector\n                  ? setWalletView(WALLET_VIEWS.ACCOUNT)\n                  : !option.href && tryActivation(option.connector)\n              }}\n              key={key}\n              active={option.connector === connector}\n              color={option.color}\n              link={option.href}\n              header={option.name}\n              subheader={null} //use option.descriptio to bring back multi-line\n              icon={require(`../../assets/images/${isDarkMode ? '' : 'light-'}${option.iconName}`).default}\n            />\n          )\n        )\n      })\n      .filter(Boolean)\n  }\n\n  function getModalContent() {\n    if (error) {\n      return (\n        <>\n          {isWrongNetwork ? (\n            <WrongNetworkModal />\n          ) : (\n            <UpperSection>\n              <CloseIcon onClick={toggleWalletModal}>\n                <CloseColor />\n              </CloseIcon>\n              <HeaderRow padding=\"1rem\">{'Error connecting'}</HeaderRow>\n              <ContentWrapper padding=\"1rem 1.5rem 1.5rem\">\n                {t`Error connecting. Try refreshing the page.`}\n              </ContentWrapper>\n            </UpperSection>\n          )}\n        </>\n      )\n    }\n    if (account && walletView === WALLET_VIEWS.ACCOUNT) {\n      return (\n        <AccountDetails\n          toggleWalletModal={toggleWalletModal}\n          pendingTransactions={pendingTransactions}\n          confirmedTransactions={confirmedTransactions}\n          ENSName={ENSName}\n          openOptions={() => setWalletView(WALLET_VIEWS.OPTIONS)}\n        />\n      )\n    }\n\n    const shouldShowInstallBrave = !isBraveBrowser && pendingWallet === braveInjectedConnector\n    const walletOptionKey = Object.keys(SUPPORTED_WALLETS).find(key => {\n      const wallet = SUPPORTED_WALLETS[key]\n      return wallet.connector === connector\n    })\n\n    return (\n      <UpperSection>\n        <CloseIcon onClick={toggleWalletModal}>\n          <CloseColor />\n        </CloseIcon>\n        {walletView !== WALLET_VIEWS.ACCOUNT ? (\n          <HeaderRow>\n            <HoverText\n              onClick={() => {\n                setPendingError(false)\n                setWalletView(WALLET_VIEWS.ACCOUNT)\n              }}\n            >\n              <ChevronLeft color={theme.primary} />\n              <Trans>Back</Trans>\n            </HoverText>\n          </HeaderRow>\n        ) : (\n          <HeaderRow>\n            <HoverText>\n              <Trans>Connect your Wallet</Trans>\n            </HoverText>\n          </HeaderRow>\n        )}\n        <TermAndCondition>\n          <input type=\"checkbox\" checked={isAccepted} onChange={handleAccept} style={{ marginRight: '12px' }} />\n          <ToSText>\n            <Trans>Accept</Trans>{' '}\n            <ExternalLink href=\"/15022022KyberSwapTermsofUse.pdf\">\n              <Trans>Terms of Use</Trans>\n            </ExternalLink>{' '}\n            <Trans>and</Trans>{' '}\n            <ExternalLink href=\"http://files.dmm.exchange/privacy.pdf\">\n              <Trans>Privacy Policy</Trans>\n            </ExternalLink>\n          </ToSText>\n        </TermAndCondition>\n        <ContentWrapper>\n          {walletView === WALLET_VIEWS.PENDING ? (\n            <PendingView\n              walletOptionKey={walletOptionKey}\n              hasError={pendingError}\n              renderHelperText={() => {\n                if (shouldShowInstallBrave) {\n                  return <InstallBraveNote />\n                }\n                return null\n              }}\n              onClickTryAgain={() => {\n                setPendingError(false)\n                connector && tryActivation(connector)\n              }}\n            />\n          ) : (\n            <OptionGrid>{getOptions()}</OptionGrid>\n          )}\n        </ContentWrapper>\n      </UpperSection>\n    )\n  }\n\n  return (\n    <Modal\n      isOpen={walletModalOpen}\n      onDismiss={toggleWalletModal}\n      minHeight={false}\n      maxHeight={90}\n      maxWidth={account && walletView === WALLET_VIEWS.ACCOUNT ? 544 : 512}\n    >\n      <Wrapper>{getModalContent()}</Wrapper>\n    </Modal>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}