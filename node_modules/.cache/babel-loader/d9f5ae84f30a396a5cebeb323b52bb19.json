{"ast":null,"code":"import _regeneratorRuntime from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { Trade } from '@kyberswap/ks-sdk-classic';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { ZERO_ADDRESS } from 'constants/index';\nimport { NETWORKS_INFO } from 'constants/networks';\nimport { PairState, usePairs } from 'data/Reserves';\nimport { useActiveWeb3React } from 'hooks/index';\nimport { useAllCurrencyCombinations } from 'hooks/useAllCurrencyCombinations';\nimport useDebounce from 'hooks/useDebounce';\nimport { useAllDexes, useExcludeDexes } from 'state/customizeDexes/hooks';\nimport { useSwapState } from 'state/swap/hooks';\nimport { isAddress } from 'utils';\nimport { Aggregator } from 'utils/aggregator';\n\nfunction useAllCommonPairs(currencyA, currencyB) {\n  _s();\n\n  var allPairCombinations = useAllCurrencyCombinations(currencyA, currencyB);\n  var allPairs = usePairs(allPairCombinations); // only pass along valid pairs, non-duplicated pairs\n\n  return useMemo(function () {\n    return allPairs.reduce(function (res, poolArray) {\n      var t = Object.values(poolArray.filter(function (result) {\n        return Boolean(result[0] === PairState.EXISTS && result[1]);\n      }).reduce(function (memo, _ref) {\n        var _memo$curr$liquidityT;\n\n        var _ref2 = _slicedToArray(_ref, 2),\n            curr = _ref2[1];\n\n        memo[curr.liquidityToken.address] = (_memo$curr$liquidityT = memo[curr.liquidityToken.address]) !== null && _memo$curr$liquidityT !== void 0 ? _memo$curr$liquidityT : curr;\n        return memo;\n      }, {}));\n      res.push(t);\n      return res;\n    }, []);\n  }, [allPairs]);\n}\n/**\n * Returns the best trade for the exact amount of tokens in to the given token out\n */\n\n\n_s(useAllCommonPairs, \"I58JUbPCUtvhvQjWjVeA2HM5eRQ=\", false, function () {\n  return [useAllCurrencyCombinations, usePairs];\n});\n\nexport function useTradeExactIn(currencyAmountIn, currencyOut) {\n  _s2();\n\n  var currencyIn = useMemo(function () {\n    return currencyAmountIn === null || currencyAmountIn === void 0 ? void 0 : currencyAmountIn.currency;\n  }, [currencyAmountIn]);\n  var allCommonPairs = useAllCommonPairs(currencyIn, currencyOut);\n  var allowedPairs = useMemo(function () {\n    return allCommonPairs.filter(function (item) {\n      return item.length > 0;\n    });\n  }, [allCommonPairs]);\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      trade = _useState2[0],\n      setTrade = _useState2[1];\n\n  useEffect(function () {\n    var timeout;\n\n    var fn = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                timeout = setTimeout(function () {\n                  if (currencyAmountIn && currencyOut && allowedPairs.length > 0) {\n                    var _Trade$bestTradeExact;\n\n                    if (process.env.REACT_APP_MAINNET_ENV === 'staging') {\n                      console.log('trade amount: ', currencyAmountIn.toSignificant(10));\n                    }\n\n                    setTrade((_Trade$bestTradeExact = Trade.bestTradeExactIn(allowedPairs, currencyAmountIn, currencyOut, {\n                      maxHops: 3,\n                      maxNumResults: 1\n                    })[0]) !== null && _Trade$bestTradeExact !== void 0 ? _Trade$bestTradeExact : null);\n                  } else setTrade(null);\n                }, 100);\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fn() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    fn();\n    return function () {\n      clearTimeout(timeout);\n    };\n  }, [currencyAmountIn, currencyOut, allowedPairs]);\n  return trade;\n}\n\n_s2(useTradeExactIn, \"g7ay/aIwPhvGN7VvgqOXj8WWTUs=\", false, function () {\n  return [useAllCommonPairs];\n});\n\nvar controller = new AbortController();\n/**\n * Returns the best trade for the exact amount of tokens in to the given token out\n */\n\nexport function useTradeExactInV2(currencyAmountIn, currencyOut, saveGas, recipient, allowedSlippage) {\n  _s3();\n\n  var _useActiveWeb3React = useActiveWeb3React(),\n      account = _useActiveWeb3React.account,\n      chainId = _useActiveWeb3React.chainId;\n\n  var allDexes = useAllDexes();\n\n  var _useExcludeDexes = useExcludeDexes(),\n      _useExcludeDexes2 = _slicedToArray(_useExcludeDexes, 1),\n      excludeDexes = _useExcludeDexes2[0];\n\n  var selectedDexes = allDexes === null || allDexes === void 0 ? void 0 : allDexes.filter(function (item) {\n    return !excludeDexes.includes(item.id);\n  }).map(function (item) {\n    return item.id;\n  });\n  var dexes = (selectedDexes === null || selectedDexes === void 0 ? void 0 : selectedDexes.length) === (allDexes === null || allDexes === void 0 ? void 0 : allDexes.length) ? '' : (selectedDexes === null || selectedDexes === void 0 ? void 0 : selectedDexes.join(',').replace('kyberswapv1', 'kyberswap,kyberswap-static')) || '';\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      trade = _useState4[0],\n      setTrade = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      comparer = _useState6[0],\n      setComparer = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var debounceCurrencyAmountIn = useDebounce(currencyAmountIn, 300);\n  var routerApi = useMemo(function () {\n    return chainId && NETWORKS_INFO[chainId].routerUri || '';\n  }, [chainId]);\n  var ttl = useSelector(function (state) {\n    return state.user.userDeadline;\n  });\n\n  var _useSwapState = useSwapState(),\n      feeConfig = _useSwapState.feeConfig;\n\n  var onUpdateCallback = useCallback( /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(resetRoute, minimumLoadingTime) {\n      var _debounceCurrencyAmou;\n\n      var _ref5, signal, to, deadline, _yield$Promise$all, _yield$Promise$all2, state, comparedResult;\n\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(debounceCurrencyAmountIn && currencyOut && ((_debounceCurrencyAmou = debounceCurrencyAmountIn.currency) === null || _debounceCurrencyAmou === void 0 ? void 0 : _debounceCurrencyAmou.address) !== (currencyOut === null || currencyOut === void 0 ? void 0 : currencyOut.address))) {\n                _context2.next = 18;\n                break;\n              }\n\n              if (resetRoute) setTrade(null);\n              controller.abort();\n              controller = new AbortController();\n              signal = controller.signal;\n              setLoading(true);\n              to = (_ref5 = isAddress(recipient) ? recipient : account) !== null && _ref5 !== void 0 ? _ref5 : ZERO_ADDRESS;\n              deadline = Math.round(Date.now() / 1000) + ttl;\n              _context2.next = 10;\n              return Promise.all([Aggregator.bestTradeExactIn(routerApi, debounceCurrencyAmountIn, currencyOut, saveGas, dexes, allowedSlippage, deadline, to, feeConfig, signal, minimumLoadingTime), Aggregator.compareDex(routerApi, debounceCurrencyAmountIn, currencyOut, allowedSlippage, deadline, to, feeConfig, signal, minimumLoadingTime)]);\n\n            case 10:\n              _yield$Promise$all = _context2.sent;\n              _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 2);\n              state = _yield$Promise$all2[0];\n              comparedResult = _yield$Promise$all2[1];\n\n              if (!signal.aborted) {\n                setTrade(state);\n                setComparer(comparedResult);\n              }\n\n              setLoading(false);\n              _context2.next = 20;\n              break;\n\n            case 18:\n              setTrade(null);\n              setComparer(null);\n\n            case 20:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x, _x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }(), [debounceCurrencyAmountIn, currencyOut, recipient, account, routerApi, saveGas, dexes, allowedSlippage, ttl, feeConfig]);\n  useEffect(function () {\n    onUpdateCallback(false, 0);\n  }, [onUpdateCallback]);\n  return {\n    trade: trade,\n    comparer: comparer,\n    onUpdateCallback: onUpdateCallback,\n    loading: loading\n  };\n}\n\n_s3(useTradeExactInV2, \"AKGbQVLNwP3eM2GyhXbXsrnsS6o=\", false, function () {\n  return [useActiveWeb3React, useAllDexes, useExcludeDexes, useDebounce, useSelector, useSwapState];\n});","map":{"version":3,"names":["Trade","useCallback","useEffect","useMemo","useState","useSelector","ZERO_ADDRESS","NETWORKS_INFO","PairState","usePairs","useActiveWeb3React","useAllCurrencyCombinations","useDebounce","useAllDexes","useExcludeDexes","useSwapState","isAddress","Aggregator","useAllCommonPairs","currencyA","currencyB","allPairCombinations","allPairs","reduce","res","poolArray","t","Object","values","filter","result","Boolean","EXISTS","memo","curr","liquidityToken","address","push","useTradeExactIn","currencyAmountIn","currencyOut","currencyIn","currency","allCommonPairs","allowedPairs","item","length","trade","setTrade","timeout","fn","setTimeout","process","env","REACT_APP_MAINNET_ENV","console","log","toSignificant","bestTradeExactIn","maxHops","maxNumResults","clearTimeout","controller","AbortController","useTradeExactInV2","saveGas","recipient","allowedSlippage","account","chainId","allDexes","excludeDexes","selectedDexes","includes","id","map","dexes","join","replace","comparer","setComparer","loading","setLoading","debounceCurrencyAmountIn","routerApi","routerUri","ttl","state","user","userDeadline","feeConfig","onUpdateCallback","resetRoute","minimumLoadingTime","abort","signal","to","deadline","Math","round","Date","now","Promise","all","compareDex","comparedResult","aborted"],"sources":["/Applications/XAMPP/voxel-interface/src/hooks/Trades.ts"],"sourcesContent":["import { Pair, Trade } from '@kyberswap/ks-sdk-classic'\nimport { Currency, CurrencyAmount, Token, TradeType } from '@kyberswap/ks-sdk-core'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport { useSelector } from 'react-redux'\n\nimport { ZERO_ADDRESS } from 'constants/index'\nimport { NETWORKS_INFO } from 'constants/networks'\nimport { PairState, usePairs } from 'data/Reserves'\nimport { useActiveWeb3React } from 'hooks/index'\nimport { useAllCurrencyCombinations } from 'hooks/useAllCurrencyCombinations'\nimport useDebounce from 'hooks/useDebounce'\nimport { AppState } from 'state'\nimport { useAllDexes, useExcludeDexes } from 'state/customizeDexes/hooks'\nimport { useSwapState } from 'state/swap/hooks'\nimport { AggregationComparer } from 'state/swap/types'\nimport { isAddress } from 'utils'\nimport { Aggregator } from 'utils/aggregator'\n\nfunction useAllCommonPairs(currencyA?: Currency, currencyB?: Currency): Pair[][] {\n  const allPairCombinations = useAllCurrencyCombinations(currencyA, currencyB)\n\n  const allPairs = usePairs(allPairCombinations)\n\n  // only pass along valid pairs, non-duplicated pairs\n  return useMemo(\n    () =>\n      allPairs.reduce<Pair[][]>((res, poolArray) => {\n        const t = Object.values(\n          poolArray\n            .filter((result): result is [PairState.EXISTS, Pair] =>\n              Boolean(result[0] === PairState.EXISTS && result[1]),\n            )\n            .reduce<{ [pairAddress: string]: Pair }>((memo, [, curr]) => {\n              memo[curr.liquidityToken.address] = memo[curr.liquidityToken.address] ?? curr\n              return memo\n            }, {}),\n        )\n        res.push(t)\n        return res\n      }, []),\n    [allPairs],\n  )\n}\n\n/**\n * Returns the best trade for the exact amount of tokens in to the given token out\n */\nexport function useTradeExactIn(\n  currencyAmountIn?: CurrencyAmount<Currency>,\n  currencyOut?: Currency,\n): Trade<Currency, Currency, TradeType> | null {\n  const currencyIn = useMemo(() => currencyAmountIn?.currency, [currencyAmountIn])\n  const allCommonPairs = useAllCommonPairs(currencyIn, currencyOut)\n  const allowedPairs = useMemo(() => allCommonPairs.filter(item => item.length > 0), [allCommonPairs])\n  const [trade, setTrade] = useState<Trade<Currency, Currency, TradeType> | null>(null)\n\n  useEffect(() => {\n    let timeout: any\n    const fn = async function () {\n      timeout = setTimeout(() => {\n        if (currencyAmountIn && currencyOut && allowedPairs.length > 0) {\n          if (process.env.REACT_APP_MAINNET_ENV === 'staging') {\n            console.log('trade amount: ', currencyAmountIn.toSignificant(10))\n          }\n\n          setTrade(\n            Trade.bestTradeExactIn(allowedPairs, currencyAmountIn, currencyOut, {\n              maxHops: 3,\n              maxNumResults: 1,\n            })[0] ?? null,\n          )\n        } else setTrade(null)\n      }, 100)\n    }\n    fn()\n    return () => {\n      clearTimeout(timeout)\n    }\n  }, [currencyAmountIn, currencyOut, allowedPairs])\n\n  return trade\n}\n\nlet controller = new AbortController()\n/**\n * Returns the best trade for the exact amount of tokens in to the given token out\n */\nexport function useTradeExactInV2(\n  currencyAmountIn: CurrencyAmount<Currency> | undefined,\n  currencyOut: Currency | undefined,\n  saveGas: boolean,\n  recipient: string | null,\n  allowedSlippage: number,\n): {\n  trade: Aggregator | null\n  comparer: AggregationComparer | null\n  onUpdateCallback: (resetRoute: boolean, minimumLoadingTime: number) => void\n  loading: boolean\n} {\n  const { account, chainId } = useActiveWeb3React()\n\n  const allDexes = useAllDexes()\n  const [excludeDexes] = useExcludeDexes()\n\n  const selectedDexes = allDexes?.filter(item => !excludeDexes.includes(item.id)).map(item => item.id)\n\n  const dexes =\n    selectedDexes?.length === allDexes?.length\n      ? ''\n      : selectedDexes?.join(',').replace('kyberswapv1', 'kyberswap,kyberswap-static') || ''\n\n  const [trade, setTrade] = useState<Aggregator | null>(null)\n  const [comparer, setComparer] = useState<AggregationComparer | null>(null)\n  const [loading, setLoading] = useState(false)\n\n  const debounceCurrencyAmountIn = useDebounce(currencyAmountIn, 300)\n\n  const routerApi = useMemo((): string => {\n    return (chainId && NETWORKS_INFO[chainId].routerUri) || ''\n  }, [chainId])\n\n\n  const ttl = useSelector<AppState, number>(state => state.user.userDeadline)\n\n  const { feeConfig } = useSwapState()\n\n  const onUpdateCallback = useCallback(\n    async (resetRoute: boolean, minimumLoadingTime: number) => {\n      if (\n        debounceCurrencyAmountIn &&\n        currencyOut &&\n        (debounceCurrencyAmountIn.currency as Token)?.address !== (currencyOut as Token)?.address\n      ) {\n        if (resetRoute) setTrade(null)\n        controller.abort()\n\n        controller = new AbortController()\n        const signal = controller.signal\n\n        setLoading(true)\n\n        const to = (isAddress(recipient) ? (recipient as string) : account) ?? ZERO_ADDRESS\n\n        const deadline = Math.round(Date.now() / 1000) + ttl\n\n        const [state, comparedResult] = await Promise.all([\n          Aggregator.bestTradeExactIn(\n            routerApi,\n            debounceCurrencyAmountIn,\n            currencyOut,\n            saveGas,\n            dexes,\n            allowedSlippage,\n            deadline,\n            to,\n            feeConfig,\n            signal,\n            minimumLoadingTime,\n          ),\n          Aggregator.compareDex(\n            routerApi,\n            debounceCurrencyAmountIn,\n            currencyOut,\n            allowedSlippage,\n            deadline,\n            to,\n            feeConfig,\n            signal,\n            minimumLoadingTime,\n          ),\n        ])\n\n        if (!signal.aborted) {\n          setTrade(state)\n          setComparer(comparedResult)\n        }\n        setLoading(false)\n      } else {\n        setTrade(null)\n        setComparer(null)\n      }\n    },\n    [\n      debounceCurrencyAmountIn,\n      currencyOut,\n      recipient,\n      account,\n      routerApi,\n      saveGas,\n      dexes,\n      allowedSlippage,\n      ttl,\n      feeConfig,\n    ],\n  )\n\n  useEffect(() => {\n    onUpdateCallback(false, 0)\n  }, [onUpdateCallback])\n\n  return {\n    trade,\n    comparer,\n    onUpdateCallback,\n    loading,\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}