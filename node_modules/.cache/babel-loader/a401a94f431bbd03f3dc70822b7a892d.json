{"ast":null,"code":"import _toConsumableArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _createForOfIteratorHelper from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\n\nvar _s = $RefreshSig$();\n\nimport { Route } from '@kyberswap/ks-sdk-elastic';\nimport { useMemo } from 'react';\nimport { useActiveWeb3React } from 'hooks';\nimport { useProAmmSwapPools } from './useProAmmSwapPools';\n\nfunction poolEquals(poolA, poolB) {\n  return poolA === poolB || poolA.token0.equals(poolB.token0) && poolA.token1.equals(poolB.token1) && poolA.fee === poolB.fee;\n}\n\nfunction computeAllRoutes(currencyIn, currencyOut, pools, chainId) {\n  var currentPath = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n  var allPaths = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [];\n  var startCurrencyIn = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : currencyIn;\n  var maxHops = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 2;\n  var tokenIn = currencyIn === null || currencyIn === void 0 ? void 0 : currencyIn.wrapped;\n  var tokenOut = currencyOut === null || currencyOut === void 0 ? void 0 : currencyOut.wrapped;\n  if (!tokenIn || !tokenOut) throw new Error('Missing tokenIn/tokenOut');\n\n  var _iterator = _createForOfIteratorHelper(pools),\n      _step;\n\n  try {\n    var _loop = function _loop() {\n      var pool = _step.value;\n      if (!pool.involvesToken(tokenIn) || currentPath.find(function (pathPool) {\n        return poolEquals(pool, pathPool);\n      })) return \"continue\";\n      var outputToken = pool.token0.equals(tokenIn) ? pool.token1 : pool.token0;\n\n      if (outputToken.equals(tokenOut)) {\n        allPaths.push(new Route([].concat(_toConsumableArray(currentPath), [pool]), startCurrencyIn, currencyOut));\n      } else if (maxHops > 1) {\n        computeAllRoutes(outputToken, currencyOut, pools, chainId, [].concat(_toConsumableArray(currentPath), [pool]), allPaths, startCurrencyIn, maxHops - 1);\n      }\n    };\n\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _ret = _loop();\n\n      if (_ret === \"continue\") continue;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return allPaths;\n}\n\nexport function useProAmmAllRoutes(currencyIn, currencyOut) {\n  _s();\n\n  var _useActiveWeb3React = useActiveWeb3React(),\n      chainId = _useActiveWeb3React.chainId;\n\n  var _useProAmmSwapPools = useProAmmSwapPools(currencyIn, currencyOut),\n      pools = _useProAmmSwapPools.pools,\n      poolsLoading = _useProAmmSwapPools.loading;\n\n  return useMemo(function () {\n    if (poolsLoading || !chainId || !pools || !currencyIn || !currencyOut) return {\n      loading: true,\n      routes: []\n    };\n    var routes = computeAllRoutes(currencyIn, currencyOut, pools, chainId, [], [], currencyIn, 1);\n    return {\n      loading: false,\n      routes: routes\n    };\n  }, [chainId, currencyIn, currencyOut, pools, poolsLoading]);\n}\n\n_s(useProAmmAllRoutes, \"Gn7+YlEh1FZaCuHeYrTT5uxPRBY=\", false, function () {\n  return [useActiveWeb3React, useProAmmSwapPools];\n});","map":{"version":3,"names":["Route","useMemo","useActiveWeb3React","useProAmmSwapPools","poolEquals","poolA","poolB","token0","equals","token1","fee","computeAllRoutes","currencyIn","currencyOut","pools","chainId","currentPath","allPaths","startCurrencyIn","maxHops","tokenIn","wrapped","tokenOut","Error","pool","involvesToken","find","pathPool","outputToken","push","useProAmmAllRoutes","poolsLoading","loading","routes"],"sources":["/Applications/XAMPP/voxel-interface/src/hooks/useProAmmAllRoutes.ts"],"sourcesContent":["import { Currency } from '@kyberswap/ks-sdk-core'\nimport { Pool, Route } from '@kyberswap/ks-sdk-elastic'\nimport { useMemo } from 'react'\n\nimport { useActiveWeb3React } from 'hooks'\n\nimport { useProAmmSwapPools } from './useProAmmSwapPools'\n\nfunction poolEquals(poolA: Pool, poolB: Pool): boolean {\n  return (\n    poolA === poolB ||\n    (poolA.token0.equals(poolB.token0) && poolA.token1.equals(poolB.token1) && poolA.fee === poolB.fee)\n  )\n}\n\nfunction computeAllRoutes(\n  currencyIn: Currency,\n  currencyOut: Currency,\n  pools: Pool[],\n  chainId: number,\n  currentPath: Pool[] = [],\n  allPaths: Route<Currency, Currency>[] = [],\n  startCurrencyIn: Currency = currencyIn,\n  maxHops = 2,\n): Route<Currency, Currency>[] {\n  const tokenIn = currencyIn?.wrapped\n  const tokenOut = currencyOut?.wrapped\n  if (!tokenIn || !tokenOut) throw new Error('Missing tokenIn/tokenOut')\n\n  for (const pool of pools) {\n    if (!pool.involvesToken(tokenIn) || currentPath.find(pathPool => poolEquals(pool, pathPool))) continue\n\n    const outputToken = pool.token0.equals(tokenIn) ? pool.token1 : pool.token0\n    if (outputToken.equals(tokenOut)) {\n      allPaths.push(new Route([...currentPath, pool], startCurrencyIn, currencyOut))\n    } else if (maxHops > 1) {\n      computeAllRoutes(\n        outputToken,\n        currencyOut,\n        pools,\n        chainId,\n        [...currentPath, pool],\n        allPaths,\n        startCurrencyIn,\n        maxHops - 1,\n      )\n    }\n  }\n\n  return allPaths\n}\n\nexport function useProAmmAllRoutes(\n  currencyIn?: Currency,\n  currencyOut?: Currency,\n): { loading: boolean; routes: Route<Currency, Currency>[] } {\n  const { chainId } = useActiveWeb3React()\n  const { pools, loading: poolsLoading } = useProAmmSwapPools(currencyIn, currencyOut)\n  return useMemo(() => {\n    if (poolsLoading || !chainId || !pools || !currencyIn || !currencyOut) return { loading: true, routes: [] }\n\n    const routes = computeAllRoutes(currencyIn, currencyOut, pools, chainId, [], [], currencyIn, 1)\n\n    return { loading: false, routes }\n  }, [chainId, currencyIn, currencyOut, pools, poolsLoading])\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}