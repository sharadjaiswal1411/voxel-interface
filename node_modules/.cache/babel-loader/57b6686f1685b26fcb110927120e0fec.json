{"ast":null,"code":"import _regeneratorRuntime from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineProperty from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _toConsumableArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _taggedTemplateLiteral from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\n\nvar _jsxFileName = \"/Applications/XAMPP/voxel-interface/src/components/YieldPools/ProMMFarmGroup/index.tsx\",\n    _templateObject,\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { Trans } from \"@lingui/react\";\nimport { i18n } from \"@lingui/core\";\nimport { CurrencyAmount } from '@kyberswap/ks-sdk-core';\nimport { rgba } from 'polished';\nimport { useCallback, useMemo, useState } from 'react';\nimport { Info } from 'react-feather';\nimport { useMedia } from 'react-use';\nimport { Flex, Text } from 'rebass';\nimport styled from 'styled-components';\nimport { ButtonPrimary } from 'components/Button';\nimport { AutoColumn } from 'components/Column';\nimport CurrencyLogo from 'components/CurrencyLogo';\nimport Divider from 'components/Divider';\nimport HoverDropdown from 'components/HoverDropdown';\nimport Withdraw from 'components/Icons/Withdraw';\nimport InfoHelper from 'components/InfoHelper';\nimport { MouseoverTooltip, MouseoverTooltipDesktopOnly } from 'components/Tooltip';\nimport { ZERO_ADDRESS } from 'constants/index';\nimport { VERSION } from 'constants/v2';\nimport { useActiveWeb3React } from 'hooks';\nimport { useTokens } from 'hooks/Tokens';\nimport { useProAmmNFTPositionManagerContract } from 'hooks/useContract';\nimport useParsedQueryString from 'hooks/useParsedQueryString';\nimport useTheme from 'hooks/useTheme';\nimport { Dots } from 'pages/Pool/styleds';\nimport { useWalletModalToggle } from 'state/application/hooks';\nimport { useRewardTokenPrices } from 'state/farms/hooks';\nimport { useFailedNFTs, useFarmAction } from 'state/farms/promm/hooks';\nimport { useSingleCallResult } from 'state/multicall/hooks';\nimport { useIsTransactionPending } from 'state/transactions/hooks';\nimport { formatDollarAmount } from 'utils/numbers';\nimport { ClickableText, ProMMFarmTableHeader } from '../styleds';\nimport Row from './Row';\nimport { BtnPrimary, ConnectWalletButton, DepositButton, ForceWithdrawButton, HarvestAllButton, WithdrawButton } from './buttons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar FarmContent = styled.div.withConfig({\n  displayName: \"ProMMFarmGroup__FarmContent\",\n  componentId: \"sc-1uzyopa-0\"\n})([\"background:\", \";border-radius:20px;overflow:hidden;\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.background;\n});\n_c = FarmContent;\nvar FarmRow = styled.div.withConfig({\n  displayName: \"ProMMFarmGroup__FarmRow\",\n  componentId: \"sc-1uzyopa-1\"\n})([\"height:68px;display:flex;justify-content:flex-end;align-items:center;background-color:\", \";padding:0 1rem;\", \"\"], function (_ref2) {\n  var theme = _ref2.theme;\n  return rgba(theme.buttonBlack, 0.4);\n}, function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.mediaWidth.upToMedium(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    width: 100%;\\n    flex-direction: column;\\n    gap: 20px;\\n    align-items: flex-start;\\n  \"])));\n});\n_c2 = FarmRow;\n\nvar ProMMFarmGroup = function ProMMFarmGroup(_ref4) {\n  _s();\n\n  var _res$result;\n\n  var address = _ref4.address,\n      onOpenModal = _ref4.onOpenModal,\n      farms = _ref4.farms;\n  var theme = useTheme();\n\n  var _useActiveWeb3React = useActiveWeb3React(),\n      account = _useActiveWeb3React.account;\n\n  var above768 = useMedia('(min-width: 768px)');\n  var above1000 = useMedia('(min-width: 1000px)');\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      userPoolFarmInfo = _useState2[0],\n      setUserPoolFarmInfo = _useState2[1];\n\n  var rewardAddresses = useMemo(function () {\n    var rws = farms.reduce(function (acc, cur) {\n      return [].concat(_toConsumableArray(acc), _toConsumableArray(cur.rewardTokens));\n    }, []);\n    return _toConsumableArray(new Set(rws));\n  }, [farms]);\n  var rwTokenMap = useTokens(rewardAddresses);\n  var rwTokens = useMemo(function () {\n    return Object.values(rwTokenMap);\n  }, [rwTokenMap]);\n  var prices = useRewardTokenPrices(rwTokens, VERSION.ELASTIC);\n  var priceMap = useMemo(function () {\n    return prices === null || prices === void 0 ? void 0 : prices.reduce(function (acc, cur, index) {\n      var _rwTokens$index;\n\n      return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, (_rwTokens$index = rwTokens[index]) !== null && _rwTokens$index !== void 0 && _rwTokens$index.isToken ? rwTokens[index].address : ZERO_ADDRESS, cur));\n    }, {});\n  }, [prices, rwTokens]);\n  var totalUserReward = useMemo(function () {\n    var temp = {};\n    farms.forEach(function (farm) {\n      var tks = farm.rewardTokens;\n      farm.userDepositedNFTs.forEach(function (pos) {\n        pos.rewardPendings.forEach(function (amount, index) {\n          var tkAddress = tks[index];\n          if (temp[tkAddress]) temp[tkAddress] = temp[tkAddress].add(amount);else temp[tkAddress] = amount;\n        });\n      });\n    });\n    var usd = 0;\n    var amounts = [];\n    Object.keys(temp).forEach(function (key) {\n      var token = rwTokenMap[key];\n      var price = priceMap[key];\n\n      if (token) {\n        var amount = CurrencyAmount.fromRawAmount(token, temp[key].toString());\n        usd += price * parseFloat(amount.toExact());\n        if (amount.greaterThan(0)) amounts.push(amount);\n      }\n    });\n    return {\n      totalUsdValue: usd,\n      amounts: amounts\n    };\n  }, [farms, rwTokenMap, priceMap]);\n  var depositedUsd = Object.values(userPoolFarmInfo).reduce(function (acc, cur) {\n    return acc + cur.usdValue;\n  }, 0);\n  var userDepositedTokenAmounts = Object.values(userPoolFarmInfo).reduce(function (result, info) {\n    var address0 = info.token0Amount.currency.address;\n    var address1 = info.token1Amount.currency.address;\n    if (!result[address0]) result[address0] = info.token0Amount;else result[address0] = result[address0].add(info.token0Amount);\n    if (!result[address1]) result[address1] = info.token1Amount;else result[address1] = result[address1].add(info.token1Amount);\n    return result;\n  }, {});\n  var failedNFTs = useFailedNFTs();\n  var userNFTs = farms.map(function (farm) {\n    return farm.userDepositedNFTs.map(function (item) {\n      return item.tokenId.toString();\n    });\n  }).flat();\n  var hasAffectedByFarmIssue = userNFTs.some(function (id) {\n    return failedNFTs.includes(id);\n  });\n  var toggleWalletModal = useWalletModalToggle();\n  var posManager = useProAmmNFTPositionManagerContract();\n  var res = useSingleCallResult(posManager, 'isApprovedForAll', [account || ZERO_ADDRESS, address]);\n  var isApprovedForAll = res === null || res === void 0 ? void 0 : (_res$result = res.result) === null || _res$result === void 0 ? void 0 : _res$result[0];\n\n  var _useFarmAction = useFarmAction(address),\n      approve = _useFarmAction.approve;\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      approvalTx = _useState4[0],\n      setApprovalTx = _useState4[1];\n\n  var isApprovalTxPending = useIsTransactionPending(approvalTx);\n\n  var handleApprove = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var tx;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (isApprovedForAll) {\n                _context.next = 5;\n                break;\n              }\n\n              _context.next = 3;\n              return approve();\n\n            case 3:\n              tx = _context.sent;\n              setApprovalTx(tx);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleApprove() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var aggregateDepositedInfo = useCallback(function (_ref6) {\n    var poolAddress = _ref6.poolAddress,\n        usdValue = _ref6.usdValue,\n        token0Amount = _ref6.token0Amount,\n        token1Amount = _ref6.token1Amount;\n    setUserPoolFarmInfo(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, poolAddress, {\n        usdValue: usdValue,\n        token0Amount: token0Amount,\n        token1Amount: token1Amount\n      }));\n    });\n  }, []);\n  var qs = useParsedQueryString();\n  var tab = qs.type || 'active';\n  if (!farms) return null;\n  var canHarvest = farms.some(function (farm) {\n    return farm.userDepositedNFTs.some(function (pos) {\n      return !!pos.rewardPendings.length;\n    });\n  });\n  var canWithdraw = farms.some(function (farms) {\n    return farms.userDepositedNFTs.length;\n  });\n\n  var renderApproveButton = function renderApproveButton() {\n    if (isApprovedForAll || tab === 'ended') {\n      return null;\n    }\n\n    if (approvalTx && isApprovalTxPending) {\n      return /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n        style: {\n          whiteSpace: 'nowrap',\n          height: '38px',\n          padding: '0 12px'\n        },\n        onClick: handleApprove,\n        disabled: true,\n        children: [/*#__PURE__*/_jsxDEV(Info, {\n          width: \"16px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Text, {\n          fontSize: \"14px\",\n          marginLeft: \"8px\",\n          children: /*#__PURE__*/_jsxDEV(Dots, {\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Approving\"\n            }, void 0, false, void 0, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, _this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(MouseoverTooltipDesktopOnly, {\n      text: /*#__PURE__*/_jsxDEV(Text, {\n        color: theme.subText,\n        as: \"span\",\n        children: /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"Authorize the farming contract so it can access your liquidity positions (i.e. your NFT tokens). Then deposit your liquidity positions using the <0>Deposit</0> button\",\n          components: {\n            0: /*#__PURE__*/_jsxDEV(Text, {\n              as: \"span\",\n              color: theme.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, _this)\n          }\n        }, void 0, false, void 0, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }, _this),\n      width: \"400px\",\n      placement: \"top\",\n      children: /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n        style: {\n          whiteSpace: 'nowrap',\n          height: '38px',\n          padding: '0 12px'\n        },\n        onClick: handleApprove,\n        children: [/*#__PURE__*/_jsxDEV(Info, {\n          width: \"16px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Text, {\n          fontSize: \"14px\",\n          marginLeft: \"8px\",\n          children: approvalTx && isApprovalTxPending ? /*#__PURE__*/_jsxDEV(Dots, {\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Approving\"\n            }, void 0, false, void 0, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, _this) : /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Approve Farming Contract\"\n          }, void 0, false, void 0, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var renderTopButtonsOnDesktop = function renderTopButtonsOnDesktop() {\n    if (!isApprovedForAll && res !== null && res !== void 0 && res.loading) {\n      return /*#__PURE__*/_jsxDEV(Dots, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 14\n      }, _this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Flex, {\n      sx: {\n        gap: '12px'\n      },\n      alignItems: \"center\",\n      children: [!account ? /*#__PURE__*/_jsxDEV(ConnectWalletButton, {\n        onClick: toggleWalletModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 21\n      }, _this) : renderApproveButton(), /*#__PURE__*/_jsxDEV(DepositButton, {\n        disabled: !account || !isApprovedForAll || tab === 'ended',\n        onClick: function onClick() {\n          return onOpenModal('deposit');\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(WithdrawButton, {\n        disabled: !account || !canWithdraw || !isApprovedForAll,\n        onClick: function onClick() {\n          return onOpenModal('withdraw');\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, _this), !!hasAffectedByFarmIssue && /*#__PURE__*/_jsxDEV(ForceWithdrawButton, {\n        onClick: function onClick() {\n          return onOpenModal('forcedWithdraw');\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 38\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var renderFarmGroupHeaderOnDesktop = function renderFarmGroupHeaderOnDesktop() {\n    return /*#__PURE__*/_jsxDEV(Flex, {\n      sx: {\n        alignItems: 'center',\n        padding: '0 1rem',\n        justifyContent: 'space-between',\n        height: '72px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        sx: {\n          fontWeight: 500,\n          fontSize: '16px',\n          lineHeight: '20px',\n          color: theme.subText\n        },\n        children: /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"Farming Contract\"\n        }, void 0, false, void 0, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Flex, {\n        sx: {\n          alignItems: 'center',\n          gap: '16px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Flex, {\n          alignItems: \"center\",\n          sx: {\n            gap: '12px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Text, {\n            fontSize: \"12px\",\n            color: theme.subText,\n            children: [/*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Deposited Liquidity\"\n            }, void 0, false, void 0, _this), /*#__PURE__*/_jsxDEV(InfoHelper, {\n              text:\n              /*i18n*/\n              i18n._(\"Total value of liquidity positions (i.e. NFT tokens) you've deposited into the farming contract\"),\n              placement: \"top\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(HoverDropdown, {\n            style: {\n              padding: '8px 0'\n            },\n            content: account ? /*#__PURE__*/_jsxDEV(Text, {\n              as: \"span\",\n              sx: {\n                fontSize: '16px',\n                fontWeight: 500\n              },\n              children: formatDollarAmount(depositedUsd)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 19\n            }, _this) : '--',\n            hideIcon: !account,\n            dropdownContent: Object.values(userDepositedTokenAmounts).some(function (amount) {\n              return amount.greaterThan(0);\n            }) ? /*#__PURE__*/_jsxDEV(AutoColumn, {\n              gap: \"sm\",\n              children: Object.values(userDepositedTokenAmounts).map(function (amount) {\n                return amount.greaterThan(0) && /*#__PURE__*/_jsxDEV(Flex, {\n                  alignItems: \"center\",\n                  children: [/*#__PURE__*/_jsxDEV(CurrencyLogo, {\n                    currency: amount.currency,\n                    size: \"16px\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 372,\n                    columnNumber: 29\n                  }, _this), /*#__PURE__*/_jsxDEV(Text, {\n                    fontSize: \"12px\",\n                    marginLeft: \"4px\",\n                    children: amount.toSignificant(8)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 373,\n                    columnNumber: 29\n                  }, _this)]\n                }, amount.currency.address, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 27\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 19\n            }, _this) : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, _this), renderTopButtonsOnDesktop()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var renderFarmGroupHeaderOnMobile = function renderFarmGroupHeaderOnMobile() {\n    var renderDepositedLiquidity = function renderDepositedLiquidity() {\n      return /*#__PURE__*/_jsxDEV(Flex, {\n        flexDirection: \"column\",\n        justifyContent: 'center',\n        sx: {\n          gap: '4px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          fontSize: \"12px\",\n          color: theme.subText,\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Deposited Liquidity\"\n          }, void 0, false, void 0, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(HoverDropdown, {\n          style: {\n            padding: '0'\n          },\n          content: account ? /*#__PURE__*/_jsxDEV(Text, {\n            as: \"span\",\n            sx: {\n              fontSize: '16px',\n              fontWeight: 500\n            },\n            children: formatDollarAmount(depositedUsd)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 17\n          }, _this) : '--',\n          hideIcon: !account,\n          dropdownContent: Object.values(userDepositedTokenAmounts).some(function (amount) {\n            return amount.greaterThan(0);\n          }) ? /*#__PURE__*/_jsxDEV(AutoColumn, {\n            gap: \"sm\",\n            children: Object.values(userDepositedTokenAmounts).map(function (amount) {\n              return amount.greaterThan(0) && /*#__PURE__*/_jsxDEV(Flex, {\n                alignItems: \"center\",\n                children: [/*#__PURE__*/_jsxDEV(CurrencyLogo, {\n                  currency: amount.currency,\n                  size: \"16px\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 27\n                }, _this), /*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"12px\",\n                  marginLeft: \"4px\",\n                  children: amount.toSignificant(8)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 27\n                }, _this)]\n              }, amount.currency.address, true, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 25\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 17\n          }, _this) : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, _this);\n    };\n\n    var renderLeftGroup = function renderLeftGroup() {\n      if (!account) {\n        return /*#__PURE__*/_jsxDEV(ConnectWalletButton, {\n          onClick: toggleWalletModal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 16\n        }, _this);\n      }\n\n      if (!isApprovedForAll) {\n        if (res !== null && res !== void 0 && res.loading) {\n          return /*#__PURE__*/_jsxDEV(Dots, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 18\n          }, _this);\n        }\n\n        return /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n          style: {\n            whiteSpace: 'nowrap',\n            height: '38px',\n            padding: '0 12px'\n          },\n          onClick: handleApprove,\n          children: [/*#__PURE__*/_jsxDEV(MouseoverTooltip, {\n            text: /*#__PURE__*/_jsxDEV(Text, {\n              color: theme.subText,\n              as: \"span\",\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Authorize the farming contract so it can access your liquidity positions (i.e. your NFT tokens). Then deposit your liquidity positions using the <0>Deposit</0> button\",\n                components: {\n                  0: /*#__PURE__*/_jsxDEV(Text, {\n                    as: \"span\",\n                    color: theme.text\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 475,\n                    columnNumber: 21\n                  }, _this)\n                }\n              }, void 0, false, void 0, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 17\n            }, _this),\n            placement: \"top\",\n            children: /*#__PURE__*/_jsxDEV(Flex, {\n              width: \"24px\",\n              height: \"24px\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              children: /*#__PURE__*/_jsxDEV(Info, {\n                width: \"16px\",\n                height: \"16px\",\n                onClick: function onClick(e) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Text, {\n            fontSize: \"14px\",\n            children: approvalTx && isApprovalTxPending ? /*#__PURE__*/_jsxDEV(Dots, {\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Approving\"\n              }, void 0, false, void 0, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 17\n            }, _this) : /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Approve\"\n            }, void 0, false, void 0, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, _this);\n      }\n\n      return renderDepositedLiquidity();\n    };\n\n    return /*#__PURE__*/_jsxDEV(Flex, {\n      sx: {\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        height: '72px',\n        gap: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Flex, {\n        sx: {\n          alignItems: 'center',\n          height: '100%',\n          flex: '1 1'\n        },\n        children: renderLeftGroup()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(DepositButton, {\n        disabled: !account || !isApprovedForAll || tab === 'ended',\n        onClick: function onClick() {\n          return onOpenModal('deposit');\n        },\n        style: {\n          flex: '0 0 44px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(WithdrawButton, {\n        disabled: !account || !canWithdraw || !isApprovedForAll,\n        onClick: function onClick() {\n          return onOpenModal('withdraw');\n        },\n        style: {\n          flex: '0 0 44px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var renderTableHeaderOnDesktop = function renderTableHeaderOnDesktop() {\n    return /*#__PURE__*/_jsxDEV(ProMMFarmTableHeader, {\n      children: [/*#__PURE__*/_jsxDEV(Flex, {\n        \"grid-area\": \"token_pairs\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        children: /*#__PURE__*/_jsxDEV(ClickableText, {\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Pool\"\n          }, void 0, false, void 0, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Flex, {\n        \"grid-area\": \"liq\",\n        alignItems: \"center\",\n        justifyContent: \"flex-end\",\n        children: /*#__PURE__*/_jsxDEV(ClickableText, {\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Staked TVL\"\n          }, void 0, false, void 0, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Flex, {\n        \"grid-area\": \"apy\",\n        alignItems: \"center\",\n        justifyContent: \"flex-end\",\n        children: [/*#__PURE__*/_jsxDEV(ClickableText, {\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"AVG APR\"\n          }, void 0, false, void 0, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(InfoHelper, {\n          text:\n          /*i18n*/\n          i18n._(\"Average estimated return based on yearly fees of the pool and if it's still active, plus bonus rewards of the pool\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Flex, {\n        \"grid-area\": \"end\",\n        alignItems: \"center\",\n        justifyContent: \"flex-end\",\n        children: [/*#__PURE__*/_jsxDEV(ClickableText, {\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Ending In\"\n          }, void 0, false, void 0, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(InfoHelper, {\n          text:\n          /*i18n*/\n          i18n._(\"Once a farm has ended, you will continue to receive returns through LP Fees\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Flex, {\n        \"grid-area\": \"staked_balance\",\n        alignItems: \"center\",\n        justifyContent: \"flex-end\",\n        children: /*#__PURE__*/_jsxDEV(ClickableText, {\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"My Deposit\"\n          }, void 0, false, void 0, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Flex, {\n        \"grid-area\": \"reward\",\n        alignItems: \"center\",\n        justifyContent: \"flex-end\",\n        children: /*#__PURE__*/_jsxDEV(ClickableText, {\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"My Rewards\"\n          }, void 0, false, void 0, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Flex, {\n        \"grid-area\": \"action\",\n        alignItems: \"center\",\n        justifyContent: \"flex-end\",\n        children: /*#__PURE__*/_jsxDEV(ClickableText, {\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Actions\"\n          }, void 0, false, void 0, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var renderRewardRowOnDesktop = function renderRewardRowOnDesktop() {\n    return /*#__PURE__*/_jsxDEV(FarmRow, {\n      children: [/*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        sx: {\n          gap: '24px'\n        },\n        justifyContent: above768 ? 'flex-end' : 'space-between',\n        width: above768 ? undefined : '100%',\n        children: [/*#__PURE__*/_jsxDEV(Flex, {\n          alignItems: \"center\",\n          sx: {\n            gap: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Text, {\n            fontSize: \"12px\",\n            color: theme.subText,\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Total Rewards\"\n            }, void 0, false, void 0, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 615,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(HoverDropdown, {\n            style: {\n              padding: '8px 0'\n            },\n            content: account ? /*#__PURE__*/_jsxDEV(Text, {\n              as: \"span\",\n              sx: {\n                fontSize: '16px',\n                fontWeight: 500\n              },\n              children: formatDollarAmount(totalUserReward.totalUsdValue)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 19\n            }, _this) : '--',\n            hideIcon: !account,\n            dropdownContent: totalUserReward.amounts.length ? /*#__PURE__*/_jsxDEV(AutoColumn, {\n              gap: \"sm\",\n              children: totalUserReward.amounts.map(function (amount) {\n                return amount.greaterThan(0) && /*#__PURE__*/_jsxDEV(Flex, {\n                  alignItems: \"center\",\n                  children: [/*#__PURE__*/_jsxDEV(CurrencyLogo, {\n                    currency: amount.currency,\n                    size: \"16px\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 644,\n                    columnNumber: 29\n                  }, _this), /*#__PURE__*/_jsxDEV(Text, {\n                    fontSize: \"12px\",\n                    marginLeft: \"4px\",\n                    children: amount.toSignificant(8)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 645,\n                    columnNumber: 29\n                  }, _this)]\n                }, amount.currency.address, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 27\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 19\n            }, _this) : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 619,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(HarvestAllButton, {\n          onClick: function onClick() {\n            return onOpenModal('harvest');\n          },\n          disabled: !account || !canHarvest\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, _this), hasAffectedByFarmIssue && !above768 && /*#__PURE__*/_jsxDEV(BtnPrimary, {\n        style: {\n          color: theme.red,\n          border: \"1px solid \".concat(theme.red),\n          background: theme.red + '33'\n        },\n        padding: '12px',\n        onClick: function onClick() {\n          return onOpenModal('forcedWithdraw');\n        },\n        children: [/*#__PURE__*/_jsxDEV(Withdraw, {\n          width: 20,\n          height: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(Text, {\n          fontSize: \"14px\",\n          marginLeft: \"4px\",\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Force Withdraw\"\n          }, void 0, false, void 0, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 663,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var renderRewardRowOnMobile = function renderRewardRowOnMobile() {\n    return /*#__PURE__*/_jsxDEV(Flex, {\n      sx: {\n        height: '68px',\n        alignItems: 'center',\n        justifyContent: 'space-between'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Flex, {\n        flexDirection: \"column\",\n        justifyContent: 'center',\n        sx: {\n          gap: '4px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          fontSize: \"12px\",\n          color: theme.subText,\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Total Rewards\"\n          }, void 0, false, void 0, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(HoverDropdown, {\n          style: {\n            padding: '0'\n          },\n          content: account ? /*#__PURE__*/_jsxDEV(Text, {\n            as: \"span\",\n            sx: {\n              fontSize: '16px',\n              fontWeight: 500\n            },\n            children: formatDollarAmount(totalUserReward.totalUsdValue)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 702,\n            columnNumber: 17\n          }, _this) : '--',\n          hideIcon: !account,\n          dropdownContent: totalUserReward.amounts.length ? /*#__PURE__*/_jsxDEV(AutoColumn, {\n            gap: \"sm\",\n            children: totalUserReward.amounts.map(function (amount) {\n              return amount.greaterThan(0) && /*#__PURE__*/_jsxDEV(Flex, {\n                alignItems: \"center\",\n                children: [/*#__PURE__*/_jsxDEV(CurrencyLogo, {\n                  currency: amount.currency,\n                  size: \"16px\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 723,\n                  columnNumber: 27\n                }, _this), /*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"12px\",\n                  marginLeft: \"4px\",\n                  children: amount.toSignificant(8)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 724,\n                  columnNumber: 27\n                }, _this)]\n              }, amount.currency.address, true, {\n                fileName: _jsxFileName,\n                lineNumber: 722,\n                columnNumber: 25\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 17\n          }, _this) : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 698,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 687,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(HarvestAllButton, {\n        onClick: function onClick() {\n          return onOpenModal('harvest');\n        },\n        disabled: !account || !canHarvest\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 680,\n      columnNumber: 7\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(FarmContent, {\n    children: [above1000 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [renderFarmGroupHeaderOnDesktop(), renderTableHeaderOnDesktop(), renderRewardRowOnDesktop()]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(Flex, {\n      flexDirection: \"column\",\n      padding: \"0 1rem\",\n      sx: {\n        backgroundColor: rgba(theme.buttonBlack, 0.4)\n      },\n      children: [renderFarmGroupHeaderOnMobile(), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 754,\n        columnNumber: 11\n      }, _this), renderRewardRowOnMobile(), !!hasAffectedByFarmIssue && /*#__PURE__*/_jsxDEV(ForceWithdrawButton, {\n        style: {\n          width: '100%',\n          marginBottom: '1rem'\n        },\n        onClick: function onClick() {\n          return onOpenModal('forcedWithdraw');\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 757,\n        columnNumber: 13\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 752,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 765,\n      columnNumber: 7\n    }, _this), farms.map(function (farm, index) {\n      return /*#__PURE__*/_jsxDEV(Row, {\n        isUserAffectedByFarmIssue: hasAffectedByFarmIssue,\n        isApprovedForAll: isApprovedForAll,\n        farm: farm,\n        onOpenModal: onOpenModal,\n        onUpdateDepositedInfo: aggregateDepositedInfo,\n        fairlaunchAddress: address,\n        onHarvest: function onHarvest() {\n          onOpenModal('harvest', farm.pid);\n        }\n      }, farm.poolAddress + '_' + index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 769,\n        columnNumber: 11\n      }, _this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 744,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(ProMMFarmGroup, \"TLn/maBdQP+QZIdVja+UpPGPehE=\", false, function () {\n  return [useTheme, useActiveWeb3React, useMedia, useMedia, useTokens, useRewardTokenPrices, useFailedNFTs, useWalletModalToggle, useProAmmNFTPositionManagerContract, useSingleCallResult, useFarmAction, useIsTransactionPending, useParsedQueryString];\n});\n\n_c3 = ProMMFarmGroup;\nexport default ProMMFarmGroup;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"FarmContent\");\n$RefreshReg$(_c2, \"FarmRow\");\n$RefreshReg$(_c3, \"ProMMFarmGroup\");","map":{"version":3,"names":["CurrencyAmount","rgba","useCallback","useMemo","useState","Info","useMedia","Flex","Text","styled","ButtonPrimary","AutoColumn","CurrencyLogo","Divider","HoverDropdown","Withdraw","InfoHelper","MouseoverTooltip","MouseoverTooltipDesktopOnly","ZERO_ADDRESS","VERSION","useActiveWeb3React","useTokens","useProAmmNFTPositionManagerContract","useParsedQueryString","useTheme","Dots","useWalletModalToggle","useRewardTokenPrices","useFailedNFTs","useFarmAction","useSingleCallResult","useIsTransactionPending","formatDollarAmount","ClickableText","ProMMFarmTableHeader","Row","BtnPrimary","ConnectWalletButton","DepositButton","ForceWithdrawButton","HarvestAllButton","WithdrawButton","FarmContent","div","theme","background","FarmRow","buttonBlack","mediaWidth","upToMedium","ProMMFarmGroup","address","onOpenModal","farms","account","above768","above1000","userPoolFarmInfo","setUserPoolFarmInfo","rewardAddresses","rws","reduce","acc","cur","rewardTokens","Set","rwTokenMap","rwTokens","Object","values","prices","ELASTIC","priceMap","index","isToken","totalUserReward","temp","forEach","farm","tks","userDepositedNFTs","pos","rewardPendings","amount","tkAddress","add","usd","amounts","keys","key","token","price","fromRawAmount","toString","parseFloat","toExact","greaterThan","push","totalUsdValue","depositedUsd","usdValue","userDepositedTokenAmounts","result","info","address0","token0Amount","currency","address1","token1Amount","failedNFTs","userNFTs","map","item","tokenId","flat","hasAffectedByFarmIssue","some","id","includes","toggleWalletModal","posManager","res","isApprovedForAll","approve","approvalTx","setApprovalTx","isApprovalTxPending","handleApprove","tx","aggregateDepositedInfo","poolAddress","prev","qs","tab","type","canHarvest","length","canWithdraw","renderApproveButton","whiteSpace","height","padding","subText","text","renderTopButtonsOnDesktop","loading","gap","renderFarmGroupHeaderOnDesktop","alignItems","justifyContent","fontWeight","fontSize","lineHeight","color","toSignificant","renderFarmGroupHeaderOnMobile","renderDepositedLiquidity","renderLeftGroup","e","preventDefault","stopPropagation","flex","renderTableHeaderOnDesktop","renderRewardRowOnDesktop","undefined","red","border","renderRewardRowOnMobile","backgroundColor","width","marginBottom","pid"],"sources":["/Applications/XAMPP/voxel-interface/src/components/YieldPools/ProMMFarmGroup/index.tsx"],"sourcesContent":["import { CurrencyAmount, Token } from '@kyberswap/ks-sdk-core'\nimport { Trans, t } from '@lingui/macro'\nimport { BigNumber } from 'ethers'\nimport { rgba } from 'polished'\nimport { useCallback, useMemo, useState } from 'react'\nimport { Info } from 'react-feather'\nimport { useMedia } from 'react-use'\nimport { Flex, Text } from 'rebass'\nimport styled from 'styled-components'\n\nimport { ButtonPrimary } from 'components/Button'\nimport { AutoColumn } from 'components/Column'\nimport CurrencyLogo from 'components/CurrencyLogo'\nimport Divider from 'components/Divider'\nimport HoverDropdown from 'components/HoverDropdown'\nimport Withdraw from 'components/Icons/Withdraw'\nimport InfoHelper from 'components/InfoHelper'\nimport { MouseoverTooltip, MouseoverTooltipDesktopOnly } from 'components/Tooltip'\nimport { ZERO_ADDRESS } from 'constants/index'\nimport { VERSION } from 'constants/v2'\nimport { useActiveWeb3React } from 'hooks'\nimport { useTokens } from 'hooks/Tokens'\nimport { useProAmmNFTPositionManagerContract } from 'hooks/useContract'\nimport useParsedQueryString from 'hooks/useParsedQueryString'\nimport useTheme from 'hooks/useTheme'\nimport { Dots } from 'pages/Pool/styleds'\nimport { useWalletModalToggle } from 'state/application/hooks'\nimport { useRewardTokenPrices } from 'state/farms/hooks'\nimport { useFailedNFTs, useFarmAction } from 'state/farms/promm/hooks'\nimport { ProMMFarm } from 'state/farms/promm/types'\nimport { useSingleCallResult } from 'state/multicall/hooks'\nimport { useIsTransactionPending } from 'state/transactions/hooks'\nimport { formatDollarAmount } from 'utils/numbers'\n\nimport { ClickableText, ProMMFarmTableHeader } from '../styleds'\nimport Row from './Row'\nimport {\n  BtnPrimary,\n  ConnectWalletButton,\n  DepositButton,\n  ForceWithdrawButton,\n  HarvestAllButton,\n  WithdrawButton,\n} from './buttons'\n\nconst FarmContent = styled.div`\n  background: ${({ theme }) => theme.background};\n  border-radius: 20px;\n  overflow: hidden;\n`\n\nconst FarmRow = styled.div`\n  height: 68px;\n\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  background-color: ${({ theme }) => rgba(theme.buttonBlack, 0.4)};\n  padding: 0 1rem;\n\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    width: 100%;\n    flex-direction: column;\n    gap: 20px;\n    align-items: flex-start;\n  `}\n`\n\ntype Props = {\n  address: string\n  onOpenModal: (\n    modalType: 'forcedWithdraw' | 'harvest' | 'deposit' | 'withdraw' | 'stake' | 'unstake',\n    pid?: number,\n  ) => void\n  farms: ProMMFarm[]\n}\n\nconst ProMMFarmGroup: React.FC<Props> = ({ address, onOpenModal, farms }) => {\n  const theme = useTheme()\n  const { account } = useActiveWeb3React()\n  const above768 = useMedia('(min-width: 768px)')\n  const above1000 = useMedia('(min-width: 1000px)')\n\n  const [userPoolFarmInfo, setUserPoolFarmInfo] = useState<{\n    [pid: number]: {\n      usdValue: number\n      token0Amount: CurrencyAmount<Token>\n      token1Amount: CurrencyAmount<Token>\n    }\n  }>({})\n\n  const rewardAddresses = useMemo(() => {\n    const rws = farms.reduce((acc, cur) => [...acc, ...cur.rewardTokens], [] as string[])\n    return [...new Set(rws)]\n  }, [farms])\n\n  const rwTokenMap = useTokens(rewardAddresses)\n\n  const rwTokens = useMemo(() => Object.values(rwTokenMap), [rwTokenMap])\n  const prices = useRewardTokenPrices(rwTokens, VERSION.ELASTIC)\n\n  const priceMap: { [key: string]: number } = useMemo(\n    () =>\n      prices?.reduce(\n        (acc, cur, index) => ({\n          ...acc,\n          [rwTokens[index]?.isToken ? rwTokens[index].address : ZERO_ADDRESS]: cur,\n        }),\n        {},\n      ),\n    [prices, rwTokens],\n  )\n\n  const totalUserReward: { totalUsdValue: number; amounts: CurrencyAmount<Token>[] } = useMemo(() => {\n    const temp: { [address: string]: BigNumber } = {}\n    farms.forEach(farm => {\n      const tks = farm.rewardTokens\n\n      farm.userDepositedNFTs.forEach(pos => {\n        pos.rewardPendings.forEach((amount, index) => {\n          const tkAddress = tks[index]\n          if (temp[tkAddress]) temp[tkAddress] = temp[tkAddress].add(amount)\n          else temp[tkAddress] = amount\n        })\n      })\n    })\n\n    let usd = 0\n    const amounts: CurrencyAmount<Token>[] = []\n\n    Object.keys(temp).forEach((key: string) => {\n      const token = rwTokenMap[key]\n      const price = priceMap[key]\n\n      if (token) {\n        const amount = CurrencyAmount.fromRawAmount(token, temp[key].toString())\n        usd += price * parseFloat(amount.toExact())\n        if (amount.greaterThan(0)) amounts.push(amount)\n      }\n    })\n\n    return {\n      totalUsdValue: usd,\n      amounts,\n    }\n  }, [farms, rwTokenMap, priceMap])\n\n  const depositedUsd = Object.values(userPoolFarmInfo).reduce((acc, cur) => acc + cur.usdValue, 0)\n\n  const userDepositedTokenAmounts = Object.values(userPoolFarmInfo).reduce<{\n    [address: string]: CurrencyAmount<Token>\n  }>((result, info) => {\n    const address0 = info.token0Amount.currency.address\n    const address1 = info.token1Amount.currency.address\n\n    if (!result[address0]) result[address0] = info.token0Amount\n    else result[address0] = result[address0].add(info.token0Amount)\n\n    if (!result[address1]) result[address1] = info.token1Amount\n    else result[address1] = result[address1].add(info.token1Amount)\n\n    return result\n  }, {})\n\n  const failedNFTs = useFailedNFTs()\n  const userNFTs = farms.map(farm => farm.userDepositedNFTs.map(item => item.tokenId.toString())).flat()\n  const hasAffectedByFarmIssue = userNFTs.some(id => failedNFTs.includes(id))\n\n  const toggleWalletModal = useWalletModalToggle()\n  const posManager = useProAmmNFTPositionManagerContract()\n\n  const res = useSingleCallResult(posManager, 'isApprovedForAll', [account || ZERO_ADDRESS, address])\n  const isApprovedForAll = res?.result?.[0]\n\n  const { approve } = useFarmAction(address)\n  const [approvalTx, setApprovalTx] = useState('')\n\n  const isApprovalTxPending = useIsTransactionPending(approvalTx)\n\n  const handleApprove = async () => {\n    if (!isApprovedForAll) {\n      const tx = await approve()\n      setApprovalTx(tx)\n    }\n  }\n\n  const aggregateDepositedInfo = useCallback(\n    ({\n      poolAddress,\n      usdValue,\n      token0Amount,\n      token1Amount,\n    }: {\n      poolAddress: string | number\n      usdValue: number\n      token0Amount: CurrencyAmount<Token>\n      token1Amount: CurrencyAmount<Token>\n    }) => {\n      setUserPoolFarmInfo(prev => ({\n        ...prev,\n        [poolAddress]: {\n          usdValue,\n          token0Amount,\n          token1Amount,\n        },\n      }))\n    },\n    [],\n  )\n\n  const qs = useParsedQueryString()\n  const tab = qs.type || 'active'\n\n  if (!farms) return null\n\n  const canHarvest = farms.some(farm => farm.userDepositedNFTs.some(pos => !!pos.rewardPendings.length))\n  const canWithdraw = farms.some(farms => farms.userDepositedNFTs.length)\n\n  const renderApproveButton = () => {\n    if (isApprovedForAll || tab === 'ended') {\n      return null\n    }\n\n    if (approvalTx && isApprovalTxPending) {\n      return (\n        <ButtonPrimary\n          style={{\n            whiteSpace: 'nowrap',\n            height: '38px',\n            padding: '0 12px',\n          }}\n          onClick={handleApprove}\n          disabled\n        >\n          <Info width=\"16px\" />\n          <Text fontSize=\"14px\" marginLeft=\"8px\">\n            <Dots>\n              <Trans>Approving</Trans>\n            </Dots>\n          </Text>\n        </ButtonPrimary>\n      )\n    }\n\n    return (\n      <MouseoverTooltipDesktopOnly\n        text={\n          <Text color={theme.subText} as=\"span\">\n            <Trans>\n              Authorize the farming contract so it can access your liquidity positions (i.e. your NFT tokens). Then\n              deposit your liquidity positions using the{' '}\n              <Text as=\"span\" color={theme.text}>\n                Deposit\n              </Text>{' '}\n              button\n            </Trans>\n          </Text>\n        }\n        width=\"400px\"\n        placement=\"top\"\n      >\n        <ButtonPrimary\n          style={{\n            whiteSpace: 'nowrap',\n            height: '38px',\n            padding: '0 12px',\n          }}\n          onClick={handleApprove}\n        >\n          <Info width=\"16px\" />\n          <Text fontSize=\"14px\" marginLeft=\"8px\">\n            {approvalTx && isApprovalTxPending ? (\n              <Dots>\n                <Trans>Approving</Trans>\n              </Dots>\n            ) : (\n              <Trans>Approve Farming Contract</Trans>\n            )}\n          </Text>\n        </ButtonPrimary>\n      </MouseoverTooltipDesktopOnly>\n    )\n  }\n\n  const renderTopButtonsOnDesktop = () => {\n    if (!isApprovedForAll && res?.loading) {\n      return <Dots />\n    }\n\n    return (\n      <Flex sx={{ gap: '12px' }} alignItems=\"center\">\n        {!account ? <ConnectWalletButton onClick={toggleWalletModal} /> : renderApproveButton()}\n        <DepositButton\n          disabled={!account || !isApprovedForAll || tab === 'ended'}\n          onClick={() => onOpenModal('deposit')}\n        />\n        <WithdrawButton\n          disabled={!account || !canWithdraw || !isApprovedForAll}\n          onClick={() => onOpenModal('withdraw')}\n        />\n\n        {!!hasAffectedByFarmIssue && <ForceWithdrawButton onClick={() => onOpenModal('forcedWithdraw')} />}\n      </Flex>\n    )\n  }\n\n  const renderFarmGroupHeaderOnDesktop = () => {\n    return (\n      <Flex\n        sx={{\n          alignItems: 'center',\n          padding: '0 1rem',\n          justifyContent: 'space-between',\n          height: '72px',\n        }}\n      >\n        <Text\n          sx={{\n            fontWeight: 500,\n            fontSize: '16px',\n            lineHeight: '20px',\n            color: theme.subText,\n          }}\n        >\n          <Trans>Farming Contract</Trans>\n        </Text>\n        <Flex\n          sx={{\n            alignItems: 'center',\n            gap: '16px',\n          }}\n        >\n          <Flex\n            alignItems=\"center\"\n            sx={{\n              gap: '12px',\n            }}\n          >\n            <Text fontSize=\"12px\" color={theme.subText}>\n              <Trans>Deposited Liquidity</Trans>\n              <InfoHelper\n                text={t`Total value of liquidity positions (i.e. NFT tokens) you've deposited into the farming contract`}\n                placement=\"top\"\n              />\n            </Text>\n\n            <HoverDropdown\n              style={{ padding: '8px 0' }}\n              content={\n                account ? (\n                  <Text\n                    as=\"span\"\n                    sx={{\n                      fontSize: '16px',\n                      fontWeight: 500,\n                    }}\n                  >\n                    {formatDollarAmount(depositedUsd)}\n                  </Text>\n                ) : (\n                  '--'\n                )\n              }\n              hideIcon={!account}\n              dropdownContent={\n                Object.values(userDepositedTokenAmounts).some(amount => amount.greaterThan(0)) ? (\n                  <AutoColumn gap=\"sm\">\n                    {Object.values(userDepositedTokenAmounts).map(\n                      amount =>\n                        amount.greaterThan(0) && (\n                          <Flex alignItems=\"center\" key={amount.currency.address}>\n                            <CurrencyLogo currency={amount.currency} size=\"16px\" />\n                            <Text fontSize=\"12px\" marginLeft=\"4px\">\n                              {amount.toSignificant(8)}\n                            </Text>\n                          </Flex>\n                        ),\n                    )}\n                  </AutoColumn>\n                ) : (\n                  ''\n                )\n              }\n            />\n          </Flex>\n          {renderTopButtonsOnDesktop()}\n        </Flex>\n      </Flex>\n    )\n  }\n\n  const renderFarmGroupHeaderOnMobile = () => {\n    const renderDepositedLiquidity = () => {\n      return (\n        <Flex\n          flexDirection=\"column\"\n          justifyContent={'center'}\n          sx={{\n            gap: '4px',\n          }}\n        >\n          <Text fontSize=\"12px\" color={theme.subText}>\n            <Trans>Deposited Liquidity</Trans>\n          </Text>\n\n          <HoverDropdown\n            style={{\n              padding: '0',\n            }}\n            content={\n              account ? (\n                <Text\n                  as=\"span\"\n                  sx={{\n                    fontSize: '16px',\n                    fontWeight: 500,\n                  }}\n                >\n                  {formatDollarAmount(depositedUsd)}\n                </Text>\n              ) : (\n                '--'\n              )\n            }\n            hideIcon={!account}\n            dropdownContent={\n              Object.values(userDepositedTokenAmounts).some(amount => amount.greaterThan(0)) ? (\n                <AutoColumn gap=\"sm\">\n                  {Object.values(userDepositedTokenAmounts).map(\n                    amount =>\n                      amount.greaterThan(0) && (\n                        <Flex alignItems=\"center\" key={amount.currency.address}>\n                          <CurrencyLogo currency={amount.currency} size=\"16px\" />\n                          <Text fontSize=\"12px\" marginLeft=\"4px\">\n                            {amount.toSignificant(8)}\n                          </Text>\n                        </Flex>\n                      ),\n                  )}\n                </AutoColumn>\n              ) : (\n                ''\n              )\n            }\n          />\n        </Flex>\n      )\n    }\n\n    const renderLeftGroup = () => {\n      if (!account) {\n        return <ConnectWalletButton onClick={toggleWalletModal} />\n      }\n\n      if (!isApprovedForAll) {\n        if (res?.loading) {\n          return <Dots />\n        }\n\n        return (\n          <ButtonPrimary\n            style={{\n              whiteSpace: 'nowrap',\n              height: '38px',\n              padding: '0 12px',\n            }}\n            onClick={handleApprove}\n          >\n            <MouseoverTooltip\n              text={\n                <Text color={theme.subText} as=\"span\">\n                  <Trans>\n                    Authorize the farming contract so it can access your liquidity positions (i.e. your NFT tokens).\n                    Then deposit your liquidity positions using the{' '}\n                    <Text as=\"span\" color={theme.text}>\n                      Deposit\n                    </Text>{' '}\n                    button\n                  </Trans>\n                </Text>\n              }\n              placement=\"top\"\n            >\n              <Flex width=\"24px\" height=\"24px\" justifyContent=\"center\" alignItems=\"center\">\n                <Info\n                  width=\"16px\"\n                  height=\"16px\"\n                  onClick={e => {\n                    e.preventDefault()\n                    e.stopPropagation()\n                  }}\n                />\n              </Flex>\n            </MouseoverTooltip>\n\n            <Text fontSize=\"14px\">\n              {approvalTx && isApprovalTxPending ? (\n                <Dots>\n                  <Trans>Approving</Trans>\n                </Dots>\n              ) : (\n                <Trans>Approve</Trans>\n              )}\n            </Text>\n          </ButtonPrimary>\n        )\n      }\n\n      return renderDepositedLiquidity()\n    }\n\n    return (\n      <Flex\n        sx={{\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          height: '72px',\n          gap: '8px',\n        }}\n      >\n        <Flex\n          sx={{\n            alignItems: 'center',\n            height: '100%',\n            flex: '1 1',\n          }}\n        >\n          {renderLeftGroup()}\n        </Flex>\n        <DepositButton\n          disabled={!account || !isApprovedForAll || tab === 'ended'}\n          onClick={() => onOpenModal('deposit')}\n          style={{\n            flex: '0 0 44px',\n          }}\n        />\n        <WithdrawButton\n          disabled={!account || !canWithdraw || !isApprovedForAll}\n          onClick={() => onOpenModal('withdraw')}\n          style={{\n            flex: '0 0 44px',\n          }}\n        />\n      </Flex>\n    )\n  }\n\n  const renderTableHeaderOnDesktop = () => {\n    return (\n      <ProMMFarmTableHeader>\n        <Flex grid-area=\"token_pairs\" alignItems=\"center\" justifyContent=\"flex-start\">\n          <ClickableText>\n            <Trans>Pool</Trans>\n          </ClickableText>\n        </Flex>\n\n        <Flex grid-area=\"liq\" alignItems=\"center\" justifyContent=\"flex-end\">\n          <ClickableText>\n            <Trans>Staked TVL</Trans>\n          </ClickableText>\n        </Flex>\n\n        <Flex grid-area=\"apy\" alignItems=\"center\" justifyContent=\"flex-end\">\n          <ClickableText>\n            <Trans>AVG APR</Trans>\n          </ClickableText>\n          <InfoHelper\n            text={t`Average estimated return based on yearly fees of the pool and if it's still active, plus bonus rewards of the pool`}\n          />\n        </Flex>\n\n        <Flex grid-area=\"end\" alignItems=\"center\" justifyContent=\"flex-end\">\n          <ClickableText>\n            <Trans>Ending In</Trans>\n          </ClickableText>\n          <InfoHelper text={t`Once a farm has ended, you will continue to receive returns through LP Fees`} />\n        </Flex>\n\n        <Flex grid-area=\"staked_balance\" alignItems=\"center\" justifyContent=\"flex-end\">\n          <ClickableText>\n            <Trans>My Deposit</Trans>\n          </ClickableText>\n        </Flex>\n\n        <Flex grid-area=\"reward\" alignItems=\"center\" justifyContent=\"flex-end\">\n          <ClickableText>\n            <Trans>My Rewards</Trans>\n          </ClickableText>\n        </Flex>\n\n        <Flex grid-area=\"action\" alignItems=\"center\" justifyContent=\"flex-end\">\n          <ClickableText>\n            <Trans>Actions</Trans>\n          </ClickableText>\n        </Flex>\n      </ProMMFarmTableHeader>\n    )\n  }\n\n  const renderRewardRowOnDesktop = () => {\n    return (\n      <FarmRow>\n        <Flex\n          alignItems=\"center\"\n          sx={{ gap: '24px' }}\n          justifyContent={above768 ? 'flex-end' : 'space-between'}\n          width={above768 ? undefined : '100%'}\n        >\n          <Flex\n            alignItems=\"center\"\n            sx={{\n              gap: '8px',\n            }}\n          >\n            <Text fontSize=\"12px\" color={theme.subText}>\n              <Trans>Total Rewards</Trans>\n            </Text>\n\n            <HoverDropdown\n              style={{ padding: '8px 0' }}\n              content={\n                account ? (\n                  <Text\n                    as=\"span\"\n                    sx={{\n                      fontSize: '16px',\n                      fontWeight: 500,\n                    }}\n                  >\n                    {formatDollarAmount(totalUserReward.totalUsdValue)}\n                  </Text>\n                ) : (\n                  '--'\n                )\n              }\n              hideIcon={!account}\n              dropdownContent={\n                totalUserReward.amounts.length ? (\n                  <AutoColumn gap=\"sm\">\n                    {totalUserReward.amounts.map(\n                      amount =>\n                        amount.greaterThan(0) && (\n                          <Flex alignItems=\"center\" key={amount.currency.address}>\n                            <CurrencyLogo currency={amount.currency} size=\"16px\" />\n                            <Text fontSize=\"12px\" marginLeft=\"4px\">\n                              {amount.toSignificant(8)}\n                            </Text>\n                          </Flex>\n                        ),\n                    )}\n                  </AutoColumn>\n                ) : (\n                  ''\n                )\n              }\n            />\n          </Flex>\n\n          <HarvestAllButton onClick={() => onOpenModal('harvest')} disabled={!account || !canHarvest} />\n        </Flex>\n\n        {hasAffectedByFarmIssue && !above768 && (\n          <BtnPrimary\n            style={{ color: theme.red, border: `1px solid ${theme.red}`, background: theme.red + '33' }}\n            padding={'12px'}\n            onClick={() => onOpenModal('forcedWithdraw')}\n          >\n            <Withdraw width={20} height={20} />\n            <Text fontSize=\"14px\" marginLeft=\"4px\">\n              <Trans>Force Withdraw</Trans>\n            </Text>\n          </BtnPrimary>\n        )}\n      </FarmRow>\n    )\n  }\n\n  const renderRewardRowOnMobile = () => {\n    return (\n      <Flex\n        sx={{\n          height: '68px',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n        }}\n      >\n        <Flex\n          flexDirection=\"column\"\n          justifyContent={'center'}\n          sx={{\n            gap: '4px',\n          }}\n        >\n          <Text fontSize=\"12px\" color={theme.subText}>\n            <Trans>Total Rewards</Trans>\n          </Text>\n\n          <HoverDropdown\n            style={{ padding: '0' }}\n            content={\n              account ? (\n                <Text\n                  as=\"span\"\n                  sx={{\n                    fontSize: '16px',\n                    fontWeight: 500,\n                  }}\n                >\n                  {formatDollarAmount(totalUserReward.totalUsdValue)}\n                </Text>\n              ) : (\n                '--'\n              )\n            }\n            hideIcon={!account}\n            dropdownContent={\n              totalUserReward.amounts.length ? (\n                <AutoColumn gap=\"sm\">\n                  {totalUserReward.amounts.map(\n                    amount =>\n                      amount.greaterThan(0) && (\n                        <Flex alignItems=\"center\" key={amount.currency.address}>\n                          <CurrencyLogo currency={amount.currency} size=\"16px\" />\n                          <Text fontSize=\"12px\" marginLeft=\"4px\">\n                            {amount.toSignificant(8)}\n                          </Text>\n                        </Flex>\n                      ),\n                  )}\n                </AutoColumn>\n              ) : (\n                ''\n              )\n            }\n          />\n        </Flex>\n\n        <HarvestAllButton onClick={() => onOpenModal('harvest')} disabled={!account || !canHarvest} />\n      </Flex>\n    )\n  }\n\n  return (\n    <FarmContent>\n      {above1000 ? (\n        <>\n          {renderFarmGroupHeaderOnDesktop()}\n          {renderTableHeaderOnDesktop()}\n          {renderRewardRowOnDesktop()}\n        </>\n      ) : (\n        <Flex flexDirection=\"column\" padding=\"0 1rem\" sx={{ backgroundColor: rgba(theme.buttonBlack, 0.4) }}>\n          {renderFarmGroupHeaderOnMobile()}\n          <Divider />\n          {renderRewardRowOnMobile()}\n          {!!hasAffectedByFarmIssue && (\n            <ForceWithdrawButton\n              style={{ width: '100%', marginBottom: '1rem' }}\n              onClick={() => onOpenModal('forcedWithdraw')}\n            />\n          )}\n        </Flex>\n      )}\n\n      <Divider />\n\n      {farms.map((farm, index) => {\n        return (\n          <Row\n            isUserAffectedByFarmIssue={hasAffectedByFarmIssue}\n            isApprovedForAll={isApprovedForAll}\n            farm={farm}\n            key={farm.poolAddress + '_' + index}\n            onOpenModal={onOpenModal}\n            onUpdateDepositedInfo={aggregateDepositedInfo}\n            fairlaunchAddress={address}\n            onHarvest={() => {\n              onOpenModal('harvest', farm.pid)\n            }}\n          />\n        )\n      })}\n    </FarmContent>\n  )\n}\n\nexport default ProMMFarmGroup\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}