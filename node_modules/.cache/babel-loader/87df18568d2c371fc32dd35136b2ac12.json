{"ast":null,"code":"import _regeneratorRuntime from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Applications/XAMPP/voxel-interface/src/components/NftPools/StakedNftCards.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { Flex, Text } from 'rebass';\nimport useTheme from 'hooks/useTheme';\nimport { useBlockNumber } from 'state/application/hooks';\nimport { useFarmAction } from 'state/nfts/promm/hooks';\nimport { useIsTransactionPending } from 'state/transactions/hooks';\nimport styled from 'styled-components';\nimport { ButtonPrimary } from 'components/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar stakeTo = function stakeTo(nftContract) {\n  console.log(nftContract);\n};\n\nexport var NftCard = styled.div.withConfig({\n  displayName: \"StakedNftCards__NftCard\",\n  componentId: \"sc-1tmg5la-0\"\n})([\"background:#1C1C1C;height:auto;border-radius:12px;padding:15px 15px 20px 15px;position:relative;width:320px;margin-right:5px;\"]);\n_c = NftCard;\n\nfunction StakedNftCards(_ref) {\n  _s();\n\n  var _this = this;\n\n  var stakingAddress = _ref.stakingAddress,\n      nftAddress = _ref.nftAddress;\n  var theme = useTheme();\n\n  var _useFarmAction = useFarmAction(stakingAddress, nftAddress),\n      approve = _useFarmAction.approve,\n      withdraw = _useFarmAction.withdraw,\n      fetchNfts = _useFarmAction.fetchNfts;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      approvalTx = _useState2[0],\n      setApprovalTx = _useState2[1];\n\n  var isApprovalTxPending = useIsTransactionPending(approvalTx);\n  var isApprovedForAll = true;\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      nfts = _useState4[0],\n      setNfts = _useState4[1];\n\n  var handleApprove = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(nftId) {\n      var tx, _tx;\n\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (isApprovedForAll) {\n                _context.next = 7;\n                break;\n              }\n\n              _context.next = 3;\n              return approve();\n\n            case 3:\n              tx = _context.sent;\n              setApprovalTx(tx);\n              _context.next = 11;\n              break;\n\n            case 7:\n              _context.next = 9;\n              return withdraw(nftId);\n\n            case 9:\n              _tx = _context.sent;\n              setApprovalTx(_tx);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleApprove(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var blockNumber = useBlockNumber();\n\n  var getNfts = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.t0 = setNfts;\n              _context2.next = 3;\n              return fetchNfts();\n\n            case 3:\n              _context2.t1 = _context2.sent;\n              (0, _context2.t0)(_context2.t1);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getNfts() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getNfts();\n  }, [nfts]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Flex, {\n      children: [!nfts.length && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \" No NFTs Staked. Please stake some. \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 23\n      }, this), nfts && (nfts === null || nfts === void 0 ? void 0 : nfts.map(function (item, key) {\n        return /*#__PURE__*/_jsxDEV(NftCard, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"capitalize\",\n              children: item === null || item === void 0 ? void 0 : item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 23\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Token Id: #\", item.toString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 23\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 21\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-card-footer\",\n            children: /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n              style: {\n                margin: '4px 0 0 0',\n                padding: '16px'\n              },\n              onClick: function onClick() {\n                return handleApprove(item.toString());\n              },\n              children: /*#__PURE__*/_jsxDEV(Text, {\n                fontWeight: 500,\n                fontSize: 18,\n                children: \"Unstake\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 20\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 21\n          }, _this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, _this);\n      }))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 6\n    }, this)\n  }, void 0, false);\n}\n\n_s(StakedNftCards, \"oF+GCTthRLrGgHhkvngTRmIkBB8=\", false, function () {\n  return [useTheme, useFarmAction, useIsTransactionPending, useBlockNumber];\n});\n\n_c2 = StakedNftCards;\nexport default StakedNftCards;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"NftCard\");\n$RefreshReg$(_c2, \"StakedNftCards\");","map":{"version":3,"names":["useEffect","useState","Flex","Text","useTheme","useBlockNumber","useFarmAction","useIsTransactionPending","styled","ButtonPrimary","stakeTo","nftContract","console","log","NftCard","div","StakedNftCards","stakingAddress","nftAddress","theme","approve","withdraw","fetchNfts","approvalTx","setApprovalTx","isApprovalTxPending","isApprovedForAll","nfts","setNfts","handleApprove","nftId","tx","blockNumber","getNfts","length","map","item","key","name","toString","margin","padding"],"sources":["/Applications/XAMPP/voxel-interface/src/components/NftPools/StakedNftCards.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { Flex, Text } from 'rebass'\nimport useTheme from 'hooks/useTheme'\nimport { useBlockNumber } from 'state/application/hooks'\nimport {useFarmAction } from 'state/nfts/promm/hooks'\nimport { useIsTransactionPending } from 'state/transactions/hooks'\nimport styled from 'styled-components'\nimport { ButtonPrimary } from 'components/Button'\n\nconst stakeTo= (nftContract: string)=>{\n  console.log(nftContract);\n}\n\nexport const NftCard= styled.div`\n    background: #1C1C1C;\n    height: auto;\n    border-radius: 12px;\n    padding: 15px 15px 20px 15px;\n    position: relative;\n    width:320px;\n    margin-right:5px;\n`\nfunction StakedNftCards({stakingAddress,nftAddress}: { stakingAddress:string,nftAddress:string } ) {\n  const theme = useTheme()\n\n  const { approve,withdraw,fetchNfts } = useFarmAction(stakingAddress,nftAddress)\n\n  const [approvalTx, setApprovalTx] = useState('')\n\n  const isApprovalTxPending = useIsTransactionPending(approvalTx)\n  \n  const isApprovedForAll=true;\n  const [nfts, setNfts] = useState<any[]>([])\n  const handleApprove = async (nftId:string) => {\n    if (!isApprovedForAll) {\n      const tx = await approve()\n      setApprovalTx(tx)\n    }else{\n     \n     const tx = await withdraw(nftId)\n      setApprovalTx(tx)\n    }\n  }\n    \n  const blockNumber = useBlockNumber()\n  const getNfts = async () => {\n      setNfts(await fetchNfts());\n  };\n\n  useEffect( () => {\n    \n    getNfts();\n\n  }, [nfts])\n\n\n\n  return (\n    <>\n     <Flex>\n     {!nfts.length && <div> No NFTs Staked. Please stake some. </div>}\n     {nfts &&\n          nfts?.map((item, key) => (\n          <NftCard key={key}>\n                  \n                    <div className=\"product-card-body\">\n                      <h4 className=\"capitalize\">\n                        {item?.name}\n                      </h4>\n                      <p>Token Id: #{item.toString()}</p>\n                    </div>\n                    <div className=\"product-card-footer\">\n                   \n                   <ButtonPrimary style={{ margin: '4px 0 0 0', padding: '16px' }} onClick={() =>handleApprove(item.toString())}>\n                    <Text fontWeight={500} fontSize={18}>\n                      Unstake\n                    </Text>\n                  </ButtonPrimary>\n                    </div>\n         </NftCard>\n \n\n          ))\n     }\n</Flex>\n    </>\n  )\n}\n\nexport default StakedNftCards\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}