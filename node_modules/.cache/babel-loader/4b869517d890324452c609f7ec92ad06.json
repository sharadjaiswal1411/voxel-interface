{"ast":null,"code":"import _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _defineProperty from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _toConsumableArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport { Interface } from '@ethersproject/abi';\nimport { ChainId } from '@kyberswap/ks-sdk-core';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport FAIRLAUNCH_V2_ABI from 'constants/abis/fairlaunch-v2.json';\nimport FAIRLAUNCH_ABI from 'constants/abis/fairlaunch.json';\nimport REWARD_LOCKER_V2_ABI from 'constants/abis/reward-locker-v2.json';\nimport { ZERO_ADDRESS } from 'constants/index';\nimport { NETWORKS_INFO } from 'constants/networks';\nimport { VERSION } from 'constants/v2';\nimport { useActiveWeb3React } from 'hooks';\nimport { useTokens } from 'hooks/Tokens';\nimport { useMultipleContracts, useRewardLockerContracts } from 'hooks/useContract';\nimport { useRewardTokenPrices } from 'state/farms/hooks';\nimport { useGetProMMFarms, useProMMFarms } from 'state/farms/promm/hooks';\nimport { RewardLockerVersion } from 'state/farms/types';\nimport { useAppDispatch } from 'state/hooks';\nimport { useMultipleContractSingleData } from 'state/multicall/hooks';\nimport { useRewardTokensFullInfo } from 'utils/dmm';\nimport { setLoading, setSchedulesByRewardLocker } from './actions';\nexport var useRewardLockerAddressesWithVersion = function useRewardLockerAddressesWithVersion() {\n  _s();\n\n  var _useActiveWeb3React = useActiveWeb3React(),\n      chainId = _useActiveWeb3React.chainId;\n\n  var fairLaunchAddresses = useMemo(function () {\n    return NETWORKS_INFO[chainId || ChainId.MAINNET].classic.fairlaunch;\n  }, [chainId]);\n  var fairLaunchV2Addresses = useMemo(function () {\n    return NETWORKS_INFO[chainId || ChainId.MAINNET].classic.fairlaunchV2;\n  }, [chainId]);\n  var fairLaunchInterface = useMemo(function () {\n    return new Interface(FAIRLAUNCH_ABI);\n  }, []);\n  var fairLaunchV2Interface = useMemo(function () {\n    return new Interface(FAIRLAUNCH_V2_ABI);\n  }, []);\n  var rewardLockerAddressesV1MulticallResult = useMultipleContractSingleData(fairLaunchAddresses, fairLaunchInterface, 'rewardLocker');\n  var rewardLockerAddressesV2MulticallResult = useMultipleContractSingleData(fairLaunchV2Addresses, fairLaunchV2Interface, 'rewardLocker');\n  return useMemo(function () {\n    var result = {};\n    rewardLockerAddressesV2MulticallResult.forEach(function (callState) {\n      callState.result && callState.result.forEach(function (address) {\n        if (result[address] === undefined) result[address] = RewardLockerVersion.V2;\n      });\n    });\n    rewardLockerAddressesV1MulticallResult.forEach(function (callState) {\n      callState.result && callState.result.forEach(function (address) {\n        if (result[address] === undefined) result[address] = RewardLockerVersion.V1;\n      });\n    });\n    return result;\n  }, [rewardLockerAddressesV1MulticallResult, rewardLockerAddressesV2MulticallResult]);\n};\n\n_s(useRewardLockerAddressesWithVersion, \"mfAh+d5z/DyNvNxee+7IQNAXlbU=\", false, function () {\n  return [useActiveWeb3React, useMultipleContractSingleData, useMultipleContractSingleData];\n});\n\nexport var useRewardTokensByRewardLocker = function useRewardTokensByRewardLocker() {\n  _s2();\n\n  var _useActiveWeb3React2 = useActiveWeb3React(),\n      chainId = _useActiveWeb3React2.chainId;\n  /**\n   * Both V1 and V2 contain `getRewardTokens` and `rewardLocker`\n   */\n\n\n  var fairLaunchAddresses = useMemo(function () {\n    return [].concat(_toConsumableArray(NETWORKS_INFO[chainId || ChainId.MAINNET].classic.fairlaunch), _toConsumableArray(NETWORKS_INFO[chainId || ChainId.MAINNET].classic.fairlaunchV2));\n  }, [chainId]);\n  var fairLaunchInterface = useMemo(function () {\n    return new Interface(FAIRLAUNCH_ABI);\n  }, []);\n  var rewardTokensMulticallResult = useMultipleContractSingleData(fairLaunchAddresses, fairLaunchInterface, 'getRewardTokens');\n  var rewardLockerAddressesMulticallResult = useMultipleContractSingleData(fairLaunchAddresses, fairLaunchInterface, 'rewardLocker');\n  var fairLaunchToTokensMapping = useMemo(function () {\n    var res = {};\n    rewardTokensMulticallResult.forEach(function (token, index) {\n      var _token$result;\n\n      res[fairLaunchAddresses[index]] = token === null || token === void 0 ? void 0 : (_token$result = token.result) === null || _token$result === void 0 ? void 0 : _token$result[0];\n    });\n    return res;\n  }, [rewardTokensMulticallResult, fairLaunchAddresses]);\n  var fairLaunchToRewardLockerMapping = useMemo(function () {\n    var res = {};\n    rewardLockerAddressesMulticallResult.forEach(function (address, index) {\n      var _address$result;\n\n      res[fairLaunchAddresses[index]] = address === null || address === void 0 ? void 0 : (_address$result = address.result) === null || _address$result === void 0 ? void 0 : _address$result[0];\n    });\n    return res;\n  }, [rewardLockerAddressesMulticallResult, fairLaunchAddresses]); // Get the mapping between reward locker => reward tokens\n\n  return useMemo(function () {\n    var result = {};\n    Object.keys(fairLaunchToRewardLockerMapping).forEach(function (fairLaunchAddress) {\n      var rewardLockerAddress = fairLaunchToRewardLockerMapping[fairLaunchAddress];\n      var rewardTokens = fairLaunchToTokensMapping[fairLaunchAddress];\n\n      if (result[rewardLockerAddress]) {\n        result[rewardLockerAddress] = result[rewardLockerAddress].concat(rewardTokens.filter(function (item) {\n          return result[rewardLockerAddress].indexOf(item) < 0;\n        }));\n      } else {\n        result[rewardLockerAddress] = rewardTokens;\n      }\n    });\n    return result;\n  }, [fairLaunchToRewardLockerMapping, fairLaunchToTokensMapping]);\n};\n\n_s2(useRewardTokensByRewardLocker, \"ZKAVWvzFGfKy88uWfToz1OlMYTo=\", false, function () {\n  return [useActiveWeb3React, useMultipleContractSingleData, useMultipleContractSingleData];\n});\n\nexport var useSchedules = function useSchedules() {\n  _s3();\n\n  var dispatch = useAppDispatch();\n\n  var _useActiveWeb3React3 = useActiveWeb3React(),\n      account = _useActiveWeb3React3.account;\n\n  var rewardLockerAddressesWithVersion = useRewardLockerAddressesWithVersion();\n  var rewardTokensByRewardLocker = useRewardTokensByRewardLocker();\n  var rewardLockerContracts = useRewardLockerContracts();\n  var rewardTokensFullInfo = useRewardTokensFullInfo();\n  var schedulesByRewardLocker = useSelector(function (state) {\n    return state.vesting.schedulesByRewardLocker;\n  });\n  useEffect(function () {\n    var fetchSchedules = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(account) {\n        var result, _loop, i;\n\n        return _regeneratorRuntime().wrap(function _callee2$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                dispatch(setLoading(true));\n                _context3.prev = 1;\n                result = {};\n                _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop(i) {\n                  var rewardLockerAddress, rewardLockerVersion, rewardLockerContract, rewardTokenAddresses, rewardTokens, promises, res;\n                  return _regeneratorRuntime().wrap(function _loop$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          rewardLockerAddress = Object.keys(rewardLockerAddressesWithVersion)[i];\n                          rewardLockerVersion = rewardLockerAddressesWithVersion[rewardLockerAddress];\n                          rewardLockerContract = rewardLockerContracts === null || rewardLockerContracts === void 0 ? void 0 : rewardLockerContracts[rewardLockerAddress];\n                          rewardTokenAddresses = rewardTokensByRewardLocker[rewardLockerAddress];\n                          rewardTokens = rewardTokensFullInfo.filter(function (t) {\n                            return rewardTokenAddresses.includes(t.address);\n                          });\n                          promises = rewardTokens.filter(function (token) {\n                            return !!token;\n                          }).map( /*#__PURE__*/function () {\n                            var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(token) {\n                              var res;\n                              return _regeneratorRuntime().wrap(function _callee$(_context) {\n                                while (1) {\n                                  switch (_context.prev = _context.next) {\n                                    case 0:\n                                      _context.next = 2;\n                                      return rewardLockerContract === null || rewardLockerContract === void 0 ? void 0 : rewardLockerContract.getVestingSchedules(account, token.address);\n\n                                    case 2:\n                                      res = _context.sent;\n                                      return _context.abrupt(\"return\", res.map(function (s, index) {\n                                        return [].concat(_toConsumableArray(s), [token, index, rewardLockerVersion]);\n                                      }));\n\n                                    case 4:\n                                    case \"end\":\n                                      return _context.stop();\n                                  }\n                                }\n                              }, _callee);\n                            }));\n\n                            return function (_x2) {\n                              return _ref2.apply(this, arguments);\n                            };\n                          }());\n                          _context2.next = 8;\n                          return Promise.all(promises);\n\n                        case 8:\n                          res = _context2.sent;\n                          result[rewardLockerAddress] = res.flat();\n\n                        case 10:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _loop);\n                });\n                i = 0;\n\n              case 5:\n                if (!(i < Object.keys(rewardLockerAddressesWithVersion).length)) {\n                  _context3.next = 10;\n                  break;\n                }\n\n                return _context3.delegateYield(_loop(i), \"t0\", 7);\n\n              case 7:\n                i++;\n                _context3.next = 5;\n                break;\n\n              case 10:\n                dispatch(setSchedulesByRewardLocker(result));\n                _context3.next = 16;\n                break;\n\n              case 13:\n                _context3.prev = 13;\n                _context3.t1 = _context3[\"catch\"](1);\n                console.error(_context3.t1);\n\n              case 16:\n                dispatch(setLoading(false));\n\n              case 17:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee2, null, [[1, 13]]);\n      }));\n\n      return function fetchSchedules(_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    if (account && rewardLockerContracts) {\n      fetchSchedules(account);\n    }\n  }, [account, dispatch, rewardLockerAddressesWithVersion, rewardLockerContracts, rewardTokensByRewardLocker, rewardTokensFullInfo]);\n  return {\n    schedulesByRewardLocker: schedulesByRewardLocker\n  };\n};\n\n_s3(useSchedules, \"KqNPF/5DO3ZQddd4gH5SYBLPKkI=\", false, function () {\n  return [useAppDispatch, useActiveWeb3React, useRewardLockerAddressesWithVersion, useRewardTokensByRewardLocker, useRewardLockerContracts, useRewardTokensFullInfo, useSelector];\n});\n\nexport var usePrommSchedules = function usePrommSchedules() {\n  _s4();\n\n  var _useActiveWeb3React4 = useActiveWeb3React(),\n      account = _useActiveWeb3React4.account;\n\n  var _useProMMFarms = useProMMFarms(),\n      farms = _useProMMFarms.data,\n      farmLoading = _useProMMFarms.loading;\n\n  var getProMMFarm = useGetProMMFarms();\n  var firstRender = useRef(true);\n  useEffect(function () {\n    if (!Object.keys(farms).length && firstRender.current) {\n      getProMMFarm();\n      firstRender.current = false;\n    }\n  }, [farms, getProMMFarm]);\n  var rewardTokenAddresses = useMemo(function () {\n    var addresses = {};\n    Object.values(farms).forEach(function (farms) {\n      farms.forEach(function (farm) {\n        farm.rewardTokens.forEach(function (tk) {\n          return addresses[tk] = 1;\n        });\n      });\n    });\n    return Object.keys(addresses);\n  }, [farms]);\n  var rwTokenMap = useTokens(rewardTokenAddresses);\n  var tokens = useMemo(function () {\n    return Object.values(rwTokenMap);\n  }, [rwTokenMap]);\n  var prices = useRewardTokenPrices(tokens, VERSION.ELASTIC);\n  var tokenPriceMap = useMemo(function () {\n    return prices.reduce(function (priceMap, price, index) {\n      var _tokens$index, _tokens$index2;\n\n      return _objectSpread(_objectSpread({}, priceMap), {}, _defineProperty({}, (_tokens$index = tokens[index]) !== null && _tokens$index !== void 0 && _tokens$index.isNative ? ZERO_ADDRESS : (_tokens$index2 = tokens[index]) === null || _tokens$index2 === void 0 ? void 0 : _tokens$index2.address, price));\n    }, {});\n  }, [prices, tokens]);\n  var rewardTokensByRewardLocker = useMemo(function () {\n    var temp = {};\n    Object.values(farms).forEach(function (farms) {\n      farms.forEach(function (farm) {\n        var rl = farm.rewardLocker;\n        if (!temp[rl]) temp[rl] = [];\n        temp[rl] = _toConsumableArray(new Set(temp[rl].concat(farm.rewardTokens)));\n      });\n    });\n    return temp;\n  }, [farms]);\n  var rewardLockerAddresses = useMemo(function () {\n    return Object.keys(rewardTokensByRewardLocker);\n  }, [rewardTokensByRewardLocker]);\n  var rewardLockerContracts = useMultipleContracts(rewardLockerAddresses, REWARD_LOCKER_V2_ABI);\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      schedulesByRewardLocker = _useState2[0],\n      setSchedules = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  useEffect(function () {\n    var getVestingSchedules = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var temp, _loop2, i;\n\n        return _regeneratorRuntime().wrap(function _callee4$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                temp = {};\n\n                if (!(!rewardLockerContracts || !account)) {\n                  _context6.next = 3;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\");\n\n              case 3:\n                setLoading(true);\n                _loop2 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop2(i) {\n                  var address, contract, schedules;\n                  return _regeneratorRuntime().wrap(function _loop2$(_context5) {\n                    while (1) {\n                      switch (_context5.prev = _context5.next) {\n                        case 0:\n                          address = rewardLockerAddresses[i];\n                          contract = rewardLockerContracts[address];\n                          _context5.next = 4;\n                          return Promise.all(rewardTokensByRewardLocker[address].filter(function (token) {\n                            return !!rwTokenMap[token];\n                          }).map( /*#__PURE__*/function () {\n                            var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(token) {\n                              var res;\n                              return _regeneratorRuntime().wrap(function _callee3$(_context4) {\n                                while (1) {\n                                  switch (_context4.prev = _context4.next) {\n                                    case 0:\n                                      _context4.next = 2;\n                                      return contract.getVestingSchedules(account, token);\n\n                                    case 2:\n                                      res = _context4.sent;\n                                      return _context4.abrupt(\"return\", res.map(function (item, index) {\n                                        return _objectSpread(_objectSpread({}, item), {}, {\n                                          startTime: item.startTime.toNumber(),\n                                          endTime: item.endTime.toNumber(),\n                                          index: index,\n                                          token: rwTokenMap[token],\n                                          tokenPrice: tokenPriceMap[token] || 0,\n                                          contract: contract\n                                        });\n                                      }));\n\n                                    case 4:\n                                    case \"end\":\n                                      return _context4.stop();\n                                  }\n                                }\n                              }, _callee3);\n                            }));\n\n                            return function (_x3) {\n                              return _ref4.apply(this, arguments);\n                            };\n                          }()));\n\n                        case 4:\n                          schedules = _context5.sent;\n                          temp[address] = schedules.flat();\n\n                        case 6:\n                        case \"end\":\n                          return _context5.stop();\n                      }\n                    }\n                  }, _loop2);\n                });\n                i = 0;\n\n              case 6:\n                if (!(i < rewardLockerAddresses.length)) {\n                  _context6.next = 11;\n                  break;\n                }\n\n                return _context6.delegateYield(_loop2(i), \"t0\", 8);\n\n              case 8:\n                i++;\n                _context6.next = 6;\n                break;\n\n              case 11:\n                setLoading(false);\n                setSchedules(temp);\n\n              case 13:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function getVestingSchedules() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    getVestingSchedules();\n  }, [tokenPriceMap, rewardLockerContracts, account, rewardLockerAddresses, rewardTokensByRewardLocker, rwTokenMap]);\n  return {\n    schedulesByRewardLocker: schedulesByRewardLocker,\n    loading: loading || farmLoading\n  };\n};\n\n_s4(usePrommSchedules, \"Jz6CbgHbtKLOJVukvuBHuE995yE=\", false, function () {\n  return [useActiveWeb3React, useProMMFarms, useGetProMMFarms, useTokens, useRewardTokenPrices, useMultipleContracts];\n});","map":{"version":3,"names":["Interface","ChainId","useEffect","useMemo","useRef","useState","useSelector","FAIRLAUNCH_V2_ABI","FAIRLAUNCH_ABI","REWARD_LOCKER_V2_ABI","ZERO_ADDRESS","NETWORKS_INFO","VERSION","useActiveWeb3React","useTokens","useMultipleContracts","useRewardLockerContracts","useRewardTokenPrices","useGetProMMFarms","useProMMFarms","RewardLockerVersion","useAppDispatch","useMultipleContractSingleData","useRewardTokensFullInfo","setLoading","setSchedulesByRewardLocker","useRewardLockerAddressesWithVersion","chainId","fairLaunchAddresses","MAINNET","classic","fairlaunch","fairLaunchV2Addresses","fairlaunchV2","fairLaunchInterface","fairLaunchV2Interface","rewardLockerAddressesV1MulticallResult","rewardLockerAddressesV2MulticallResult","result","forEach","callState","address","undefined","V2","V1","useRewardTokensByRewardLocker","rewardTokensMulticallResult","rewardLockerAddressesMulticallResult","fairLaunchToTokensMapping","res","token","index","fairLaunchToRewardLockerMapping","Object","keys","fairLaunchAddress","rewardLockerAddress","rewardTokens","concat","filter","item","indexOf","useSchedules","dispatch","account","rewardLockerAddressesWithVersion","rewardTokensByRewardLocker","rewardLockerContracts","rewardTokensFullInfo","schedulesByRewardLocker","state","vesting","fetchSchedules","i","rewardLockerVersion","rewardLockerContract","rewardTokenAddresses","t","includes","promises","map","getVestingSchedules","s","Promise","all","flat","length","console","error","usePrommSchedules","farms","data","farmLoading","loading","getProMMFarm","firstRender","current","addresses","values","farm","tk","rwTokenMap","tokens","prices","ELASTIC","tokenPriceMap","reduce","priceMap","price","isNative","temp","rl","rewardLocker","Set","rewardLockerAddresses","setSchedules","contract","startTime","toNumber","endTime","tokenPrice","schedules"],"sources":["/Applications/XAMPP/voxel-interface/src/state/vesting/hooks.ts"],"sourcesContent":["import { Interface } from '@ethersproject/abi'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport { ChainId, Token } from '@kyberswap/ks-sdk-core'\nimport { Contract } from 'ethers'\nimport { useEffect, useMemo, useRef, useState } from 'react'\nimport { useSelector } from 'react-redux'\n\nimport FAIRLAUNCH_V2_ABI from 'constants/abis/fairlaunch-v2.json'\nimport FAIRLAUNCH_ABI from 'constants/abis/fairlaunch.json'\nimport REWARD_LOCKER_V2_ABI from 'constants/abis/reward-locker-v2.json'\nimport { ZERO_ADDRESS } from 'constants/index'\nimport { NETWORKS_INFO } from 'constants/networks'\nimport { VERSION } from 'constants/v2'\nimport { useActiveWeb3React } from 'hooks'\nimport { useTokens } from 'hooks/Tokens'\nimport { useMultipleContracts, useRewardLockerContracts } from 'hooks/useContract'\nimport { AppState } from 'state'\nimport { useRewardTokenPrices } from 'state/farms/hooks'\nimport { useGetProMMFarms, useProMMFarms } from 'state/farms/promm/hooks'\nimport { RewardLockerVersion } from 'state/farms/types'\nimport { useAppDispatch } from 'state/hooks'\nimport { useMultipleContractSingleData } from 'state/multicall/hooks'\nimport { useRewardTokensFullInfo } from 'utils/dmm'\n\nimport { setLoading, setSchedulesByRewardLocker } from './actions'\n\nexport const useRewardLockerAddressesWithVersion = (): { [rewardLockerAddress: string]: RewardLockerVersion } => {\n  const { chainId } = useActiveWeb3React()\n\n  const fairLaunchAddresses = useMemo(() => NETWORKS_INFO[chainId || ChainId.MAINNET].classic.fairlaunch, [chainId])\n  const fairLaunchV2Addresses = useMemo(() => NETWORKS_INFO[chainId || ChainId.MAINNET].classic.fairlaunchV2, [chainId])\n  const fairLaunchInterface = useMemo(() => new Interface(FAIRLAUNCH_ABI), [])\n  const fairLaunchV2Interface = useMemo(() => new Interface(FAIRLAUNCH_V2_ABI), [])\n\n  const rewardLockerAddressesV1MulticallResult = useMultipleContractSingleData(\n    fairLaunchAddresses,\n    fairLaunchInterface,\n    'rewardLocker',\n  )\n  const rewardLockerAddressesV2MulticallResult = useMultipleContractSingleData(\n    fairLaunchV2Addresses,\n    fairLaunchV2Interface,\n    'rewardLocker',\n  )\n\n  return useMemo(() => {\n    const result: { [rewardLockerAddress: string]: RewardLockerVersion } = {}\n\n    rewardLockerAddressesV2MulticallResult.forEach(callState => {\n      callState.result &&\n        callState.result.forEach(address => {\n          if (result[address] === undefined) result[address] = RewardLockerVersion.V2\n        })\n    })\n\n    rewardLockerAddressesV1MulticallResult.forEach(callState => {\n      callState.result &&\n        callState.result.forEach(address => {\n          if (result[address] === undefined) result[address] = RewardLockerVersion.V1\n        })\n    })\n\n    return result\n  }, [rewardLockerAddressesV1MulticallResult, rewardLockerAddressesV2MulticallResult])\n}\n\nexport const useRewardTokensByRewardLocker = () => {\n  const { chainId } = useActiveWeb3React()\n\n  /**\n   * Both V1 and V2 contain `getRewardTokens` and `rewardLocker`\n   */\n  const fairLaunchAddresses = useMemo(\n    () => [\n      ...NETWORKS_INFO[chainId || ChainId.MAINNET].classic.fairlaunch,\n      ...NETWORKS_INFO[chainId || ChainId.MAINNET].classic.fairlaunchV2,\n    ],\n    [chainId],\n  )\n  const fairLaunchInterface = useMemo(() => new Interface(FAIRLAUNCH_ABI), [])\n\n  const rewardTokensMulticallResult = useMultipleContractSingleData(\n    fairLaunchAddresses,\n    fairLaunchInterface,\n    'getRewardTokens',\n  )\n\n  const rewardLockerAddressesMulticallResult = useMultipleContractSingleData(\n    fairLaunchAddresses,\n    fairLaunchInterface,\n    'rewardLocker',\n  )\n\n  const fairLaunchToTokensMapping: { [key: string]: string[] } = useMemo(() => {\n    const res: { [key: string]: string[] } = {}\n    rewardTokensMulticallResult.forEach((token, index) => {\n      res[fairLaunchAddresses[index]] = token?.result?.[0]\n    })\n    return res\n  }, [rewardTokensMulticallResult, fairLaunchAddresses])\n\n  const fairLaunchToRewardLockerMapping: { [key: string]: string } = useMemo(() => {\n    const res: { [key: string]: string } = {}\n    rewardLockerAddressesMulticallResult.forEach((address, index) => {\n      res[fairLaunchAddresses[index]] = address?.result?.[0]\n    })\n    return res\n  }, [rewardLockerAddressesMulticallResult, fairLaunchAddresses])\n\n  // Get the mapping between reward locker => reward tokens\n  return useMemo(() => {\n    const result: { [key: string]: string[] } = {}\n\n    Object.keys(fairLaunchToRewardLockerMapping).forEach(fairLaunchAddress => {\n      const rewardLockerAddress = fairLaunchToRewardLockerMapping[fairLaunchAddress]\n      const rewardTokens = fairLaunchToTokensMapping[fairLaunchAddress]\n\n      if (result[rewardLockerAddress]) {\n        result[rewardLockerAddress] = result[rewardLockerAddress].concat(\n          rewardTokens.filter((item: string) => result[rewardLockerAddress].indexOf(item) < 0),\n        )\n      } else {\n        result[rewardLockerAddress] = rewardTokens\n      }\n    })\n\n    return result\n  }, [fairLaunchToRewardLockerMapping, fairLaunchToTokensMapping])\n}\n\nexport const useSchedules = () => {\n  const dispatch = useAppDispatch()\n  const { account } = useActiveWeb3React()\n  const rewardLockerAddressesWithVersion = useRewardLockerAddressesWithVersion()\n  const rewardTokensByRewardLocker = useRewardTokensByRewardLocker()\n  const rewardLockerContracts = useRewardLockerContracts()\n  const rewardTokensFullInfo = useRewardTokensFullInfo()\n\n  const schedulesByRewardLocker = useSelector<\n    AppState,\n    { [key: string]: [BigNumber, BigNumber, BigNumber, BigNumber, Token, number, RewardLockerVersion][] }\n  >(state => state.vesting.schedulesByRewardLocker)\n\n  useEffect(() => {\n    const fetchSchedules = async (account: string): Promise<any> => {\n      dispatch(setLoading(true))\n      try {\n        const result: {\n          [key: string]: [BigNumber, BigNumber, BigNumber, BigNumber, Token, number, RewardLockerVersion][]\n        } = {}\n\n        for (let i = 0; i < Object.keys(rewardLockerAddressesWithVersion).length; i++) {\n          const rewardLockerAddress = Object.keys(rewardLockerAddressesWithVersion)[i]\n          const rewardLockerVersion = rewardLockerAddressesWithVersion[rewardLockerAddress]\n          const rewardLockerContract = rewardLockerContracts?.[rewardLockerAddress]\n          const rewardTokenAddresses = rewardTokensByRewardLocker[rewardLockerAddress]\n          const rewardTokens = rewardTokensFullInfo.filter(t => rewardTokenAddresses.includes(t.address))\n\n          const promises = rewardTokens\n            .filter(token => !!token)\n            .map(async token => {\n              const res = await rewardLockerContract?.getVestingSchedules(account, token.address)\n              return res.map((s: any, index: any) => [...s, token, index, rewardLockerVersion])\n            })\n\n          const res = await Promise.all(promises)\n\n          result[rewardLockerAddress] = res.flat()\n        }\n\n        dispatch(setSchedulesByRewardLocker(result))\n      } catch (err) {\n        console.error(err)\n      }\n\n      dispatch(setLoading(false))\n    }\n\n    if (account && rewardLockerContracts) {\n      fetchSchedules(account)\n    }\n  }, [\n    account,\n    dispatch,\n    rewardLockerAddressesWithVersion,\n    rewardLockerContracts,\n    rewardTokensByRewardLocker,\n    rewardTokensFullInfo,\n  ])\n\n  return { schedulesByRewardLocker }\n}\n\nexport interface Schedule {\n  startTime: number\n  endTime: number\n  index: number\n  token: Token\n  vestedQuantity: BigNumber\n  quantity: BigNumber\n  tokenPrice: number\n  contract: Contract\n}\n\nexport const usePrommSchedules = () => {\n  const { account } = useActiveWeb3React()\n  const { data: farms, loading: farmLoading } = useProMMFarms()\n  const getProMMFarm = useGetProMMFarms()\n\n  const firstRender = useRef(true)\n\n  useEffect(() => {\n    if (!Object.keys(farms).length && firstRender.current) {\n      getProMMFarm()\n      firstRender.current = false\n    }\n  }, [farms, getProMMFarm])\n\n  const rewardTokenAddresses = useMemo(() => {\n    const addresses: { [address: string]: 1 } = {}\n    Object.values(farms).forEach(farms => {\n      farms.forEach(farm => {\n        farm.rewardTokens.forEach(tk => (addresses[tk] = 1))\n      })\n    })\n    return Object.keys(addresses)\n  }, [farms])\n\n  const rwTokenMap = useTokens(rewardTokenAddresses)\n\n  const tokens = useMemo(() => {\n    return Object.values(rwTokenMap)\n  }, [rwTokenMap])\n\n  const prices = useRewardTokenPrices(tokens, VERSION.ELASTIC)\n\n  const tokenPriceMap = useMemo(() => {\n    return prices.reduce((priceMap, price, index) => {\n      return {\n        ...priceMap,\n        [tokens[index]?.isNative ? ZERO_ADDRESS : tokens[index]?.address]: price,\n      }\n    }, {} as { [address: string]: number })\n  }, [prices, tokens])\n\n  const rewardTokensByRewardLocker = useMemo(() => {\n    const temp: { [rewardLocker: string]: string[] } = {}\n\n    Object.values(farms).forEach(farms => {\n      farms.forEach(farm => {\n        const rl = farm.rewardLocker\n        if (!temp[rl]) temp[rl] = []\n        temp[rl] = [...new Set(temp[rl].concat(farm.rewardTokens))]\n      })\n    })\n\n    return temp\n  }, [farms])\n\n  const rewardLockerAddresses = useMemo(() => Object.keys(rewardTokensByRewardLocker), [rewardTokensByRewardLocker])\n  const rewardLockerContracts = useMultipleContracts(rewardLockerAddresses, REWARD_LOCKER_V2_ABI)\n\n  const [schedulesByRewardLocker, setSchedules] = useState<{ [address: string]: Schedule[] }>({})\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    const getVestingSchedules = async () => {\n      const temp: {\n        [address: string]: Array<Schedule>\n      } = {}\n      if (!rewardLockerContracts || !account) return\n\n      setLoading(true)\n      for (let i = 0; i < rewardLockerAddresses.length; i++) {\n        const address = rewardLockerAddresses[i]\n        const contract = rewardLockerContracts[address]\n\n        const schedules = await Promise.all(\n          rewardTokensByRewardLocker[address]\n            .filter(token => !!rwTokenMap[token])\n            .map(async token => {\n              const res = await contract.getVestingSchedules(account, token)\n              return res.map((item: any, index: number) => ({\n                ...item,\n                startTime: item.startTime.toNumber(),\n                endTime: item.endTime.toNumber(),\n                index,\n                token: rwTokenMap[token],\n                tokenPrice: tokenPriceMap[token] || 0,\n                contract,\n              }))\n            }),\n        )\n\n        temp[address] = schedules.flat()\n      }\n\n      setLoading(false)\n      setSchedules(temp)\n    }\n\n    getVestingSchedules()\n  }, [tokenPriceMap, rewardLockerContracts, account, rewardLockerAddresses, rewardTokensByRewardLocker, rwTokenMap])\n\n  return {\n    schedulesByRewardLocker,\n    loading: loading || farmLoading,\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}