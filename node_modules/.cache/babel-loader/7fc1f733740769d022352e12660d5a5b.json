{"ast":null,"code":"import _regeneratorRuntime from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _toConsumableArray from \"/Applications/XAMPP/voxel-interface/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nvar _s = $RefreshSig$();\n\nimport { ChainId, WETH } from '@kyberswap/ks-sdk-core';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { DAI, USDC, USDT } from 'constants/index';\nimport { NETWORKS_INFO } from 'constants/networks';\nimport { STABLE_COINS_ADDRESS } from 'constants/tokens';\nimport { useActiveWeb3React } from 'hooks';\nvar configurationData = {\n  supported_resolutions: ['1', '3', '5', '15', '30', '1H', '2H', '4H', '1D', '1W', '1M']\n};\n\nvar getNetworkString = function getNetworkString(chainId) {\n  switch (chainId) {\n    case ChainId.MAINNET:\n      return 'chain-ethereum';\n\n    case ChainId.BSCMAINNET:\n      return 'chain-bsc';\n\n    case ChainId.MATIC:\n      return 'chain-polygon';\n\n    case ChainId.CRONOS:\n      return 'chain-cronos';\n\n    case ChainId.AVAXMAINNET:\n      return 'chain-avalanche';\n\n    case ChainId.FANTOM:\n      return 'chain-fantom';\n\n    case ChainId.ARBITRUM:\n      return 'chain-arbitrum';\n\n    case ChainId.VELAS:\n      return 'chain-velas';\n\n    case ChainId.AURORA:\n      return 'chain-aurora';\n\n    case ChainId.OASIS:\n      return 'chain-oasis';\n\n    case ChainId.OPTIMISM:\n      return 'chain-optimism';\n\n    case ChainId.ETHW:\n      return 'chain-ethw';\n\n    default:\n      return '';\n  }\n};\n\nvar DEXTOOLS_API = 'https://pancake-subgraph-proxy.kyberswap.com/dextools';\nvar monthTs = 2592000000;\nvar weekTs = 604800000;\nvar dayTs = 86400000; // Hard code token address to specific pair address to use in dextool api.\n\nvar TOKEN_PAIRS_ADDRESS_MAPPING = {\n  '0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9': '0xd75ea151a61d06868e31f8988d28dfe5e9df57b4',\n  '0x6b175474e89094c44da98b954eedeac495271d0f': '0x74c99f3f5331676f6aec2756e1f39b4fc029a83e',\n  '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48': '0x74c99f3f5331676f6aec2756e1f39b4fc029a83e',\n  '0x1c954e8fe737f99f68fa1ccda3e51ebdb291948c': 'nodata',\n  '0x8f3cf7ad23cd3cadbd9735aff958023239c6a063': '0xa374094527e1673a86de625aa59517c5de346d32',\n  '0x1af3f329e8be154074d8769d1ffa4ee058b1dbc3': '0xd99c7f6c65857ac913a8f880a4cb84032ab2fc5b',\n  '0xd586e7f844cea2f87f50152665bcbc2c279d8d70': '0xa389f9430876455c36478deea9769b7ca4e3ddb1',\n  '0xc7198437980c041c805a1edcba50c1ce5db95118': '0xa389f9430876455c36478deea9769b7ca4e3ddb1',\n  '0x19860ccb0a68fd4213ab9d8266f7bbf05a8dde98': '0xa389f9430876455c36478deea9769b7ca4e3ddb1',\n  '0x8d11ec38a3eb5e956b052f67da8bdc9bef8abf3e': '0xadc8ad9d3d62b1af72e5ce0ec767465f313513dd',\n  '0x049d68029688eabf473097a2fc38ef61633a3c7a': '0xadc8ad9d3d62b1af72e5ce0ec767465f313513dd',\n  '0x41e3df7f716ab5af28c1497b354d79342923196a': '0xadc8ad9d3d62b1af72e5ce0ec767465f313513dd',\n  '0xf2001b145b43032aaf5ee2884e456ccd805f677d': '0xa68466208f1a3eb21650320d2520ee8eba5ba623',\n  '0x66e428c3f67a68878562e79a0234c1f83c208770': '0xa68466208f1a3eb21650320d2520ee8eba5ba623',\n  '0xda10009cbd5d07dd0cecc66161fc93d7c9000da1': '0xc31e54c7a869b9fcbecc14363cf510d1c41fa443',\n  '0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9': '0xc31e54c7a869b9fcbecc14363cf510d1c41fa443',\n  '0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab': '0x0f0fc5a5029e3d155708356b422d22cc29f8b3d4',\n  '0xd501281565bf7789224523144fe5d98e8b28f267': '0x64ed9711667c9e8923bee32260a55a9b8dbc99d3',\n  '0x63a72806098Bd3D9520cC43356dD78afe5D386D9': '0x5944f135e4f1e3fa2e5550d4b5170783868cc4fe',\n  '0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d': '0xd99c7f6c65857ac913a8f880a4cb84032ab2fc5b',\n  '0xdac17f958d2ee523a2206206994597c13d831ec7': '0x4e68ccd3e89f51c3074ca5072bbac773960dfa36',\n  // BNB_USD\n  '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619': '0xce1923d2242bba540f1d56c8e23b1fbeae2596dc',\n  // ETH_USD on polygon\n  '0xff970a61a04b1ca14834a43f5de4533ebddb5cc8': '0x905dfcd5649217c42684f23958568e533c711aa3',\n  // ETH_USD Arbitrum\n  '0x7f5c764cbc14f9669b88837ca1490cca17c31607': '0x1a981daa7967c66c3356ad044979bc82e4a478b9',\n  // ETH_USD Optimism\n  '0xe9e7cea3dedca5984780bafc599bd69add087d56': '0x58f876857a02d6762e0101bb5c46a8c1ed44dc16',\n  // BNB_BUSD\n  '0x853ea32391aaa14c112c645fd20ba389ab25c5e0': '0x5d79a43e6b9d8e3ecca26f91afe34634248773c8',\n  // USX on AVAX\n  '0x261c94f2d3cccae76f86f6c8f2c93785dd6ce022': 'nodata',\n  // ATH on BSC\n  '0x94b008aA00579c1307B0EF2c499aD98a8ce58e58': '0xc858a329bf053be78d6239c4a4343b8fbd21472b' // USDT on Optimism\n\n};\nvar LOCALSTORAGE_CHECKED_PAIRS = 'proChartCheckedPairs';\n\nvar fetcherDextools = function fetcherDextools(url) {\n  return fetch(\"\".concat(DEXTOOLS_API, \"/\").concat(url)).then(function (res) {\n    return res.json();\n  }).catch(function (error) {\n    return console.log(error);\n  });\n};\n\nexport var searchTokenPair = function searchTokenPair(address, chainId) {\n  if (TOKEN_PAIRS_ADDRESS_MAPPING[address.toLowerCase()]) {\n    return new Promise(function (resolve, reject) {\n      resolve([{\n        id: TOKEN_PAIRS_ADDRESS_MAPPING[address.toLowerCase()]\n      }]);\n    });\n  }\n\n  return fetcherDextools(\"\".concat(getNetworkString(chainId), \"/api/pair/search?s=\").concat(address));\n};\nexport var getHistoryCandleStatus = function getHistoryCandleStatus(pairAddress, chainId) {\n  return fetcherDextools(\"\".concat(getNetworkString(chainId), \"/api/Uniswap/1/history-candle-status?pair=\").concat(pairAddress));\n};\nexport var getCandlesApi = function getCandlesApi(chainId, pairAddress, apiVersion, ts) {\n  var span = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'month';\n  var res = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : '15m';\n  var sym = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 'eth';\n  return fetcherDextools(\"\".concat(getNetworkString(chainId), \"/api/Pancakeswap/history/candles?sym=\").concat(sym, \"&span=\").concat(span, \"&pair=\").concat(pairAddress, \"&ts=\").concat(ts, \"&v=\").concat(apiVersion).concat(res && '&res=' + res));\n};\n\nvar isNativeToken = function isNativeToken(chainId, currency) {\n  if (!currency || !chainId) {\n    return false;\n  }\n\n  return currency.isNative || WETH[chainId].address.toLowerCase() === currency.address.toLowerCase();\n};\n\nvar isUSDToken = function isUSDToken(chainId, currency) {\n  if (isNativeToken(chainId, currency) || !chainId || currency !== null && currency !== void 0 && currency.isNative) {\n    return false;\n  }\n\n  var usdTokenAddresses = [USDT[chainId].address.toLowerCase(), USDC[chainId].address.toLowerCase(), DAI[chainId].address.toLowerCase(), '0xe9e7cea3dedca5984780bafc599bd69add087d56', //BUSD\n  '0xcd7509b76281223f5b7d3ad5d47f8d7aa5c2b9bf', //USDV Velas\n  '0xdb28719f7f938507dbfe4f0eae55668903d34a15', //USDT_t BTTC\n  '0xe887512ab8bc60bcc9224e1c3b5be68e26048b8b', //USDT_e BTTC\n  '0x19860ccb0a68fd4213ab9d8266f7bbf05a8dde98', //BUSD.e\n  '0x4fbf0429599460d327bd5f55625e30e4fc066095'].concat(_toConsumableArray(STABLE_COINS_ADDRESS[chainId].map(function (a) {\n    return a.toLowerCase();\n  })));\n\n  if (currency !== null && currency !== void 0 && currency.address && usdTokenAddresses.includes(currency.address.toLowerCase())) {\n    return true;\n  }\n\n  return false;\n};\n\nvar updateLocalstorageCheckedPair = function updateLocalstorageCheckedPair(key, res) {\n  var cPstr = localStorage.getItem(LOCALSTORAGE_CHECKED_PAIRS);\n  var checkedPairs = cPstr ? JSON.parse(cPstr) : {};\n  checkedPairs[key] = _objectSpread(_objectSpread({}, res), {}, {\n    time: new Date().getTime()\n  });\n  localStorage.setItem(LOCALSTORAGE_CHECKED_PAIRS, JSON.stringify(checkedPairs));\n};\n\nexport var checkPairHasDextoolsData = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(currencies, chainId) {\n    var _Object$values, _Object$values2, currencyA, currencyB, res, cPstr, checkedPairs, symbolA, symbolB, key, checkedPair, token, data1, _data$candles, ver, ts, _yield$getCandlesApi, data, _token, _data, _ver, _data2$candles, _ts, _yield$getCandlesApi2, _data2;\n\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _Object$values = Object.values(currencies), _Object$values2 = _slicedToArray(_Object$values, 2), currencyA = _Object$values2[0], currencyB = _Object$values2[1];\n            res = {\n              ver: 0,\n              pairAddress: ''\n            };\n\n            if (!(!currencyA || !currencyB)) {\n              _context.next = 4;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.resolve(res));\n\n          case 4:\n            if (!(isNativeToken(chainId, currencyA) && isNativeToken(chainId, currencyB) || isUSDToken(chainId, currencyA) && isUSDToken(chainId, currencyB))) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.resolve(res));\n\n          case 6:\n            cPstr = localStorage.getItem(LOCALSTORAGE_CHECKED_PAIRS);\n            checkedPairs = cPstr ? JSON.parse(cPstr) : {};\n            symbolA = currencyA.isNative ? NETWORKS_INFO[chainId || ChainId.MAINNET].nativeToken.name : currencyA.symbol;\n            symbolB = currencyB.isNative ? NETWORKS_INFO[chainId || ChainId.MAINNET].nativeToken.name : currencyB.symbol;\n            key = [symbolA, symbolB, chainId].sort().join('');\n            checkedPair = checkedPairs[key];\n\n            if (!(checkedPair && checkedPair.ver && checkedPair.pairAddress && checkedPair.time > new Date().getTime() - dayTs // Cache expire after 1 day\n            )) {\n              _context.next = 14;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.resolve({\n              ver: checkedPair.ver,\n              pairAddress: checkedPair.pairAddress\n            }));\n\n          case 14:\n            if (!(isNativeToken(chainId, currencyA) || isNativeToken(chainId, currencyB))) {\n              _context.next = 39;\n              break;\n            }\n\n            token = isNativeToken(chainId, currencyA) ? currencyB : currencyA;\n\n            if (!(token !== null && token !== void 0 && token.address)) {\n              _context.next = 37;\n              break;\n            }\n\n            _context.next = 19;\n            return searchTokenPair(token.address, chainId);\n\n          case 19:\n            data1 = _context.sent;\n\n            if (!(data1.length > 0 && data1[0].id)) {\n              _context.next = 37;\n              break;\n            }\n\n            _context.next = 23;\n            return getHistoryCandleStatus(data1[0].id, chainId);\n\n          case 23:\n            _context.t0 = _context.sent;\n\n            if (_context.t0) {\n              _context.next = 26;\n              break;\n            }\n\n            _context.t0 = 0;\n\n          case 26:\n            ver = _context.t0;\n            ts = Math.floor(new Date().getTime() / monthTs) * monthTs;\n            _context.next = 30;\n            return getCandlesApi(chainId, data1[0].id, ver, ts, 'month');\n\n          case 30:\n            _yield$getCandlesApi = _context.sent;\n            data = _yield$getCandlesApi.data;\n\n            if (!(data !== null && data !== void 0 && (_data$candles = data.candles) !== null && _data$candles !== void 0 && _data$candles.length)) {\n              _context.next = 37;\n              break;\n            }\n\n            res.ver = ver;\n            res.pairAddress = data1[0].id;\n            updateLocalstorageCheckedPair(key, res);\n            return _context.abrupt(\"return\", Promise.resolve(res));\n\n          case 37:\n            _context.next = 60;\n            break;\n\n          case 39:\n            if (!(isUSDToken(chainId, currencyA) || isUSDToken(chainId, currencyB))) {\n              _context.next = 60;\n              break;\n            }\n\n            _token = isUSDToken(chainId, currencyA) ? currencyB : currencyA;\n\n            if (!(_token !== null && _token !== void 0 && _token.address)) {\n              _context.next = 60;\n              break;\n            }\n\n            _context.next = 44;\n            return searchTokenPair(_token.address, chainId);\n\n          case 44:\n            _data = _context.sent;\n\n            if (!(_data.length > 0 && _data[0].id)) {\n              _context.next = 60;\n              break;\n            }\n\n            _context.next = 48;\n            return getHistoryCandleStatus(_data[0].id, chainId);\n\n          case 48:\n            _ver = _context.sent;\n\n            if (!_ver) {\n              _context.next = 60;\n              break;\n            }\n\n            _ts = Math.floor(new Date().getTime() / monthTs) * monthTs;\n            _context.next = 53;\n            return getCandlesApi(chainId, _data[0].id, _ver, _ts, 'month', '15m', 'usd');\n\n          case 53:\n            _yield$getCandlesApi2 = _context.sent;\n            _data2 = _yield$getCandlesApi2.data;\n\n            if (!(_data2 !== null && _data2 !== void 0 && (_data2$candles = _data2.candles) !== null && _data2$candles !== void 0 && _data2$candles.length)) {\n              _context.next = 60;\n              break;\n            }\n\n            res.ver = _ver;\n            res.pairAddress = _data[0].id;\n            updateLocalstorageCheckedPair(key, res);\n            return _context.abrupt(\"return\", Promise.resolve(res));\n\n          case 60:\n            updateLocalstorageCheckedPair(key, res);\n            return _context.abrupt(\"return\", Promise.resolve(res));\n\n          case 62:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function checkPairHasDextoolsData(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var useDatafeed = function useDatafeed(currencies, pairAddress, apiVersion) {\n  _s();\n\n  var _currencies$, _currencies$2;\n\n  var _useActiveWeb3React = useActiveWeb3React(),\n      chainId = _useActiveWeb3React.chainId;\n\n  var isATokenEther = isNativeToken(chainId, currencies[0]);\n  var isBTokenEther = isNativeToken(chainId, currencies[1]);\n  var isTokenUSD = isUSDToken(chainId, currencies[0]) && ((_currencies$ = currencies[1]) === null || _currencies$ === void 0 ? void 0 : _currencies$.isToken) || isUSDToken(chainId, currencies[1]) && ((_currencies$2 = currencies[0]) === null || _currencies$2 === void 0 ? void 0 : _currencies$2.isToken);\n  var isEtherUSD = isUSDToken(chainId, currencies[0]) && isBTokenEther || isUSDToken(chainId, currencies[1]) && isATokenEther;\n  var sym = isTokenUSD || isEtherUSD ? 'usd' : 'eth';\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      oldestTs = _useState4[0],\n      setOldestTs = _useState4[1];\n\n  var stateRef = useRef({\n    data: data,\n    oldestTs: oldestTs\n  });\n  var fetchingRef = useRef(false);\n  var intervalRef = useRef();\n  var isReverse = !isEtherUSD && (isATokenEther || isUSDToken(chainId, currencies[0])) || isEtherUSD && isBTokenEther;\n  useEffect(function () {\n    stateRef.current = {\n      data: data,\n      oldestTs: oldestTs\n    };\n  }, [data, oldestTs]);\n  useEffect(function () {\n    return function () {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, []);\n  useEffect(function () {\n    setData([]);\n  }, [currencies]);\n  var getCandles = useCallback( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(ts) {\n      var span,\n          res,\n          response,\n          _args2 = arguments;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              span = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : 'month';\n              res = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : '15m';\n              _context2.next = 4;\n              return getCandlesApi(chainId, pairAddress, apiVersion, ts, span, res, sym);\n\n            case 4:\n              response = _context2.sent;\n              return _context2.abrupt(\"return\", response === null || response === void 0 ? void 0 : response.data);\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [chainId, pairAddress, apiVersion, sym]);\n  return useMemo(function () {\n    return {\n      onReady: function onReady(callback) {\n        setTimeout(function () {\n          return callback(configurationData);\n        });\n      },\n      resolveSymbol: function () {\n        var _resolveSymbol = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(symbolName, onSymbolResolvedCallback, onResolveErrorCallback) {\n          var _currencies$3, _currencies$4, _currencies$5, _currencies$6, label1, label2, label, ts, _yield$getCandles, candles, symbolInfo;\n\n          return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.prev = 0;\n                  label1 = (_currencies$3 = currencies[0]) !== null && _currencies$3 !== void 0 && _currencies$3.isNative ? NETWORKS_INFO[chainId || ChainId.MAINNET].nativeToken.name : (_currencies$4 = currencies[0]) === null || _currencies$4 === void 0 ? void 0 : _currencies$4.symbol;\n                  label2 = (_currencies$5 = currencies[1]) !== null && _currencies$5 !== void 0 && _currencies$5.isNative ? NETWORKS_INFO[chainId || ChainId.MAINNET].nativeToken.name : (_currencies$6 = currencies[1]) === null || _currencies$6 === void 0 ? void 0 : _currencies$6.symbol;\n                  label = \"\".concat(label1, \"/\").concat(label2);\n                  ts = Math.floor(new Date().getTime() / monthTs) * monthTs;\n                  _context3.next = 7;\n                  return getCandles(ts, 'month');\n\n                case 7:\n                  _yield$getCandles = _context3.sent;\n                  candles = _yield$getCandles.candles;\n                  symbolInfo = {\n                    ticker: label,\n                    name: label,\n                    full_name: label,\n                    listed_exchange: '',\n                    format: 'price',\n                    description: label,\n                    type: 'crypto',\n                    session: '24x7',\n                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n                    exchange: '',\n                    minmov: 1,\n                    pricescale: candles.length > 0 ? Math.pow(10, Math.ceil(Math.log10(isReverse ? candles[0].open : 1 / candles[0].open)) + 5) : 10000,\n                    has_intraday: true,\n                    has_empty_bars: true,\n                    has_weekly_and_monthly: true,\n                    has_daily: true,\n                    supported_resolutions: configurationData.supported_resolutions,\n                    data_status: 'streaming'\n                  };\n                  onSymbolResolvedCallback(symbolInfo);\n                  _context3.next = 16;\n                  break;\n\n                case 13:\n                  _context3.prev = 13;\n                  _context3.t0 = _context3[\"catch\"](0);\n                  console.log(_context3.t0);\n\n                case 16:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, null, [[0, 13]]);\n        }));\n\n        function resolveSymbol(_x4, _x5, _x6) {\n          return _resolveSymbol.apply(this, arguments);\n        }\n\n        return resolveSymbol;\n      }(),\n      getBars: function () {\n        var _getBars = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(symbolInfo, resolution, periodParams, onHistoryCallback, onErrorCallback) {\n          var _candlesTemp$, from, to, candlesTemp, noData, minTime, _datas$, lastTimePoint, fromTimePoint, promisesArray, i, ts, datas, candles, formatedCandles, dayCandles, timeTs;\n\n          return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  if (!fetchingRef.current) {\n                    _context4.next = 2;\n                    break;\n                  }\n\n                  return _context4.abrupt(\"return\");\n\n                case 2:\n                  _context4.prev = 2;\n                  from = periodParams.from * 1000;\n                  to = periodParams.to * 1000;\n                  candlesTemp = stateRef.current.data;\n                  noData = false;\n                  minTime = ((_candlesTemp$ = candlesTemp[0]) === null || _candlesTemp$ === void 0 ? void 0 : _candlesTemp$.time) || new Date().getTime();\n\n                  if (!(minTime > from)) {\n                    _context4.next = 31;\n                    break;\n                  }\n\n                  lastTimePoint = Math.floor(minTime / monthTs) + (periodParams.firstDataRequest ? 1 : 0);\n                  fromTimePoint = Math.floor(from / monthTs);\n                  fetchingRef.current = true;\n                  promisesArray = [];\n                  i = lastTimePoint - 1;\n\n                case 14:\n                  if (!(i >= fromTimePoint)) {\n                    _context4.next = 23;\n                    break;\n                  }\n\n                  ts = i * monthTs;\n                  promisesArray.push(getCandles(ts));\n\n                  if (!(ts < stateRef.current.oldestTs)) {\n                    _context4.next = 20;\n                    break;\n                  }\n\n                  noData = true;\n                  return _context4.abrupt(\"break\", 23);\n\n                case 20:\n                  i--;\n                  _context4.next = 14;\n                  break;\n\n                case 23:\n                  _context4.next = 25;\n                  return Promise.all(promisesArray);\n\n                case 25:\n                  datas = _context4.sent;\n                  setOldestTs(parseFloat((_datas$ = datas[0]) === null || _datas$ === void 0 ? void 0 : _datas$.oldestTs));\n                  candles = datas.map(function (data) {\n                    return data.candles;\n                  });\n                  candlesTemp = [].concat(_toConsumableArray(candles.length ? candles.reduce(function (p, c) {\n                    return p.concat(c);\n                  }) : []), _toConsumableArray(candlesTemp)).sort(function (a, b) {\n                    return a.time - b.time;\n                  });\n                  setData(candlesTemp);\n                  fetchingRef.current = false;\n\n                case 31:\n                  formatedCandles = candlesTemp.filter(function (c) {\n                    return c.time > from && c.time < to;\n                  }).map(function (c, i, arr) {\n                    if (arr[i + 1] && c.close !== arr[i + 1].open) {\n                      c.close = arr[i + 1].open;\n\n                      if (c.close > c.high) {\n                        c.high = c.close;\n                      }\n\n                      if (c.close < c.low) {\n                        c.low = c.close;\n                      }\n                    }\n\n                    return c;\n                  });\n\n                  if (isReverse) {\n                    formatedCandles = formatedCandles.map(function (c) {\n                      return _objectSpread(_objectSpread({}, c), {}, {\n                        open: 1 / c.open,\n                        close: 1 / c.close,\n                        high: 1 / c.low,\n                        low: 1 / c.high\n                      });\n                    });\n                  }\n\n                  if (!(resolution === '1D' || resolution === '1W' || resolution === '1M')) {\n                    _context4.next = 50;\n                    break;\n                  }\n\n                  dayCandles = {};\n                  timeTs = 0;\n                  _context4.t0 = resolution;\n                  _context4.next = _context4.t0 === '1D' ? 39 : _context4.t0 === '1W' ? 41 : _context4.t0 === '1M' ? 43 : 45;\n                  break;\n\n                case 39:\n                  timeTs = dayTs;\n                  return _context4.abrupt(\"break\", 46);\n\n                case 41:\n                  timeTs = weekTs;\n                  return _context4.abrupt(\"break\", 46);\n\n                case 43:\n                  timeTs = monthTs;\n                  return _context4.abrupt(\"break\", 46);\n\n                case 45:\n                  timeTs = dayTs;\n\n                case 46:\n                  formatedCandles.forEach(function (c) {\n                    var ts = Math.floor(c.time / timeTs);\n\n                    if (!dayCandles[ts]) {\n                      dayCandles[ts] = _objectSpread(_objectSpread({}, c), {}, {\n                        time: ts * timeTs\n                      });\n                    } else {\n                      dayCandles[ts].volume = (c.volume || 0) + (dayCandles[ts].volume || 0);\n                      dayCandles[ts].close = c.close;\n\n                      if (dayCandles[ts].high < c.high) {\n                        dayCandles[ts].high = c.high;\n                      }\n\n                      if (dayCandles[ts].low > c.low) {\n                        dayCandles[ts].low = c.low;\n                      }\n                    }\n                  });\n                  onHistoryCallback(Object.values(dayCandles), {\n                    noData: noData\n                  });\n                  _context4.next = 51;\n                  break;\n\n                case 50:\n                  onHistoryCallback(formatedCandles, {\n                    noData: noData\n                  });\n\n                case 51:\n                  _context4.next = 57;\n                  break;\n\n                case 53:\n                  _context4.prev = 53;\n                  _context4.t1 = _context4[\"catch\"](2);\n                  console.log('[getBars]: Get error', _context4.t1);\n                  onErrorCallback(_context4.t1);\n\n                case 57:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4, null, [[2, 53]]);\n        }));\n\n        function getBars(_x7, _x8, _x9, _x10, _x11) {\n          return _getBars.apply(this, arguments);\n        }\n\n        return getBars;\n      }(),\n      searchSymbols: function searchSymbols() {// TODO(viet-nv): check no empty function rule\n      },\n      subscribeBars: function subscribeBars(symbolInfo, resolution, onTick, listenerGuid, onResetCacheNeededCallback) {\n        if (intervalRef.current) clearInterval(intervalRef.current);\n\n        var getLivePrice = /*#__PURE__*/function () {\n          var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n            var ts, data, candles, lastCandle, timeTs, closestTs, inRangeCandles;\n            return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n              while (1) {\n                switch (_context5.prev = _context5.next) {\n                  case 0:\n                    ts = resolution === '1M' ? Math.floor(new Date().getTime() / monthTs) * monthTs : Math.floor(new Date().getTime() / weekTs) * weekTs;\n                    _context5.next = 3;\n                    return getCandles(ts, resolution === '1M' ? 'month' : 'week', '15m');\n\n                  case 3:\n                    data = _context5.sent;\n\n                    if (!(!data || !data.candles)) {\n                      _context5.next = 6;\n                      break;\n                    }\n\n                    return _context5.abrupt(\"return\");\n\n                  case 6:\n                    candles = data.candles;\n                    lastCandle = {};\n                    timeTs = 0;\n\n                    if (!(resolution === '1D' || resolution === '1W' || resolution === '1M')) {\n                      _context5.next = 25;\n                      break;\n                    }\n\n                    _context5.t0 = resolution;\n                    _context5.next = _context5.t0 === '1D' ? 13 : _context5.t0 === '1W' ? 15 : _context5.t0 === '1M' ? 17 : 19;\n                    break;\n\n                  case 13:\n                    timeTs = Math.floor(new Date().getTime() / dayTs) * dayTs;\n                    return _context5.abrupt(\"break\", 20);\n\n                  case 15:\n                    timeTs = Math.floor(new Date().getTime() / weekTs) * weekTs;\n                    return _context5.abrupt(\"break\", 20);\n\n                  case 17:\n                    timeTs = timeTs = Math.floor(new Date().getTime() / monthTs) * monthTs;\n                    return _context5.abrupt(\"break\", 20);\n\n                  case 19:\n                    timeTs = Math.floor(new Date().getTime() / dayTs) * dayTs;\n\n                  case 20:\n                    closestTs = candles.map(function (c) {\n                      return c.time;\n                    }).reduce(function (prev, curr) {\n                      return Math.abs(curr - timeTs) < Math.abs(prev - timeTs) ? curr : prev;\n                    });\n                    inRangeCandles = candles.filter(function (c) {\n                      return c.time >= closestTs;\n                    });\n\n                    if (inRangeCandles.length > 0) {\n                      lastCandle.time = timeTs;\n                      lastCandle.open = inRangeCandles[0].open;\n                      lastCandle.close = inRangeCandles[inRangeCandles.length - 1].close;\n                      lastCandle.high = Math.max.apply(Math, _toConsumableArray(inRangeCandles.map(function (c) {\n                        return c.high;\n                      })));\n                      lastCandle.low = Math.min.apply(Math, _toConsumableArray(inRangeCandles.map(function (c) {\n                        return c.low;\n                      })));\n                      lastCandle.volume = inRangeCandles.map(function (c) {\n                        return c.volume;\n                      }).reduce(function (prev, c) {\n                        return prev + c;\n                      });\n                    }\n\n                    _context5.next = 26;\n                    break;\n\n                  case 25:\n                    lastCandle = candles[candles.length - 1];\n\n                  case 26:\n                    if (lastCandle) {\n                      _context5.next = 28;\n                      break;\n                    }\n\n                    return _context5.abrupt(\"return\");\n\n                  case 28:\n                    if (isReverse) {\n                      lastCandle = _objectSpread(_objectSpread({}, lastCandle), {}, {\n                        open: 1 / lastCandle.open,\n                        close: 1 / lastCandle.close,\n                        high: 1 / lastCandle.low,\n                        low: 1 / lastCandle.high\n                      });\n                    }\n\n                    onTick(lastCandle);\n\n                  case 30:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }\n            }, _callee5);\n          }));\n\n          return function getLivePrice() {\n            return _ref3.apply(this, arguments);\n          };\n        }();\n\n        intervalRef.current = setInterval(getLivePrice, 30000);\n        getLivePrice();\n      },\n      unsubscribeBars: function unsubscribeBars() {// TODO(viet-nv): check no empty function rule\n      }\n    };\n  }, [chainId, getCandles, isReverse, currencies]);\n};\n\n_s(useDatafeed, \"UCvwTI52hpj1wjtG+6E4oAdXQiY=\", false, function () {\n  return [useActiveWeb3React];\n});","map":{"version":3,"names":["ChainId","WETH","useCallback","useEffect","useMemo","useRef","useState","DAI","USDC","USDT","NETWORKS_INFO","STABLE_COINS_ADDRESS","useActiveWeb3React","configurationData","supported_resolutions","getNetworkString","chainId","MAINNET","BSCMAINNET","MATIC","CRONOS","AVAXMAINNET","FANTOM","ARBITRUM","VELAS","AURORA","OASIS","OPTIMISM","ETHW","DEXTOOLS_API","monthTs","weekTs","dayTs","TOKEN_PAIRS_ADDRESS_MAPPING","LOCALSTORAGE_CHECKED_PAIRS","fetcherDextools","url","fetch","then","res","json","catch","error","console","log","searchTokenPair","address","toLowerCase","Promise","resolve","reject","id","getHistoryCandleStatus","pairAddress","getCandlesApi","apiVersion","ts","span","sym","isNativeToken","currency","isNative","isUSDToken","usdTokenAddresses","map","a","includes","updateLocalstorageCheckedPair","key","cPstr","localStorage","getItem","checkedPairs","JSON","parse","time","Date","getTime","setItem","stringify","checkPairHasDextoolsData","currencies","Object","values","currencyA","currencyB","ver","symbolA","nativeToken","name","symbol","symbolB","sort","join","checkedPair","token","data1","length","Math","floor","data","candles","useDatafeed","isATokenEther","isBTokenEther","isTokenUSD","isToken","isEtherUSD","setData","oldestTs","setOldestTs","stateRef","fetchingRef","intervalRef","isReverse","current","clearInterval","getCandles","response","onReady","callback","setTimeout","resolveSymbol","symbolName","onSymbolResolvedCallback","onResolveErrorCallback","label1","label2","label","symbolInfo","ticker","full_name","listed_exchange","format","description","type","session","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","exchange","minmov","pricescale","pow","ceil","log10","open","has_intraday","has_empty_bars","has_weekly_and_monthly","has_daily","data_status","getBars","resolution","periodParams","onHistoryCallback","onErrorCallback","from","to","candlesTemp","noData","minTime","lastTimePoint","firstDataRequest","fromTimePoint","promisesArray","i","push","all","datas","parseFloat","reduce","p","c","concat","b","formatedCandles","filter","arr","close","high","low","dayCandles","timeTs","forEach","volume","searchSymbols","subscribeBars","onTick","listenerGuid","onResetCacheNeededCallback","getLivePrice","lastCandle","closestTs","prev","curr","abs","inRangeCandles","max","min","setInterval","unsubscribeBars"],"sources":["/Applications/XAMPP/voxel-interface/src/components/TradingViewChart/datafeed.tsx"],"sourcesContent":["import { ChainId, Currency, Token, WETH } from '@kyberswap/ks-sdk-core'\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\n\nimport { DAI, USDC, USDT } from 'constants/index'\nimport { NETWORKS_INFO } from 'constants/networks'\nimport { STABLE_COINS_ADDRESS } from 'constants/tokens'\nimport { useActiveWeb3React } from 'hooks'\nimport { Field } from 'state/swap/actions'\n\nimport {\n  Bar,\n  ErrorCallback,\n  HistoryCallback,\n  LibrarySymbolInfo,\n  PeriodParams,\n  ResolutionString,\n  ResolveCallback,\n  SubscribeBarsCallback,\n  Timezone,\n} from './charting_library'\n\nconst configurationData = {\n  supported_resolutions: ['1', '3', '5', '15', '30', '1H', '2H', '4H', '1D', '1W', '1M'],\n}\n\nconst getNetworkString = (chainId: ChainId | undefined) => {\n  switch (chainId) {\n    case ChainId.MAINNET:\n      return 'chain-ethereum'\n    case ChainId.BSCMAINNET:\n      return 'chain-bsc'\n    case ChainId.MATIC:\n      return 'chain-polygon'\n    case ChainId.CRONOS:\n      return 'chain-cronos'\n    case ChainId.AVAXMAINNET:\n      return 'chain-avalanche'\n    case ChainId.FANTOM:\n      return 'chain-fantom'\n    case ChainId.ARBITRUM:\n      return 'chain-arbitrum'\n    case ChainId.VELAS:\n      return 'chain-velas'\n    case ChainId.AURORA:\n      return 'chain-aurora'\n    case ChainId.OASIS:\n      return 'chain-oasis'\n    case ChainId.OPTIMISM:\n      return 'chain-optimism'\n    case ChainId.ETHW:\n      return 'chain-ethw'\n    default:\n      return ''\n  }\n}\n\nconst DEXTOOLS_API = 'https://pancake-subgraph-proxy.kyberswap.com/dextools'\nconst monthTs = 2592000000\nconst weekTs = 604800000\nconst dayTs = 86400000\n// Hard code token address to specific pair address to use in dextool api.\nconst TOKEN_PAIRS_ADDRESS_MAPPING: {\n  [key: string]: string\n} = {\n  '0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9': '0xd75ea151a61d06868e31f8988d28dfe5e9df57b4',\n  '0x6b175474e89094c44da98b954eedeac495271d0f': '0x74c99f3f5331676f6aec2756e1f39b4fc029a83e',\n  '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48': '0x74c99f3f5331676f6aec2756e1f39b4fc029a83e',\n  '0x1c954e8fe737f99f68fa1ccda3e51ebdb291948c': 'nodata',\n  '0x8f3cf7ad23cd3cadbd9735aff958023239c6a063': '0xa374094527e1673a86de625aa59517c5de346d32',\n  '0x1af3f329e8be154074d8769d1ffa4ee058b1dbc3': '0xd99c7f6c65857ac913a8f880a4cb84032ab2fc5b',\n  '0xd586e7f844cea2f87f50152665bcbc2c279d8d70': '0xa389f9430876455c36478deea9769b7ca4e3ddb1',\n  '0xc7198437980c041c805a1edcba50c1ce5db95118': '0xa389f9430876455c36478deea9769b7ca4e3ddb1',\n  '0x19860ccb0a68fd4213ab9d8266f7bbf05a8dde98': '0xa389f9430876455c36478deea9769b7ca4e3ddb1',\n  '0x8d11ec38a3eb5e956b052f67da8bdc9bef8abf3e': '0xadc8ad9d3d62b1af72e5ce0ec767465f313513dd',\n  '0x049d68029688eabf473097a2fc38ef61633a3c7a': '0xadc8ad9d3d62b1af72e5ce0ec767465f313513dd',\n  '0x41e3df7f716ab5af28c1497b354d79342923196a': '0xadc8ad9d3d62b1af72e5ce0ec767465f313513dd',\n  '0xf2001b145b43032aaf5ee2884e456ccd805f677d': '0xa68466208f1a3eb21650320d2520ee8eba5ba623',\n  '0x66e428c3f67a68878562e79a0234c1f83c208770': '0xa68466208f1a3eb21650320d2520ee8eba5ba623',\n  '0xda10009cbd5d07dd0cecc66161fc93d7c9000da1': '0xc31e54c7a869b9fcbecc14363cf510d1c41fa443',\n  '0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9': '0xc31e54c7a869b9fcbecc14363cf510d1c41fa443',\n  '0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab': '0x0f0fc5a5029e3d155708356b422d22cc29f8b3d4',\n  '0xd501281565bf7789224523144fe5d98e8b28f267': '0x64ed9711667c9e8923bee32260a55a9b8dbc99d3',\n  '0x63a72806098Bd3D9520cC43356dD78afe5D386D9': '0x5944f135e4f1e3fa2e5550d4b5170783868cc4fe',\n  '0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d': '0xd99c7f6c65857ac913a8f880a4cb84032ab2fc5b',\n  '0xdac17f958d2ee523a2206206994597c13d831ec7': '0x4e68ccd3e89f51c3074ca5072bbac773960dfa36', // BNB_USD\n  '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619': '0xce1923d2242bba540f1d56c8e23b1fbeae2596dc', // ETH_USD on polygon\n  '0xff970a61a04b1ca14834a43f5de4533ebddb5cc8': '0x905dfcd5649217c42684f23958568e533c711aa3', // ETH_USD Arbitrum\n  '0x7f5c764cbc14f9669b88837ca1490cca17c31607': '0x1a981daa7967c66c3356ad044979bc82e4a478b9', // ETH_USD Optimism\n  '0xe9e7cea3dedca5984780bafc599bd69add087d56': '0x58f876857a02d6762e0101bb5c46a8c1ed44dc16', // BNB_BUSD\n  '0x853ea32391aaa14c112c645fd20ba389ab25c5e0': '0x5d79a43e6b9d8e3ecca26f91afe34634248773c8', // USX on AVAX\n  '0x261c94f2d3cccae76f86f6c8f2c93785dd6ce022': 'nodata', // ATH on BSC\n  '0x94b008aA00579c1307B0EF2c499aD98a8ce58e58': '0xc858a329bf053be78d6239c4a4343b8fbd21472b', // USDT on Optimism\n}\nconst LOCALSTORAGE_CHECKED_PAIRS = 'proChartCheckedPairs'\n\nconst fetcherDextools = (url: string) => {\n  return fetch(`${DEXTOOLS_API}/${url}`)\n    .then(res => res.json())\n    .catch(error => console.log(error))\n}\n\nexport const searchTokenPair = (address: string, chainId: ChainId | undefined) => {\n  if (TOKEN_PAIRS_ADDRESS_MAPPING[address.toLowerCase()]) {\n    return new Promise((resolve, reject) => {\n      resolve([{ id: TOKEN_PAIRS_ADDRESS_MAPPING[address.toLowerCase()] }])\n    })\n  }\n  return fetcherDextools(`${getNetworkString(chainId)}/api/pair/search?s=${address}`)\n}\nexport const getHistoryCandleStatus = (pairAddress: string, chainId: ChainId | undefined) => {\n  return fetcherDextools(`${getNetworkString(chainId)}/api/Uniswap/1/history-candle-status?pair=${pairAddress}`)\n}\nexport const getCandlesApi = (\n  chainId: ChainId | undefined,\n  pairAddress: string,\n  apiVersion: string,\n  ts: number,\n  span = 'month',\n  res = '15m',\n  sym = 'eth',\n) => {\n  return fetcherDextools(\n    `${getNetworkString(\n      chainId,\n    )}/api/Pancakeswap/history/candles?sym=${sym}&span=${span}&pair=${pairAddress}&ts=${ts}&v=${apiVersion}${\n      res && '&res=' + res\n    }`,\n  )\n}\n\nconst isNativeToken = (chainId: ChainId | undefined, currency: Currency | undefined) => {\n  if (!currency || !chainId) {\n    return false\n  }\n  return currency.isNative || WETH[chainId].address.toLowerCase() === currency.address.toLowerCase()\n}\n\nconst isUSDToken = (chainId: ChainId | undefined, currency: Currency | undefined) => {\n  if (isNativeToken(chainId, currency) || !chainId || currency?.isNative) {\n    return false\n  }\n  const usdTokenAddresses = [\n    USDT[chainId].address.toLowerCase(),\n    USDC[chainId].address.toLowerCase(),\n    DAI[chainId].address.toLowerCase(),\n    '0xe9e7cea3dedca5984780bafc599bd69add087d56', //BUSD\n    '0xcd7509b76281223f5b7d3ad5d47f8d7aa5c2b9bf', //USDV Velas\n    '0xdb28719f7f938507dbfe4f0eae55668903d34a15', //USDT_t BTTC\n    '0xe887512ab8bc60bcc9224e1c3b5be68e26048b8b', //USDT_e BTTC\n    '0x19860ccb0a68fd4213ab9d8266f7bbf05a8dde98', //BUSD.e\n    '0x4fbf0429599460d327bd5f55625e30e4fc066095', //TDS on AVAX\n    ...STABLE_COINS_ADDRESS[chainId].map(a => a.toLowerCase()),\n  ]\n\n  if (currency?.address && usdTokenAddresses.includes(currency.address.toLowerCase())) {\n    return true\n  }\n  return false\n}\n\nconst updateLocalstorageCheckedPair = (key: string, res: { ver: number; pairAddress: string }) => {\n  const cPstr = localStorage.getItem(LOCALSTORAGE_CHECKED_PAIRS)\n  const checkedPairs: { [key: string]: { ver: number; pairAddress: string; time: number } } = cPstr\n    ? JSON.parse(cPstr)\n    : {}\n  checkedPairs[key] = { ...res, time: new Date().getTime() }\n  localStorage.setItem(LOCALSTORAGE_CHECKED_PAIRS, JSON.stringify(checkedPairs))\n}\n\nexport const checkPairHasDextoolsData = async (\n  currencies: { [field in Field]?: Currency },\n  chainId: ChainId | undefined,\n): Promise<{ ver: number; pairAddress: string }> => {\n  const [currencyA, currencyB] = Object.values(currencies)\n  const res = { ver: 0, pairAddress: '' }\n  if (!currencyA || !currencyB) return Promise.resolve(res)\n  if (\n    (isNativeToken(chainId, currencyA) && isNativeToken(chainId, currencyB)) ||\n    (isUSDToken(chainId, currencyA) && isUSDToken(chainId, currencyB))\n  ) {\n    return Promise.resolve(res)\n  }\n  const cPstr = localStorage.getItem(LOCALSTORAGE_CHECKED_PAIRS)\n  const checkedPairs: { [key: string]: { ver: number; pairAddress: string; time: number } } = cPstr\n    ? JSON.parse(cPstr)\n    : {}\n  const symbolA = currencyA.isNative ? NETWORKS_INFO[chainId || ChainId.MAINNET].nativeToken.name : currencyA.symbol\n  const symbolB = currencyB.isNative ? NETWORKS_INFO[chainId || ChainId.MAINNET].nativeToken.name : currencyB.symbol\n  const key: string = [symbolA, symbolB, chainId].sort().join('')\n  const checkedPair = checkedPairs[key]\n  if (\n    checkedPair &&\n    checkedPair.ver &&\n    checkedPair.pairAddress &&\n    checkedPair.time > new Date().getTime() - dayTs // Cache expire after 1 day\n  ) {\n    return Promise.resolve({ ver: checkedPair.ver, pairAddress: checkedPair.pairAddress })\n  }\n  /// ETH pair\n  if (isNativeToken(chainId, currencyA) || isNativeToken(chainId, currencyB)) {\n    const token = (isNativeToken(chainId, currencyA) ? currencyB : currencyA) as Token\n    if (token?.address) {\n      const data1: { id: string }[] = await searchTokenPair(token.address, chainId)\n      if (data1.length > 0 && data1[0].id) {\n        const ver = (await getHistoryCandleStatus(data1[0].id, chainId)) || 0\n\n        const ts = Math.floor(new Date().getTime() / monthTs) * monthTs\n        const { data } = await getCandlesApi(chainId, data1[0].id, ver, ts, 'month')\n        if (data?.candles?.length) {\n          res.ver = ver\n          res.pairAddress = data1[0].id\n          updateLocalstorageCheckedPair(key, res)\n          return Promise.resolve(res)\n        }\n      }\n    }\n  } else {\n    /// USD pair\n    if (isUSDToken(chainId, currencyA) || isUSDToken(chainId, currencyB)) {\n      const token = (isUSDToken(chainId, currencyA) ? currencyB : currencyA) as Token\n      if (token?.address) {\n        const data1 = await searchTokenPair(token.address, chainId)\n        if (data1.length > 0 && data1[0].id) {\n          const ver = await getHistoryCandleStatus(data1[0].id, chainId)\n          if (ver) {\n            const ts = Math.floor(new Date().getTime() / monthTs) * monthTs\n            const { data } = await getCandlesApi(chainId, data1[0].id, ver, ts, 'month', '15m', 'usd')\n            if (data?.candles?.length) {\n              res.ver = ver\n              res.pairAddress = data1[0].id\n              updateLocalstorageCheckedPair(key, res)\n              return Promise.resolve(res)\n            }\n          }\n        }\n      }\n    }\n  }\n  updateLocalstorageCheckedPair(key, res)\n  return Promise.resolve(res)\n}\n\nexport const useDatafeed = (currencies: Array<Currency | undefined>, pairAddress: string, apiVersion: string) => {\n  const { chainId } = useActiveWeb3React()\n  const isATokenEther = isNativeToken(chainId, currencies[0])\n  const isBTokenEther = isNativeToken(chainId, currencies[1])\n  const isTokenUSD =\n    (isUSDToken(chainId, currencies[0]) && currencies[1]?.isToken) ||\n    (isUSDToken(chainId, currencies[1]) && currencies[0]?.isToken)\n  const isEtherUSD =\n    (isUSDToken(chainId, currencies[0]) && isBTokenEther) || (isUSDToken(chainId, currencies[1]) && isATokenEther)\n  const sym = isTokenUSD || isEtherUSD ? 'usd' : 'eth'\n  const [data, setData] = useState<Bar[]>([])\n  const [oldestTs, setOldestTs] = useState(0)\n\n  const stateRef = useRef<{ data: Bar[]; oldestTs: number }>({ data, oldestTs })\n  const fetchingRef = useRef<boolean>(false)\n  const intervalRef = useRef<any>()\n\n  const isReverse =\n    (!isEtherUSD && (isATokenEther || isUSDToken(chainId, currencies[0]))) || (isEtherUSD && isBTokenEther)\n\n  useEffect(() => {\n    stateRef.current = { data, oldestTs }\n  }, [data, oldestTs])\n\n  useEffect(() => {\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current)\n      }\n    }\n  }, [])\n\n  useEffect(() => {\n    setData([])\n  }, [currencies])\n\n  const getCandles = useCallback(\n    async (ts: number, span = 'month', res = '15m') => {\n      const response = await getCandlesApi(chainId, pairAddress, apiVersion, ts, span, res, sym)\n      return response?.data\n    },\n    [chainId, pairAddress, apiVersion, sym],\n  )\n\n  return useMemo(() => {\n    return {\n      onReady: (callback: any) => {\n        setTimeout(() => callback(configurationData))\n      },\n      resolveSymbol: async (\n        symbolName: string,\n        onSymbolResolvedCallback: ResolveCallback,\n        onResolveErrorCallback: ErrorCallback,\n      ) => {\n        try {\n          const label1 = currencies[0]?.isNative\n            ? NETWORKS_INFO[chainId || ChainId.MAINNET].nativeToken.name\n            : currencies[0]?.symbol\n          const label2 = currencies[1]?.isNative\n            ? NETWORKS_INFO[chainId || ChainId.MAINNET].nativeToken.name\n            : currencies[1]?.symbol\n\n          const label = `${label1}/${label2}`\n\n          const ts = Math.floor(new Date().getTime() / monthTs) * monthTs\n          const { candles } = await getCandles(ts, 'month')\n\n          const symbolInfo: LibrarySymbolInfo = {\n            ticker: label,\n            name: label,\n            full_name: label,\n            listed_exchange: '',\n            format: 'price',\n            description: label,\n            type: 'crypto',\n            session: '24x7',\n            timezone: Intl.DateTimeFormat().resolvedOptions().timeZone as Timezone,\n            exchange: '',\n            minmov: 1,\n            pricescale:\n              candles.length > 0\n                ? Math.pow(10, Math.ceil(Math.log10(isReverse ? candles[0].open : 1 / candles[0].open)) + 5)\n                : 10000,\n            has_intraday: true,\n            has_empty_bars: true,\n            has_weekly_and_monthly: true,\n            has_daily: true,\n            supported_resolutions: configurationData.supported_resolutions as ResolutionString[],\n            data_status: 'streaming',\n          }\n          onSymbolResolvedCallback(symbolInfo)\n        } catch (error) {\n          console.log(error)\n        }\n      },\n      getBars: async (\n        symbolInfo: LibrarySymbolInfo,\n        resolution: ResolutionString,\n        periodParams: PeriodParams,\n        onHistoryCallback: HistoryCallback,\n        onErrorCallback: ErrorCallback,\n      ) => {\n        if (fetchingRef.current) return\n        try {\n          const from = periodParams.from * 1000\n          const to = periodParams.to * 1000\n          let candlesTemp = stateRef.current.data\n          let noData = false\n          const minTime = candlesTemp[0]?.time || new Date().getTime()\n          if (minTime > from) {\n            const lastTimePoint = Math.floor(minTime / monthTs) + (periodParams.firstDataRequest ? 1 : 0)\n            const fromTimePoint = Math.floor(from / monthTs)\n\n            fetchingRef.current = true\n            const promisesArray = []\n            for (let i = lastTimePoint - 1; i >= fromTimePoint; i--) {\n              const ts = i * monthTs\n              promisesArray.push(getCandles(ts))\n              if (ts < stateRef.current.oldestTs) {\n                noData = true\n                break\n              }\n            }\n            const datas = await Promise.all(promisesArray)\n            setOldestTs(parseFloat(datas[0]?.oldestTs))\n            const candles = datas.map(data => {\n              return data.candles\n            })\n            candlesTemp = [...(candles.length ? candles.reduce((p, c) => p.concat(c)) : []), ...candlesTemp].sort(\n              (a, b) => a.time - b.time,\n            )\n            setData(candlesTemp)\n\n            fetchingRef.current = false\n          }\n          let formatedCandles = candlesTemp\n            .filter((c: Bar) => c.time > from && c.time < to)\n            .map((c: Bar, i: number, arr: Bar[]) => {\n              if (arr[i + 1] && c.close !== arr[i + 1].open) {\n                c.close = arr[i + 1].open\n                if (c.close > c.high) {\n                  c.high = c.close\n                }\n                if (c.close < c.low) {\n                  c.low = c.close\n                }\n              }\n              return c\n            })\n\n          if (isReverse) {\n            formatedCandles = formatedCandles.map((c: Bar) => {\n              return { ...c, open: 1 / c.open, close: 1 / c.close, high: 1 / c.low, low: 1 / c.high }\n            })\n          }\n          if (resolution === '1D' || resolution === '1W' || resolution === '1M') {\n            const dayCandles: { [key: number]: Bar } = {}\n            let timeTs = 0\n            switch (resolution) {\n              case '1D':\n                timeTs = dayTs\n                break\n              case '1W':\n                timeTs = weekTs\n                break\n              case '1M':\n                timeTs = monthTs\n                break\n              default:\n                timeTs = dayTs\n            }\n            formatedCandles.forEach((c: Bar) => {\n              const ts = Math.floor(c.time / timeTs)\n              if (!dayCandles[ts]) {\n                dayCandles[ts] = {\n                  ...c,\n                  time: ts * timeTs,\n                }\n              } else {\n                dayCandles[ts].volume = (c.volume || 0) + (dayCandles[ts].volume || 0)\n                dayCandles[ts].close = c.close\n                if (dayCandles[ts].high < c.high) {\n                  dayCandles[ts].high = c.high\n                }\n                if (dayCandles[ts].low > c.low) {\n                  dayCandles[ts].low = c.low\n                }\n              }\n            })\n            onHistoryCallback(Object.values(dayCandles), { noData: noData })\n          } else {\n            onHistoryCallback(formatedCandles, { noData: noData })\n          }\n        } catch (error) {\n          console.log('[getBars]: Get error', error)\n          onErrorCallback(error as string)\n        }\n      },\n      searchSymbols: () => {\n        // TODO(viet-nv): check no empty function rule\n      },\n      subscribeBars: (\n        symbolInfo: LibrarySymbolInfo,\n        resolution: ResolutionString,\n        onTick: SubscribeBarsCallback,\n        listenerGuid: string,\n        onResetCacheNeededCallback: () => void,\n      ) => {\n        if (intervalRef.current) clearInterval(intervalRef.current)\n        const getLivePrice = async () => {\n          const ts =\n            resolution === '1M'\n              ? Math.floor(new Date().getTime() / monthTs) * monthTs\n              : Math.floor(new Date().getTime() / weekTs) * weekTs\n          const data = await getCandles(ts, resolution === '1M' ? 'month' : 'week', '15m')\n          if (!data || !data.candles) return\n          const { candles } = data\n          let lastCandle: any = {}\n          let timeTs = 0\n\n          if (resolution === '1D' || resolution === '1W' || resolution === '1M') {\n            switch (resolution) {\n              case '1D':\n                timeTs = Math.floor(new Date().getTime() / dayTs) * dayTs\n                break\n              case '1W':\n                timeTs = Math.floor(new Date().getTime() / weekTs) * weekTs\n                break\n              case '1M':\n                timeTs = timeTs = Math.floor(new Date().getTime() / monthTs) * monthTs\n                break\n              default:\n                timeTs = Math.floor(new Date().getTime() / dayTs) * dayTs\n            }\n            const closestTs = candles\n              .map((c: any) => c.time)\n              .reduce((prev: any, curr: any) => {\n                return Math.abs(curr - timeTs) < Math.abs(prev - timeTs) ? curr : prev\n              })\n            const inRangeCandles = candles.filter((c: any) => c.time >= closestTs)\n\n            if (inRangeCandles.length > 0) {\n              lastCandle.time = timeTs\n              lastCandle.open = inRangeCandles[0].open\n              lastCandle.close = inRangeCandles[inRangeCandles.length - 1].close\n              lastCandle.high = Math.max(...inRangeCandles.map((c: any) => c.high))\n              lastCandle.low = Math.min(...inRangeCandles.map((c: any) => c.low))\n              lastCandle.volume = inRangeCandles\n                .map((c: any) => c.volume)\n                .reduce((prev: any, c: any) => {\n                  return prev + c\n                })\n            }\n          } else {\n            lastCandle = candles[candles.length - 1]\n          }\n          if (!lastCandle) return\n          if (isReverse) {\n            lastCandle = {\n              ...lastCandle,\n              open: 1 / lastCandle.open,\n              close: 1 / lastCandle.close,\n              high: 1 / lastCandle.low,\n              low: 1 / lastCandle.high,\n            }\n          }\n          onTick(lastCandle)\n        }\n        intervalRef.current = setInterval(getLivePrice, 30000)\n        getLivePrice()\n      },\n      unsubscribeBars: () => {\n        // TODO(viet-nv): check no empty function rule\n      },\n    }\n  }, [chainId, getCandles, isReverse, currencies])\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}